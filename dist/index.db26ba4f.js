var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{};function e(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var n={},r={},i=t.parcelRequire77bb;function o(t){return t=t||[],Array.isArray(t)?t:[t]}function a(t){return`[Vaadin.Router] ${t}`}null==i&&((i=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var i={id:t,exports:{}};return n[t]=i,e.call(i.exports,i,i.exports),i.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){r[t]=e},t.parcelRequire77bb=i),i.register("f1q41",(function(e,n){(function(){var r,i="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",s=16,u=32,c=64,l=128,h=256,f=1/0,p=9007199254740991,d=NaN,v=4294967295,g=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",s],["flip",512],["partial",u],["partialRight",c],["rearg",h]],m="[object Arguments]",y="[object Array]",_="[object Boolean]",b="[object Date]",w="[object Error]",I="[object Function]",T="[object GeneratorFunction]",E="[object Map]",S="[object Number]",C="[object Object]",k="[object Promise]",A="[object RegExp]",N="[object Set]",R="[object String]",x="[object Symbol]",P="[object WeakMap]",D="[object ArrayBuffer]",O="[object DataView]",L="[object Float32Array]",M="[object Float64Array]",F="[object Int8Array]",j="[object Int16Array]",U="[object Int32Array]",q="[object Uint8Array]",V="[object Uint8ClampedArray]",B="[object Uint16Array]",K="[object Uint32Array]",W=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,z=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,Q=/[&<>"']/g,$=RegExp(G.source),Y=RegExp(Q.source),X=/<%-([\s\S]+?)%>/g,J=/<%([\s\S]+?)%>/g,Z=/<%=([\s\S]+?)%>/g,tt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,et=/^\w*$/,nt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rt=/[\\^$.*+?()[\]{}|]/g,it=RegExp(rt.source),ot=/^\s+/,at=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ut=/\{\n\/\* \[wrapped with (.+)\] \*/,ct=/,? & /,lt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ht=/[()=,{}\[\]\/\s]/,ft=/\\(\\)?/g,pt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,vt=/^[-+]0x[0-9a-f]+$/i,gt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,yt=/^0o[0-7]+$/i,_t=/^(?:0|[1-9]\d*)$/,bt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wt=/($^)/,It=/['\n\r\u2028\u2029\\]/g,Tt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Et="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",Ct="A-Z\\xc0-\\xd6\\xd8-\\xde",kt="\\ufe0e\\ufe0f",At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Nt="['’]",Rt="[\\ud800-\\udfff]",xt="["+At+"]",Pt="["+Tt+"]",Dt="\\d+",Ot="[\\u2700-\\u27bf]",Lt="["+St+"]",Mt="[^\\ud800-\\udfff"+At+Dt+Et+St+Ct+"]",Ft="\\ud83c[\\udffb-\\udfff]",jt="[^\\ud800-\\udfff]",Ut="(?:\\ud83c[\\udde6-\\uddff]){2}",qt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="["+Ct+"]",Bt="(?:"+Lt+"|"+Mt+")",Kt="(?:"+Vt+"|"+Mt+")",Wt="(?:['’](?:d|ll|m|re|s|t|ve))?",Ht="(?:['’](?:D|LL|M|RE|S|T|VE))?",zt="(?:"+Pt+"|"+Ft+")"+"?",Gt="[\\ufe0e\\ufe0f]?",Qt=Gt+zt+("(?:\\u200d(?:"+[jt,Ut,qt].join("|")+")"+Gt+zt+")*"),$t="(?:"+[Ot,Ut,qt].join("|")+")"+Qt,Yt="(?:"+[jt+Pt+"?",Pt,Ut,qt,Rt].join("|")+")",Xt=RegExp(Nt,"g"),Jt=RegExp(Pt,"g"),Zt=RegExp(Ft+"(?="+Ft+")|"+Yt+Qt,"g"),te=RegExp([Vt+"?"+Lt+"+"+Wt+"(?="+[xt,Vt,"$"].join("|")+")",Kt+"+"+Ht+"(?="+[xt,Vt+Bt,"$"].join("|")+")",Vt+"?"+Bt+"+"+Wt,Vt+"+"+Ht,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Dt,$t].join("|"),"g"),ee=RegExp("[\\u200d\\ud800-\\udfff"+Tt+kt+"]"),ne=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,re=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ie=-1,oe={};oe[L]=oe[M]=oe[F]=oe[j]=oe[U]=oe[q]=oe[V]=oe[B]=oe[K]=!0,oe[m]=oe[y]=oe[D]=oe[_]=oe[O]=oe[b]=oe[w]=oe[I]=oe[E]=oe[S]=oe[C]=oe[A]=oe[N]=oe[R]=oe[P]=!1;var ae={};ae[m]=ae[y]=ae[D]=ae[O]=ae[_]=ae[b]=ae[L]=ae[M]=ae[F]=ae[j]=ae[U]=ae[E]=ae[S]=ae[C]=ae[A]=ae[N]=ae[R]=ae[x]=ae[q]=ae[V]=ae[B]=ae[K]=!0,ae[w]=ae[I]=ae[P]=!1;var se={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ue=parseFloat,ce=parseInt,le="object"==typeof t&&t&&t.Object===Object&&t,he="object"==typeof self&&self&&self.Object===Object&&self,fe=le||he||Function("return this")(),pe=n&&!n.nodeType&&n,de=pe&&e&&!e.nodeType&&e,ve=de&&de.exports===pe,ge=ve&&le.process,me=function(){try{var t=de&&de.require&&de.require("util").types;return t||ge&&ge.binding&&ge.binding("util")}catch(t){}}(),ye=me&&me.isArrayBuffer,_e=me&&me.isDate,be=me&&me.isMap,we=me&&me.isRegExp,Ie=me&&me.isSet,Te=me&&me.isTypedArray;function Ee(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function Se(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var a=t[i];e(r,a,n(a),t)}return r}function Ce(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function ke(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function Ae(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function Ne(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[i++]=a)}return o}function Re(t,e){return!!(null==t?0:t.length)&&qe(t,e,0)>-1}function xe(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function Pe(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function De(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Oe(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Le(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Me(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var Fe=We("length");function je(t,e,n){var r;return n(t,(function(t,n,i){if(e(t,n,i))return r=n,!1})),r}function Ue(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function qe(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):Ue(t,Be,n)}function Ve(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Be(t){return t!=t}function Ke(t,e){var n=null==t?0:t.length;return n?Ge(t,e)/n:d}function We(t){return function(e){return null==e?r:e[t]}}function He(t){return function(e){return null==t?r:t[e]}}function ze(t,e,n,r,i){return i(t,(function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)})),n}function Ge(t,e){for(var n,i=-1,o=t.length;++i<o;){var a=e(t[i]);a!==r&&(n=n===r?a:n+a)}return n}function Qe(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function $e(t){return t?t.slice(0,dn(t)+1).replace(ot,""):t}function Ye(t){return function(e){return t(e)}}function Xe(t,e){return Pe(e,(function(e){return t[e]}))}function Je(t,e){return t.has(e)}function Ze(t,e){for(var n=-1,r=t.length;++n<r&&qe(e,t[n],0)>-1;);return n}function tn(t,e){for(var n=t.length;n--&&qe(e,t[n],0)>-1;);return n}function en(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}var nn=He({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),rn=He({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function on(t){return"\\"+se[t]}function an(t){return ee.test(t)}function sn(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n}function un(t,e){return function(n){return t(e(n))}}function cn(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==a||(t[n]=a,o[i++]=n)}return o}function ln(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}function hn(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=[t,t]})),n}function fn(t){return an(t)?function(t){var e=Zt.lastIndex=0;for(;Zt.test(t);)++e;return e}(t):Fe(t)}function pn(t){return an(t)?function(t){return t.match(Zt)||[]}(t):function(t){return t.split("")}(t)}function dn(t){for(var e=t.length;e--&&at.test(t.charAt(e)););return e}var vn=He({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var gn=function t(e){var n,at=(e=null==e?fe:gn.defaults(fe.Object(),e,gn.pick(fe,re))).Array,Tt=e.Date,Et=e.Error,St=e.Function,Ct=e.Math,kt=e.Object,At=e.RegExp,Nt=e.String,Rt=e.TypeError,xt=at.prototype,Pt=St.prototype,Dt=kt.prototype,Ot=e["__core-js_shared__"],Lt=Pt.toString,Mt=Dt.hasOwnProperty,Ft=0,jt=(n=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||""))?"Symbol(src)_1."+n:"",Ut=Dt.toString,qt=Lt.call(kt),Vt=fe._,Bt=At("^"+Lt.call(Mt).replace(rt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kt=ve?e.Buffer:r,Wt=e.Symbol,Ht=e.Uint8Array,zt=Kt?Kt.allocUnsafe:r,Gt=un(kt.getPrototypeOf,kt),Qt=kt.create,$t=Dt.propertyIsEnumerable,Yt=xt.splice,Zt=Wt?Wt.isConcatSpreadable:r,ee=Wt?Wt.iterator:r,se=Wt?Wt.toStringTag:r,le=function(){try{var t=po(kt,"defineProperty");return t({},"",{}),t}catch(t){}}(),he=e.clearTimeout!==fe.clearTimeout&&e.clearTimeout,pe=Tt&&Tt.now!==fe.Date.now&&Tt.now,de=e.setTimeout!==fe.setTimeout&&e.setTimeout,ge=Ct.ceil,me=Ct.floor,Fe=kt.getOwnPropertySymbols,He=Kt?Kt.isBuffer:r,mn=e.isFinite,yn=xt.join,_n=un(kt.keys,kt),bn=Ct.max,wn=Ct.min,In=Tt.now,Tn=e.parseInt,En=Ct.random,Sn=xt.reverse,Cn=po(e,"DataView"),kn=po(e,"Map"),An=po(e,"Promise"),Nn=po(e,"Set"),Rn=po(e,"WeakMap"),xn=po(kt,"create"),Pn=Rn&&new Rn,Dn={},On=Wo(Cn),Ln=Wo(kn),Mn=Wo(An),Fn=Wo(Nn),jn=Wo(Rn),Un=Wt?Wt.prototype:r,qn=Un?Un.valueOf:r,Vn=Un?Un.toString:r;function Bn(t){if(ss(t)&&!Ya(t)&&!(t instanceof zn)){if(t instanceof Hn)return t;if(Mt.call(t,"__wrapped__"))return Ho(t)}return new Hn(t)}var Kn=function(){function t(){}return function(e){if(!as(e))return{};if(Qt)return Qt(e);t.prototype=e;var n=new t;return t.prototype=r,n}}();function Wn(){}function Hn(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=r}function zn(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Gn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Qn(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function $n(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function Yn(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new $n;++e<n;)this.add(t[e])}function Xn(t){var e=this.__data__=new Qn(t);this.size=e.size}function Jn(t,e){var n=Ya(t),r=!n&&$a(t),i=!n&&!r&&ts(t),o=!n&&!r&&!i&&vs(t),a=n||r||i||o,s=a?Qe(t.length,Nt):[],u=s.length;for(var c in t)!e&&!Mt.call(t,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||wo(c,u))||s.push(c);return s}function Zn(t){var e=t.length;return e?t[Yr(0,e-1)]:r}function tr(t,e){return jo(xi(t),cr(e,0,t.length))}function er(t){return jo(xi(t))}function nr(t,e,n){(n!==r&&!za(t[e],n)||n===r&&!(e in t))&&sr(t,e,n)}function rr(t,e,n){var i=t[e];Mt.call(t,e)&&za(i,n)&&(n!==r||e in t)||sr(t,e,n)}function ir(t,e){for(var n=t.length;n--;)if(za(t[n][0],e))return n;return-1}function or(t,e,n,r){return dr(t,(function(t,i,o){e(r,t,n(t),o)})),r}function ar(t,e){return t&&Pi(e,Fs(e),t)}function sr(t,e,n){"__proto__"==e&&le?le(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function ur(t,e){for(var n=-1,i=e.length,o=at(i),a=null==t;++n<i;)o[n]=a?r:Ps(t,e[n]);return o}function cr(t,e,n){return t==t&&(n!==r&&(t=t<=n?t:n),e!==r&&(t=t>=e?t:e)),t}function lr(t,e,n,i,o,a){var s,u=1&e,c=2&e,l=4&e;if(n&&(s=o?n(t,i,o,a):n(t)),s!==r)return s;if(!as(t))return t;var h=Ya(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&Mt.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(t),!u)return xi(t,s)}else{var f=mo(t),p=f==I||f==T;if(ts(t))return Si(t,u);if(f==C||f==m||p&&!o){if(s=c||p?{}:_o(t),!u)return c?function(t,e){return Pi(t,go(t),e)}(t,function(t,e){return t&&Pi(e,js(e),t)}(s,t)):function(t,e){return Pi(t,vo(t),e)}(t,ar(s,t))}else{if(!ae[f])return o?t:{};s=function(t,e,n){var r=t.constructor;switch(e){case D:return Ci(t);case _:case b:return new r(+t);case O:return function(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case L:case M:case F:case j:case U:case q:case V:case B:case K:return ki(t,n);case E:return new r;case S:case R:return new r(t);case A:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case N:return new r;case x:return i=t,qn?kt(qn.call(i)):{}}var i}(t,f,u)}}a||(a=new Xn);var d=a.get(t);if(d)return d;a.set(t,s),fs(t)?t.forEach((function(r){s.add(lr(r,e,n,r,t,a))})):us(t)&&t.forEach((function(r,i){s.set(i,lr(r,e,n,i,t,a))}));var v=h?r:(l?c?ao:oo:c?js:Fs)(t);return Ce(v||t,(function(r,i){v&&(r=t[i=r]),rr(s,i,lr(r,e,n,i,t,a))})),s}function hr(t,e,n){var i=n.length;if(null==t)return!i;for(t=kt(t);i--;){var o=n[i],a=e[o],s=t[o];if(s===r&&!(o in t)||!a(s))return!1}return!0}function fr(t,e,n){if("function"!=typeof t)throw new Rt(i);return Oo((function(){t.apply(r,n)}),e)}function pr(t,e,n,r){var i=-1,o=Re,a=!0,s=t.length,u=[],c=e.length;if(!s)return u;n&&(e=Pe(e,Ye(n))),r?(o=xe,a=!1):e.length>=200&&(o=Je,a=!1,e=new Yn(e));t:for(;++i<s;){var l=t[i],h=null==n?l:n(l);if(l=r||0!==l?l:0,a&&h==h){for(var f=c;f--;)if(e[f]===h)continue t;u.push(l)}else o(e,h,r)||u.push(l)}return u}Bn.templateSettings={escape:X,evaluate:J,interpolate:Z,variable:"",imports:{_:Bn}},Bn.prototype=Wn.prototype,Bn.prototype.constructor=Bn,Hn.prototype=Kn(Wn.prototype),Hn.prototype.constructor=Hn,zn.prototype=Kn(Wn.prototype),zn.prototype.constructor=zn,Gn.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},Gn.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Gn.prototype.get=function(t){var e=this.__data__;if(xn){var n=e[t];return n===o?r:n}return Mt.call(e,t)?e[t]:r},Gn.prototype.has=function(t){var e=this.__data__;return xn?e[t]!==r:Mt.call(e,t)},Gn.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=xn&&e===r?o:e,this},Qn.prototype.clear=function(){this.__data__=[],this.size=0},Qn.prototype.delete=function(t){var e=this.__data__,n=ir(e,t);return!(n<0)&&(n==e.length-1?e.pop():Yt.call(e,n,1),--this.size,!0)},Qn.prototype.get=function(t){var e=this.__data__,n=ir(e,t);return n<0?r:e[n][1]},Qn.prototype.has=function(t){return ir(this.__data__,t)>-1},Qn.prototype.set=function(t,e){var n=this.__data__,r=ir(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},$n.prototype.clear=function(){this.size=0,this.__data__={hash:new Gn,map:new(kn||Qn),string:new Gn}},$n.prototype.delete=function(t){var e=ho(this,t).delete(t);return this.size-=e?1:0,e},$n.prototype.get=function(t){return ho(this,t).get(t)},$n.prototype.has=function(t){return ho(this,t).has(t)},$n.prototype.set=function(t,e){var n=ho(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},Yn.prototype.add=Yn.prototype.push=function(t){return this.__data__.set(t,o),this},Yn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.clear=function(){this.__data__=new Qn,this.size=0},Xn.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Xn.prototype.get=function(t){return this.__data__.get(t)},Xn.prototype.has=function(t){return this.__data__.has(t)},Xn.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Qn){var r=n.__data__;if(!kn||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new $n(r)}return n.set(t,e),this.size=n.size,this};var dr=Li(Ir),vr=Li(Tr,!0);function gr(t,e){var n=!0;return dr(t,(function(t,r,i){return n=!!e(t,r,i)})),n}function mr(t,e,n){for(var i=-1,o=t.length;++i<o;){var a=t[i],s=e(a);if(null!=s&&(u===r?s==s&&!ds(s):n(s,u)))var u=s,c=a}return c}function yr(t,e){var n=[];return dr(t,(function(t,r,i){e(t,r,i)&&n.push(t)})),n}function _r(t,e,n,r,i){var o=-1,a=t.length;for(n||(n=bo),i||(i=[]);++o<a;){var s=t[o];e>0&&n(s)?e>1?_r(s,e-1,n,r,i):De(i,s):r||(i[i.length]=s)}return i}var br=Mi(),wr=Mi(!0);function Ir(t,e){return t&&br(t,e,Fs)}function Tr(t,e){return t&&wr(t,e,Fs)}function Er(t,e){return Ne(e,(function(e){return rs(t[e])}))}function Sr(t,e){for(var n=0,i=(e=wi(e,t)).length;null!=t&&n<i;)t=t[Ko(e[n++])];return n&&n==i?t:r}function Cr(t,e,n){var r=e(t);return Ya(t)?r:De(r,n(t))}function kr(t){return null==t?t===r?"[object Undefined]":"[object Null]":se&&se in kt(t)?function(t){var e=Mt.call(t,se),n=t[se];try{t[se]=r;var i=!0}catch(t){}var o=Ut.call(t);i&&(e?t[se]=n:delete t[se]);return o}(t):function(t){return Ut.call(t)}(t)}function Ar(t,e){return t>e}function Nr(t,e){return null!=t&&Mt.call(t,e)}function Rr(t,e){return null!=t&&e in kt(t)}function xr(t,e,n){for(var i=n?xe:Re,o=t[0].length,a=t.length,s=a,u=at(a),c=1/0,l=[];s--;){var h=t[s];s&&e&&(h=Pe(h,Ye(e))),c=wn(h.length,c),u[s]=!n&&(e||o>=120&&h.length>=120)?new Yn(s&&h):r}h=t[0];var f=-1,p=u[0];t:for(;++f<o&&l.length<c;){var d=h[f],v=e?e(d):d;if(d=n||0!==d?d:0,!(p?Je(p,v):i(l,v,n))){for(s=a;--s;){var g=u[s];if(!(g?Je(g,v):i(t[s],v,n)))continue t}p&&p.push(v),l.push(d)}}return l}function Pr(t,e,n){var i=null==(t=Ro(t,e=wi(e,t)))?t:t[Ko(na(e))];return null==i?r:Ee(i,t,n)}function Dr(t){return ss(t)&&kr(t)==m}function Or(t,e,n,i,o){return t===e||(null==t||null==e||!ss(t)&&!ss(e)?t!=t&&e!=e:function(t,e,n,i,o,a){var s=Ya(t),u=Ya(e),c=s?y:mo(t),l=u?y:mo(e),h=(c=c==m?C:c)==C,f=(l=l==m?C:l)==C,p=c==l;if(p&&ts(t)){if(!ts(e))return!1;s=!0,h=!1}if(p&&!h)return a||(a=new Xn),s||vs(t)?ro(t,e,n,i,o,a):function(t,e,n,r,i,o,a){switch(n){case O:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case D:return!(t.byteLength!=e.byteLength||!o(new Ht(t),new Ht(e)));case _:case b:case S:return za(+t,+e);case w:return t.name==e.name&&t.message==e.message;case A:case R:return t==e+"";case E:var s=sn;case N:var u=1&r;if(s||(s=ln),t.size!=e.size&&!u)return!1;var c=a.get(t);if(c)return c==e;r|=2,a.set(t,e);var l=ro(s(t),s(e),r,i,o,a);return a.delete(t),l;case x:if(qn)return qn.call(t)==qn.call(e)}return!1}(t,e,c,n,i,o,a);if(!(1&n)){var d=h&&Mt.call(t,"__wrapped__"),v=f&&Mt.call(e,"__wrapped__");if(d||v){var g=d?t.value():t,I=v?e.value():e;return a||(a=new Xn),o(g,I,n,i,a)}}return!!p&&(a||(a=new Xn),function(t,e,n,i,o,a){var s=1&n,u=oo(t),c=u.length,l=oo(e).length;if(c!=l&&!s)return!1;var h=c;for(;h--;){var f=u[h];if(!(s?f in e:Mt.call(e,f)))return!1}var p=a.get(t),d=a.get(e);if(p&&d)return p==e&&d==t;var v=!0;a.set(t,e),a.set(e,t);var g=s;for(;++h<c;){var m=t[f=u[h]],y=e[f];if(i)var _=s?i(y,m,f,e,t,a):i(m,y,f,t,e,a);if(!(_===r?m===y||o(m,y,n,i,a):_)){v=!1;break}g||(g="constructor"==f)}if(v&&!g){var b=t.constructor,w=e.constructor;b==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof w&&w instanceof w||(v=!1)}return a.delete(t),a.delete(e),v}(t,e,n,i,o,a))}(t,e,n,i,Or,o))}function Lr(t,e,n,i){var o=n.length,a=o,s=!i;if(null==t)return!a;for(t=kt(t);o--;){var u=n[o];if(s&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<a;){var c=(u=n[o])[0],l=t[c],h=u[1];if(s&&u[2]){if(l===r&&!(c in t))return!1}else{var f=new Xn;if(i)var p=i(l,h,c,t,e,f);if(!(p===r?Or(h,l,3,i,f):p))return!1}}return!0}function Mr(t){return!(!as(t)||(e=t,jt&&jt in e))&&(rs(t)?Bt:mt).test(Wo(t));var e}function Fr(t){return"function"==typeof t?t:null==t?cu:"object"==typeof t?Ya(t)?Kr(t[0],t[1]):Br(t):yu(t)}function jr(t){if(!Co(t))return _n(t);var e=[];for(var n in kt(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Ur(t){if(!as(t))return function(t){var e=[];if(null!=t)for(var n in kt(t))e.push(n);return e}(t);var e=Co(t),n=[];for(var r in t)("constructor"!=r||!e&&Mt.call(t,r))&&n.push(r);return n}function qr(t,e){return t<e}function Vr(t,e){var n=-1,r=Ja(t)?at(t.length):[];return dr(t,(function(t,i,o){r[++n]=e(t,i,o)})),r}function Br(t){var e=fo(t);return 1==e.length&&e[0][2]?Ao(e[0][0],e[0][1]):function(n){return n===t||Lr(n,t,e)}}function Kr(t,e){return To(t)&&ko(e)?Ao(Ko(t),e):function(n){var i=Ps(n,t);return i===r&&i===e?Ds(n,t):Or(e,i,3)}}function Wr(t,e,n,i,o){t!==e&&br(e,(function(a,s){if(o||(o=new Xn),as(a))!function(t,e,n,i,o,a,s){var u=Po(t,n),c=Po(e,n),l=s.get(c);if(l)return void nr(t,n,l);var h=a?a(u,c,n+"",t,e,s):r,f=h===r;if(f){var p=Ya(c),d=!p&&ts(c),v=!p&&!d&&vs(c);h=c,p||d||v?Ya(u)?h=u:Za(u)?h=xi(u):d?(f=!1,h=Si(c,!0)):v?(f=!1,h=ki(c,!0)):h=[]:ls(c)||$a(c)?(h=u,$a(u)?h=Ts(u):as(u)&&!rs(u)||(h=_o(c))):f=!1}f&&(s.set(c,h),o(h,c,i,a,s),s.delete(c));nr(t,n,h)}(t,e,s,n,Wr,i,o);else{var u=i?i(Po(t,s),a,s+"",t,e,o):r;u===r&&(u=a),nr(t,s,u)}}),js)}function Hr(t,e){var n=t.length;if(n)return wo(e+=e<0?n:0,n)?t[e]:r}function zr(t,e,n){e=e.length?Pe(e,(function(t){return Ya(t)?function(e){return Sr(e,1===t.length?t[0]:t)}:t})):[cu];var r=-1;return e=Pe(e,Ye(lo())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Vr(t,(function(t,n,i){return{criteria:Pe(e,(function(e){return e(t)})),index:++r,value:t}})),(function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,a=i.length,s=n.length;for(;++r<a;){var u=Ai(i[r],o[r]);if(u)return r>=s?u:u*("desc"==n[r]?-1:1)}return t.index-e.index}(t,e,n)}))}function Gr(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var a=e[r],s=Sr(t,a);n(s,a)&&ei(o,wi(a,t),s)}return o}function Qr(t,e,n,r){var i=r?Ve:qe,o=-1,a=e.length,s=t;for(t===e&&(e=xi(e)),n&&(s=Pe(t,Ye(n)));++o<a;)for(var u=0,c=e[o],l=n?n(c):c;(u=i(s,l,u,r))>-1;)s!==t&&Yt.call(s,u,1),Yt.call(t,u,1);return t}function $r(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i=e[n];if(n==r||i!==o){var o=i;wo(i)?Yt.call(t,i,1):pi(t,i)}}return t}function Yr(t,e){return t+me(En()*(e-t+1))}function Xr(t,e){var n="";if(!t||e<1||e>p)return n;do{e%2&&(n+=t),(e=me(e/2))&&(t+=t)}while(e);return n}function Jr(t,e){return Lo(No(t,e,cu),t+"")}function Zr(t){return Zn(zs(t))}function ti(t,e){var n=zs(t);return jo(n,cr(e,0,n.length))}function ei(t,e,n,i){if(!as(t))return t;for(var o=-1,a=(e=wi(e,t)).length,s=a-1,u=t;null!=u&&++o<a;){var c=Ko(e[o]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return t;if(o!=s){var h=u[c];(l=i?i(h,c,u):r)===r&&(l=as(h)?h:wo(e[o+1])?[]:{})}rr(u,c,l),u=u[c]}return t}var ni=Pn?function(t,e){return Pn.set(t,e),t}:cu,ri=le?function(t,e){return le(t,"toString",{configurable:!0,enumerable:!1,value:au(e),writable:!0})}:cu;function ii(t){return jo(zs(t))}function oi(t,e,n){var r=-1,i=t.length;e<0&&(e=-e>i?0:i+e),(n=n>i?i:n)<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=at(i);++r<i;)o[r]=t[r+e];return o}function ai(t,e){var n;return dr(t,(function(t,r,i){return!(n=e(t,r,i))})),!!n}function si(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,a=t[o];null!==a&&!ds(a)&&(n?a<=e:a<e)?r=o+1:i=o}return i}return ui(t,e,cu,n)}function ui(t,e,n,i){var o=0,a=null==t?0:t.length;if(0===a)return 0;for(var s=(e=n(e))!=e,u=null===e,c=ds(e),l=e===r;o<a;){var h=me((o+a)/2),f=n(t[h]),p=f!==r,d=null===f,v=f==f,g=ds(f);if(s)var m=i||v;else m=l?v&&(i||p):u?v&&p&&(i||!d):c?v&&p&&!d&&(i||!g):!d&&!g&&(i?f<=e:f<e);m?o=h+1:a=h}return wn(a,4294967294)}function ci(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var a=t[n],s=e?e(a):a;if(!n||!za(s,u)){var u=s;o[i++]=0===a?0:a}}return o}function li(t){return"number"==typeof t?t:ds(t)?d:+t}function hi(t){if("string"==typeof t)return t;if(Ya(t))return Pe(t,hi)+"";if(ds(t))return Vn?Vn.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function fi(t,e,n){var r=-1,i=Re,o=t.length,a=!0,s=[],u=s;if(n)a=!1,i=xe;else if(o>=200){var c=e?null:Xi(t);if(c)return ln(c);a=!1,i=Je,u=new Yn}else u=e?[]:s;t:for(;++r<o;){var l=t[r],h=e?e(l):l;if(l=n||0!==l?l:0,a&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),s.push(l)}else i(u,h,n)||(u!==s&&u.push(h),s.push(l))}return s}function pi(t,e){return null==(t=Ro(t,e=wi(e,t)))||delete t[Ko(na(e))]}function di(t,e,n,r){return ei(t,e,n(Sr(t,e)),r)}function vi(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?oi(t,r?0:o,r?o+1:i):oi(t,r?o+1:0,r?i:o)}function gi(t,e){var n=t;return n instanceof zn&&(n=n.value()),Oe(e,(function(t,e){return e.func.apply(e.thisArg,De([t],e.args))}),n)}function mi(t,e,n){var r=t.length;if(r<2)return r?fi(t[0]):[];for(var i=-1,o=at(r);++i<r;)for(var a=t[i],s=-1;++s<r;)s!=i&&(o[i]=pr(o[i]||a,t[s],e,n));return fi(_r(o,1),e,n)}function yi(t,e,n){for(var i=-1,o=t.length,a=e.length,s={};++i<o;){var u=i<a?e[i]:r;n(s,t[i],u)}return s}function _i(t){return Za(t)?t:[]}function bi(t){return"function"==typeof t?t:cu}function wi(t,e){return Ya(t)?t:To(t,e)?[t]:Bo(Es(t))}var Ii=Jr;function Ti(t,e,n){var i=t.length;return n=n===r?i:n,!e&&n>=i?t:oi(t,e,n)}var Ei=he||function(t){return fe.clearTimeout(t)};function Si(t,e){if(e)return t.slice();var n=t.length,r=zt?zt(n):new t.constructor(n);return t.copy(r),r}function Ci(t){var e=new t.constructor(t.byteLength);return new Ht(e).set(new Ht(t)),e}function ki(t,e){var n=e?Ci(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Ai(t,e){if(t!==e){var n=t!==r,i=null===t,o=t==t,a=ds(t),s=e!==r,u=null===e,c=e==e,l=ds(e);if(!u&&!l&&!a&&t>e||a&&s&&c&&!u&&!l||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!l&&t<e||l&&n&&o&&!i&&!a||u&&n&&o||!s&&o||!c)return-1}return 0}function Ni(t,e,n,r){for(var i=-1,o=t.length,a=n.length,s=-1,u=e.length,c=bn(o-a,0),l=at(u+c),h=!r;++s<u;)l[s]=e[s];for(;++i<a;)(h||i<o)&&(l[n[i]]=t[i]);for(;c--;)l[s++]=t[i++];return l}function Ri(t,e,n,r){for(var i=-1,o=t.length,a=-1,s=n.length,u=-1,c=e.length,l=bn(o-s,0),h=at(l+c),f=!r;++i<l;)h[i]=t[i];for(var p=i;++u<c;)h[p+u]=e[u];for(;++a<s;)(f||i<o)&&(h[p+n[a]]=t[i++]);return h}function xi(t,e){var n=-1,r=t.length;for(e||(e=at(r));++n<r;)e[n]=t[n];return e}function Pi(t,e,n,i){var o=!n;n||(n={});for(var a=-1,s=e.length;++a<s;){var u=e[a],c=i?i(n[u],t[u],u,n,t):r;c===r&&(c=t[u]),o?sr(n,u,c):rr(n,u,c)}return n}function Di(t,e){return function(n,r){var i=Ya(n)?Se:or,o=e?e():{};return i(n,t,lo(r,2),o)}}function Oi(t){return Jr((function(e,n){var i=-1,o=n.length,a=o>1?n[o-1]:r,s=o>2?n[2]:r;for(a=t.length>3&&"function"==typeof a?(o--,a):r,s&&Io(n[0],n[1],s)&&(a=o<3?r:a,o=1),e=kt(e);++i<o;){var u=n[i];u&&t(e,u,i,a)}return e}))}function Li(t,e){return function(n,r){if(null==n)return n;if(!Ja(n))return t(n,r);for(var i=n.length,o=e?i:-1,a=kt(n);(e?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Mi(t){return function(e,n,r){for(var i=-1,o=kt(e),a=r(e),s=a.length;s--;){var u=a[t?s:++i];if(!1===n(o[u],u,o))break}return e}}function Fi(t){return function(e){var n=an(e=Es(e))?pn(e):r,i=n?n[0]:e.charAt(0),o=n?Ti(n,1).join(""):e.slice(1);return i[t]()+o}}function ji(t){return function(e){return Oe(ru($s(e).replace(Xt,"")),t,"")}}function Ui(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Kn(t.prototype),r=t.apply(n,e);return as(r)?r:n}}function qi(t){return function(e,n,i){var o=kt(e);if(!Ja(e)){var a=lo(n,3);e=Fs(e),n=function(t){return a(o[t],t,o)}}var s=t(e,n,i);return s>-1?o[a?e[s]:s]:r}}function Vi(t){return io((function(e){var n=e.length,o=n,a=Hn.prototype.thru;for(t&&e.reverse();o--;){var s=e[o];if("function"!=typeof s)throw new Rt(i);if(a&&!u&&"wrapper"==uo(s))var u=new Hn([],!0)}for(o=u?o:n;++o<n;){var c=uo(s=e[o]),l="wrapper"==c?so(s):r;u=l&&Eo(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?u[uo(l[0])].apply(u,l[3]):1==s.length&&Eo(s)?u[c]():u.thru(s)}return function(){var t=arguments,r=t[0];if(u&&1==t.length&&Ya(r))return u.plant(r).value();for(var i=0,o=n?e[i].apply(this,t):r;++i<n;)o=e[i].call(this,o);return o}}))}function Bi(t,e,n,i,o,a,s,u,c,h){var f=e&l,p=1&e,d=2&e,v=24&e,g=512&e,m=d?r:Ui(t);return function r(){for(var l=arguments.length,y=at(l),_=l;_--;)y[_]=arguments[_];if(v)var b=co(r),w=en(y,b);if(i&&(y=Ni(y,i,o,v)),a&&(y=Ri(y,a,s,v)),l-=w,v&&l<h){var I=cn(y,b);return $i(t,e,Bi,r.placeholder,n,y,I,u,c,h-l)}var T=p?n:this,E=d?T[t]:t;return l=y.length,u?y=xo(y,u):g&&l>1&&y.reverse(),f&&c<l&&(y.length=c),this&&this!==fe&&this instanceof r&&(E=m||Ui(E)),E.apply(T,y)}}function Ki(t,e){return function(n,r){return function(t,e,n,r){return Ir(t,(function(t,i,o){e(r,n(t),i,o)})),r}(n,t,e(r),{})}}function Wi(t,e){return function(n,i){var o;if(n===r&&i===r)return e;if(n!==r&&(o=n),i!==r){if(o===r)return i;"string"==typeof n||"string"==typeof i?(n=hi(n),i=hi(i)):(n=li(n),i=li(i)),o=t(n,i)}return o}}function Hi(t){return io((function(e){return e=Pe(e,Ye(lo())),Jr((function(n){var r=this;return t(e,(function(t){return Ee(t,r,n)}))}))}))}function zi(t,e){var n=(e=e===r?" ":hi(e)).length;if(n<2)return n?Xr(e,t):e;var i=Xr(e,ge(t/fn(e)));return an(e)?Ti(pn(i),0,t).join(""):i.slice(0,t)}function Gi(t){return function(e,n,i){return i&&"number"!=typeof i&&Io(e,n,i)&&(n=i=r),e=_s(e),n===r?(n=e,e=0):n=_s(n),function(t,e,n,r){for(var i=-1,o=bn(ge((e-t)/(n||1)),0),a=at(o);o--;)a[r?o:++i]=t,t+=n;return a}(e,n,i=i===r?e<n?1:-1:_s(i),t)}}function Qi(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=Is(e),n=Is(n)),t(e,n)}}function $i(t,e,n,i,o,a,s,l,h,f){var p=8&e;e|=p?u:c,4&(e&=~(p?c:u))||(e&=-4);var d=[t,e,o,p?a:r,p?s:r,p?r:a,p?r:s,l,h,f],v=n.apply(r,d);return Eo(t)&&Do(v,d),v.placeholder=i,Mo(v,t,e)}function Yi(t){var e=Ct[t];return function(t,n){if(t=Is(t),(n=null==n?0:wn(bs(n),292))&&mn(t)){var r=(Es(t)+"e").split("e");return+((r=(Es(e(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return e(t)}}var Xi=Nn&&1/ln(new Nn([,-0]))[1]==f?function(t){return new Nn(t)}:du;function Ji(t){return function(e){var n=mo(e);return n==E?sn(e):n==N?hn(e):function(t,e){return Pe(e,(function(e){return[e,t[e]]}))}(e,t(e))}}function Zi(t,e,n,o,f,p,d,v){var g=2&e;if(!g&&"function"!=typeof t)throw new Rt(i);var m=o?o.length:0;if(m||(e&=-97,o=f=r),d=d===r?d:bn(bs(d),0),v=v===r?v:bs(v),m-=f?f.length:0,e&c){var y=o,_=f;o=f=r}var b=g?r:so(t),w=[t,e,n,o,f,y,_,p,d,v];if(b&&function(t,e){var n=t[1],r=e[1],i=n|r,o=i<131,s=r==l&&8==n||r==l&&n==h&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==n;if(!o&&!s)return t;1&r&&(t[2]=e[2],i|=1&n?0:4);var u=e[3];if(u){var c=t[3];t[3]=c?Ni(c,u,e[4]):u,t[4]=c?cn(t[3],a):e[4]}(u=e[5])&&(c=t[5],t[5]=c?Ri(c,u,e[6]):u,t[6]=c?cn(t[5],a):e[6]);(u=e[7])&&(t[7]=u);r&l&&(t[8]=null==t[8]?e[8]:wn(t[8],e[8]));null==t[9]&&(t[9]=e[9]);t[0]=e[0],t[1]=i}(w,b),t=w[0],e=w[1],n=w[2],o=w[3],f=w[4],!(v=w[9]=w[9]===r?g?0:t.length:bn(w[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)I=8==e||e==s?function(t,e,n){var i=Ui(t);return function o(){for(var a=arguments.length,s=at(a),u=a,c=co(o);u--;)s[u]=arguments[u];var l=a<3&&s[0]!==c&&s[a-1]!==c?[]:cn(s,c);return(a-=l.length)<n?$i(t,e,Bi,o.placeholder,r,s,l,r,r,n-a):Ee(this&&this!==fe&&this instanceof o?i:t,this,s)}}(t,e,v):e!=u&&33!=e||f.length?Bi.apply(r,w):function(t,e,n,r){var i=1&e,o=Ui(t);return function e(){for(var a=-1,s=arguments.length,u=-1,c=r.length,l=at(c+s),h=this&&this!==fe&&this instanceof e?o:t;++u<c;)l[u]=r[u];for(;s--;)l[u++]=arguments[++a];return Ee(h,i?n:this,l)}}(t,e,n,o);else var I=function(t,e,n){var r=1&e,i=Ui(t);return function e(){return(this&&this!==fe&&this instanceof e?i:t).apply(r?n:this,arguments)}}(t,e,n);return Mo((b?ni:Do)(I,w),t,e)}function to(t,e,n,i){return t===r||za(t,Dt[n])&&!Mt.call(i,n)?e:t}function eo(t,e,n,i,o,a){return as(t)&&as(e)&&(a.set(e,t),Wr(t,e,r,eo,a),a.delete(e)),t}function no(t){return ls(t)?r:t}function ro(t,e,n,i,o,a){var s=1&n,u=t.length,c=e.length;if(u!=c&&!(s&&c>u))return!1;var l=a.get(t),h=a.get(e);if(l&&h)return l==e&&h==t;var f=-1,p=!0,d=2&n?new Yn:r;for(a.set(t,e),a.set(e,t);++f<u;){var v=t[f],g=e[f];if(i)var m=s?i(g,v,f,e,t,a):i(v,g,f,t,e,a);if(m!==r){if(m)continue;p=!1;break}if(d){if(!Me(e,(function(t,e){if(!Je(d,e)&&(v===t||o(v,t,n,i,a)))return d.push(e)}))){p=!1;break}}else if(v!==g&&!o(v,g,n,i,a)){p=!1;break}}return a.delete(t),a.delete(e),p}function io(t){return Lo(No(t,r,Xo),t+"")}function oo(t){return Cr(t,Fs,vo)}function ao(t){return Cr(t,js,go)}var so=Pn?function(t){return Pn.get(t)}:du;function uo(t){for(var e=t.name+"",n=Dn[e],r=Mt.call(Dn,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function co(t){return(Mt.call(Bn,"placeholder")?Bn:t).placeholder}function lo(){var t=Bn.iteratee||lu;return t=t===lu?Fr:t,arguments.length?t(arguments[0],arguments[1]):t}function ho(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map}function fo(t){for(var e=Fs(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,ko(i)]}return e}function po(t,e){var n=function(t,e){return null==t?r:t[e]}(t,e);return Mr(n)?n:r}var vo=Fe?function(t){return null==t?[]:(t=kt(t),Ne(Fe(t),(function(e){return $t.call(t,e)})))}:wu,go=Fe?function(t){for(var e=[];t;)De(e,vo(t)),t=Gt(t);return e}:wu,mo=kr;function yo(t,e,n){for(var r=-1,i=(e=wi(e,t)).length,o=!1;++r<i;){var a=Ko(e[r]);if(!(o=null!=t&&n(t,a)))break;t=t[a]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&os(i)&&wo(a,i)&&(Ya(t)||$a(t))}function _o(t){return"function"!=typeof t.constructor||Co(t)?{}:Kn(Gt(t))}function bo(t){return Ya(t)||$a(t)||!!(Zt&&t&&t[Zt])}function wo(t,e){var n=typeof t;return!!(e=null==e?p:e)&&("number"==n||"symbol"!=n&&_t.test(t))&&t>-1&&t%1==0&&t<e}function Io(t,e,n){if(!as(n))return!1;var r=typeof e;return!!("number"==r?Ja(n)&&wo(e,n.length):"string"==r&&e in n)&&za(n[e],t)}function To(t,e){if(Ya(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!ds(t))||(et.test(t)||!tt.test(t)||null!=e&&t in kt(e))}function Eo(t){var e=uo(t),n=Bn[e];if("function"!=typeof n||!(e in zn.prototype))return!1;if(t===n)return!0;var r=so(n);return!!r&&t===r[0]}(Cn&&mo(new Cn(new ArrayBuffer(1)))!=O||kn&&mo(new kn)!=E||An&&mo(An.resolve())!=k||Nn&&mo(new Nn)!=N||Rn&&mo(new Rn)!=P)&&(mo=function(t){var e=kr(t),n=e==C?t.constructor:r,i=n?Wo(n):"";if(i)switch(i){case On:return O;case Ln:return E;case Mn:return k;case Fn:return N;case jn:return P}return e});var So=Ot?rs:Iu;function Co(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Dt)}function ko(t){return t==t&&!as(t)}function Ao(t,e){return function(n){return null!=n&&(n[t]===e&&(e!==r||t in kt(n)))}}function No(t,e,n){return e=bn(e===r?t.length-1:e,0),function(){for(var r=arguments,i=-1,o=bn(r.length-e,0),a=at(o);++i<o;)a[i]=r[e+i];i=-1;for(var s=at(e+1);++i<e;)s[i]=r[i];return s[e]=n(a),Ee(t,this,s)}}function Ro(t,e){return e.length<2?t:Sr(t,oi(e,0,-1))}function xo(t,e){for(var n=t.length,i=wn(e.length,n),o=xi(t);i--;){var a=e[i];t[i]=wo(a,n)?o[a]:r}return t}function Po(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Do=Fo(ni),Oo=de||function(t,e){return fe.setTimeout(t,e)},Lo=Fo(ri);function Mo(t,e,n){var r=e+"";return Lo(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ce(g,(function(n){var r="_."+n[0];e&n[1]&&!Re(t,r)&&t.push(r)})),t.sort()}(function(t){var e=t.match(ut);return e?e[1].split(ct):[]}(r),n)))}function Fo(t){var e=0,n=0;return function(){var i=In(),o=16-(i-n);if(n=i,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(r,arguments)}}function jo(t,e){var n=-1,i=t.length,o=i-1;for(e=e===r?i:e;++n<e;){var a=Yr(n,o),s=t[a];t[a]=t[n],t[n]=s}return t.length=e,t}var Uo,qo,Vo,Bo=(Uo=function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(nt,(function(t,n,r,i){e.push(r?i.replace(ft,"$1"):n||t)})),e},qo=qa(Uo,(function(t){return 500===Vo.size&&Vo.clear(),t})),Vo=qo.cache,qo);function Ko(t){if("string"==typeof t||ds(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Wo(t){if(null!=t){try{return Lt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ho(t){if(t instanceof zn)return t.clone();var e=new Hn(t.__wrapped__,t.__chain__);return e.__actions__=xi(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var zo=Jr((function(t,e){return Za(t)?pr(t,_r(e,1,Za,!0)):[]})),Go=Jr((function(t,e){var n=na(e);return Za(n)&&(n=r),Za(t)?pr(t,_r(e,1,Za,!0),lo(n,2)):[]})),Qo=Jr((function(t,e){var n=na(e);return Za(n)&&(n=r),Za(t)?pr(t,_r(e,1,Za,!0),r,n):[]}));function $o(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bs(n);return i<0&&(i=bn(r+i,0)),Ue(t,lo(e,3),i)}function Yo(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i-1;return n!==r&&(o=bs(n),o=n<0?bn(i+o,0):wn(o,i-1)),Ue(t,lo(e,3),o,!0)}function Xo(t){return(null==t?0:t.length)?_r(t,1):[]}function Jo(t){return t&&t.length?t[0]:r}var Zo=Jr((function(t){var e=Pe(t,_i);return e.length&&e[0]===t[0]?xr(e):[]})),ta=Jr((function(t){var e=na(t),n=Pe(t,_i);return e===na(n)?e=r:n.pop(),n.length&&n[0]===t[0]?xr(n,lo(e,2)):[]})),ea=Jr((function(t){var e=na(t),n=Pe(t,_i);return(e="function"==typeof e?e:r)&&n.pop(),n.length&&n[0]===t[0]?xr(n,r,e):[]}));function na(t){var e=null==t?0:t.length;return e?t[e-1]:r}var ra=Jr(ia);function ia(t,e){return t&&t.length&&e&&e.length?Qr(t,e):t}var oa=io((function(t,e){var n=null==t?0:t.length,r=ur(t,e);return $r(t,Pe(e,(function(t){return wo(t,n)?+t:t})).sort(Ai)),r}));function aa(t){return null==t?t:Sn.call(t)}var sa=Jr((function(t){return fi(_r(t,1,Za,!0))})),ua=Jr((function(t){var e=na(t);return Za(e)&&(e=r),fi(_r(t,1,Za,!0),lo(e,2))})),ca=Jr((function(t){var e=na(t);return e="function"==typeof e?e:r,fi(_r(t,1,Za,!0),r,e)}));function la(t){if(!t||!t.length)return[];var e=0;return t=Ne(t,(function(t){if(Za(t))return e=bn(t.length,e),!0})),Qe(e,(function(e){return Pe(t,We(e))}))}function ha(t,e){if(!t||!t.length)return[];var n=la(t);return null==e?n:Pe(n,(function(t){return Ee(e,r,t)}))}var fa=Jr((function(t,e){return Za(t)?pr(t,e):[]})),pa=Jr((function(t){return mi(Ne(t,Za))})),da=Jr((function(t){var e=na(t);return Za(e)&&(e=r),mi(Ne(t,Za),lo(e,2))})),va=Jr((function(t){var e=na(t);return e="function"==typeof e?e:r,mi(Ne(t,Za),r,e)})),ga=Jr(la);var ma=Jr((function(t){var e=t.length,n=e>1?t[e-1]:r;return n="function"==typeof n?(t.pop(),n):r,ha(t,n)}));function ya(t){var e=Bn(t);return e.__chain__=!0,e}function _a(t,e){return e(t)}var ba=io((function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,o=function(e){return ur(e,t)};return!(e>1||this.__actions__.length)&&i instanceof zn&&wo(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:_a,args:[o],thisArg:r}),new Hn(i,this.__chain__).thru((function(t){return e&&!t.length&&t.push(r),t}))):this.thru(o)}));var wa=Di((function(t,e,n){Mt.call(t,n)?++t[n]:sr(t,n,1)}));var Ia=qi($o),Ta=qi(Yo);function Ea(t,e){return(Ya(t)?Ce:dr)(t,lo(e,3))}function Sa(t,e){return(Ya(t)?ke:vr)(t,lo(e,3))}var Ca=Di((function(t,e,n){Mt.call(t,n)?t[n].push(e):sr(t,n,[e])}));var ka=Jr((function(t,e,n){var r=-1,i="function"==typeof e,o=Ja(t)?at(t.length):[];return dr(t,(function(t){o[++r]=i?Ee(e,t,n):Pr(t,e,n)})),o})),Aa=Di((function(t,e,n){sr(t,n,e)}));function Na(t,e){return(Ya(t)?Pe:Vr)(t,lo(e,3))}var Ra=Di((function(t,e,n){t[n?0:1].push(e)}),(function(){return[[],[]]}));var xa=Jr((function(t,e){if(null==t)return[];var n=e.length;return n>1&&Io(t,e[0],e[1])?e=[]:n>2&&Io(e[0],e[1],e[2])&&(e=[e[0]]),zr(t,_r(e,1),[])})),Pa=pe||function(){return fe.Date.now()};function Da(t,e,n){return e=n?r:e,e=t&&null==e?t.length:e,Zi(t,l,r,r,r,r,e)}function Oa(t,e){var n;if("function"!=typeof e)throw new Rt(i);return t=bs(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=r),n}}var La=Jr((function(t,e,n){var r=1;if(n.length){var i=cn(n,co(La));r|=u}return Zi(t,r,e,n,i)})),Ma=Jr((function(t,e,n){var r=3;if(n.length){var i=cn(n,co(Ma));r|=u}return Zi(e,r,t,n,i)}));function Fa(t,e,n){var o,a,s,u,c,l,h=0,f=!1,p=!1,d=!0;if("function"!=typeof t)throw new Rt(i);function v(e){var n=o,i=a;return o=a=r,h=e,u=t.apply(i,n)}function g(t){return h=t,c=Oo(y,e),f?v(t):u}function m(t){var n=t-l;return l===r||n>=e||n<0||p&&t-h>=s}function y(){var t=Pa();if(m(t))return _(t);c=Oo(y,function(t){var n=e-(t-l);return p?wn(n,s-(t-h)):n}(t))}function _(t){return c=r,d&&o?v(t):(o=a=r,u)}function b(){var t=Pa(),n=m(t);if(o=arguments,a=this,l=t,n){if(c===r)return g(l);if(p)return Ei(c),c=Oo(y,e),v(l)}return c===r&&(c=Oo(y,e)),u}return e=Is(e)||0,as(n)&&(f=!!n.leading,s=(p="maxWait"in n)?bn(Is(n.maxWait)||0,e):s,d="trailing"in n?!!n.trailing:d),b.cancel=function(){c!==r&&Ei(c),h=0,o=l=a=c=r},b.flush=function(){return c===r?u:_(Pa())},b}var ja=Jr((function(t,e){return fr(t,1,e)})),Ua=Jr((function(t,e,n){return fr(t,Is(e)||0,n)}));function qa(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Rt(i);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(qa.Cache||$n),n}function Va(t){if("function"!=typeof t)throw new Rt(i);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}qa.Cache=$n;var Ba=Ii((function(t,e){var n=(e=1==e.length&&Ya(e[0])?Pe(e[0],Ye(lo())):Pe(_r(e,1),Ye(lo()))).length;return Jr((function(r){for(var i=-1,o=wn(r.length,n);++i<o;)r[i]=e[i].call(this,r[i]);return Ee(t,this,r)}))})),Ka=Jr((function(t,e){var n=cn(e,co(Ka));return Zi(t,u,r,e,n)})),Wa=Jr((function(t,e){var n=cn(e,co(Wa));return Zi(t,c,r,e,n)})),Ha=io((function(t,e){return Zi(t,h,r,r,r,e)}));function za(t,e){return t===e||t!=t&&e!=e}var Ga=Qi(Ar),Qa=Qi((function(t,e){return t>=e})),$a=Dr(function(){return arguments}())?Dr:function(t){return ss(t)&&Mt.call(t,"callee")&&!$t.call(t,"callee")},Ya=at.isArray,Xa=ye?Ye(ye):function(t){return ss(t)&&kr(t)==D};function Ja(t){return null!=t&&os(t.length)&&!rs(t)}function Za(t){return ss(t)&&Ja(t)}var ts=He||Iu,es=_e?Ye(_e):function(t){return ss(t)&&kr(t)==b};function ns(t){if(!ss(t))return!1;var e=kr(t);return e==w||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ls(t)}function rs(t){if(!as(t))return!1;var e=kr(t);return e==I||e==T||"[object AsyncFunction]"==e||"[object Proxy]"==e}function is(t){return"number"==typeof t&&t==bs(t)}function os(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=p}function as(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ss(t){return null!=t&&"object"==typeof t}var us=be?Ye(be):function(t){return ss(t)&&mo(t)==E};function cs(t){return"number"==typeof t||ss(t)&&kr(t)==S}function ls(t){if(!ss(t)||kr(t)!=C)return!1;var e=Gt(t);if(null===e)return!0;var n=Mt.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&Lt.call(n)==qt}var hs=we?Ye(we):function(t){return ss(t)&&kr(t)==A};var fs=Ie?Ye(Ie):function(t){return ss(t)&&mo(t)==N};function ps(t){return"string"==typeof t||!Ya(t)&&ss(t)&&kr(t)==R}function ds(t){return"symbol"==typeof t||ss(t)&&kr(t)==x}var vs=Te?Ye(Te):function(t){return ss(t)&&os(t.length)&&!!oe[kr(t)]};var gs=Qi(qr),ms=Qi((function(t,e){return t<=e}));function ys(t){if(!t)return[];if(Ja(t))return ps(t)?pn(t):xi(t);if(ee&&t[ee])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[ee]());var e=mo(t);return(e==E?sn:e==N?ln:zs)(t)}function _s(t){return t?(t=Is(t))===f||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function bs(t){var e=_s(t),n=e%1;return e==e?n?e-n:e:0}function ws(t){return t?cr(bs(t),0,v):0}function Is(t){if("number"==typeof t)return t;if(ds(t))return d;if(as(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=as(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=$e(t);var n=gt.test(t);return n||yt.test(t)?ce(t.slice(2),n?2:8):vt.test(t)?d:+t}function Ts(t){return Pi(t,js(t))}function Es(t){return null==t?"":hi(t)}var Ss=Oi((function(t,e){if(Co(e)||Ja(e))Pi(e,Fs(e),t);else for(var n in e)Mt.call(e,n)&&rr(t,n,e[n])})),Cs=Oi((function(t,e){Pi(e,js(e),t)})),ks=Oi((function(t,e,n,r){Pi(e,js(e),t,r)})),As=Oi((function(t,e,n,r){Pi(e,Fs(e),t,r)})),Ns=io(ur);var Rs=Jr((function(t,e){t=kt(t);var n=-1,i=e.length,o=i>2?e[2]:r;for(o&&Io(e[0],e[1],o)&&(i=1);++n<i;)for(var a=e[n],s=js(a),u=-1,c=s.length;++u<c;){var l=s[u],h=t[l];(h===r||za(h,Dt[l])&&!Mt.call(t,l))&&(t[l]=a[l])}return t})),xs=Jr((function(t){return t.push(r,eo),Ee(qs,r,t)}));function Ps(t,e,n){var i=null==t?r:Sr(t,e);return i===r?n:i}function Ds(t,e){return null!=t&&yo(t,e,Rr)}var Os=Ki((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ut.call(e)),t[e]=n}),au(cu)),Ls=Ki((function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=Ut.call(e)),Mt.call(t,e)?t[e].push(n):t[e]=[n]}),lo),Ms=Jr(Pr);function Fs(t){return Ja(t)?Jn(t):jr(t)}function js(t){return Ja(t)?Jn(t,!0):Ur(t)}var Us=Oi((function(t,e,n){Wr(t,e,n)})),qs=Oi((function(t,e,n,r){Wr(t,e,n,r)})),Vs=io((function(t,e){var n={};if(null==t)return n;var r=!1;e=Pe(e,(function(e){return e=wi(e,t),r||(r=e.length>1),e})),Pi(t,ao(t),n),r&&(n=lr(n,7,no));for(var i=e.length;i--;)pi(n,e[i]);return n}));var Bs=io((function(t,e){return null==t?{}:function(t,e){return Gr(t,e,(function(e,n){return Ds(t,n)}))}(t,e)}));function Ks(t,e){if(null==t)return{};var n=Pe(ao(t),(function(t){return[t]}));return e=lo(e),Gr(t,n,(function(t,n){return e(t,n[0])}))}var Ws=Ji(Fs),Hs=Ji(js);function zs(t){return null==t?[]:Xe(t,Fs(t))}var Gs=ji((function(t,e,n){return e=e.toLowerCase(),t+(n?Qs(e):e)}));function Qs(t){return nu(Es(t).toLowerCase())}function $s(t){return(t=Es(t))&&t.replace(bt,nn).replace(Jt,"")}var Ys=ji((function(t,e,n){return t+(n?"-":"")+e.toLowerCase()})),Xs=ji((function(t,e,n){return t+(n?" ":"")+e.toLowerCase()})),Js=Fi("toLowerCase");var Zs=ji((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var tu=ji((function(t,e,n){return t+(n?" ":"")+nu(e)}));var eu=ji((function(t,e,n){return t+(n?" ":"")+e.toUpperCase()})),nu=Fi("toUpperCase");function ru(t,e,n){return t=Es(t),(e=n?r:e)===r?function(t){return ne.test(t)}(t)?function(t){return t.match(te)||[]}(t):function(t){return t.match(lt)||[]}(t):t.match(e)||[]}var iu=Jr((function(t,e){try{return Ee(t,r,e)}catch(t){return ns(t)?t:new Et(t)}})),ou=io((function(t,e){return Ce(e,(function(e){e=Ko(e),sr(t,e,La(t[e],t))})),t}));function au(t){return function(){return t}}var su=Vi(),uu=Vi(!0);function cu(t){return t}function lu(t){return Fr("function"==typeof t?t:lr(t,1))}var hu=Jr((function(t,e){return function(n){return Pr(n,t,e)}})),fu=Jr((function(t,e){return function(n){return Pr(t,n,e)}}));function pu(t,e,n){var r=Fs(e),i=Er(e,r);null!=n||as(e)&&(i.length||!r.length)||(n=e,e=t,t=this,i=Er(e,Fs(e)));var o=!(as(n)&&"chain"in n&&!n.chain),a=rs(t);return Ce(i,(function(n){var r=e[n];t[n]=r,a&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__),i=n.__actions__=xi(this.__actions__);return i.push({func:r,args:arguments,thisArg:t}),n.__chain__=e,n}return r.apply(t,De([this.value()],arguments))})})),t}function du(){}var vu=Hi(Pe),gu=Hi(Ae),mu=Hi(Me);function yu(t){return To(t)?We(Ko(t)):function(t){return function(e){return Sr(e,t)}}(t)}var _u=Gi(),bu=Gi(!0);function wu(){return[]}function Iu(){return!1}var Tu=Wi((function(t,e){return t+e}),0),Eu=Yi("ceil"),Su=Wi((function(t,e){return t/e}),1),Cu=Yi("floor");var ku,Au=Wi((function(t,e){return t*e}),1),Nu=Yi("round"),Ru=Wi((function(t,e){return t-e}),0);return Bn.after=function(t,e){if("function"!=typeof e)throw new Rt(i);return t=bs(t),function(){if(--t<1)return e.apply(this,arguments)}},Bn.ary=Da,Bn.assign=Ss,Bn.assignIn=Cs,Bn.assignInWith=ks,Bn.assignWith=As,Bn.at=Ns,Bn.before=Oa,Bn.bind=La,Bn.bindAll=ou,Bn.bindKey=Ma,Bn.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Ya(t)?t:[t]},Bn.chain=ya,Bn.chunk=function(t,e,n){e=(n?Io(t,e,n):e===r)?1:bn(bs(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var o=0,a=0,s=at(ge(i/e));o<i;)s[a++]=oi(t,o,o+=e);return s},Bn.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},Bn.concat=function(){var t=arguments.length;if(!t)return[];for(var e=at(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return De(Ya(n)?xi(n):[n],_r(e,1))},Bn.cond=function(t){var e=null==t?0:t.length,n=lo();return t=e?Pe(t,(function(t){if("function"!=typeof t[1])throw new Rt(i);return[n(t[0]),t[1]]})):[],Jr((function(n){for(var r=-1;++r<e;){var i=t[r];if(Ee(i[0],this,n))return Ee(i[1],this,n)}}))},Bn.conforms=function(t){return function(t){var e=Fs(t);return function(n){return hr(n,t,e)}}(lr(t,1))},Bn.constant=au,Bn.countBy=wa,Bn.create=function(t,e){var n=Kn(t);return null==e?n:ar(n,e)},Bn.curry=function t(e,n,i){var o=Zi(e,8,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Bn.curryRight=function t(e,n,i){var o=Zi(e,s,r,r,r,r,r,n=i?r:n);return o.placeholder=t.placeholder,o},Bn.debounce=Fa,Bn.defaults=Rs,Bn.defaultsDeep=xs,Bn.defer=ja,Bn.delay=Ua,Bn.difference=zo,Bn.differenceBy=Go,Bn.differenceWith=Qo,Bn.drop=function(t,e,n){var i=null==t?0:t.length;return i?oi(t,(e=n||e===r?1:bs(e))<0?0:e,i):[]},Bn.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?oi(t,0,(e=i-(e=n||e===r?1:bs(e)))<0?0:e):[]},Bn.dropRightWhile=function(t,e){return t&&t.length?vi(t,lo(e,3),!0,!0):[]},Bn.dropWhile=function(t,e){return t&&t.length?vi(t,lo(e,3),!0):[]},Bn.fill=function(t,e,n,i){var o=null==t?0:t.length;return o?(n&&"number"!=typeof n&&Io(t,e,n)&&(n=0,i=o),function(t,e,n,i){var o=t.length;for((n=bs(n))<0&&(n=-n>o?0:o+n),(i=i===r||i>o?o:bs(i))<0&&(i+=o),i=n>i?0:ws(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},Bn.filter=function(t,e){return(Ya(t)?Ne:yr)(t,lo(e,3))},Bn.flatMap=function(t,e){return _r(Na(t,e),1)},Bn.flatMapDeep=function(t,e){return _r(Na(t,e),f)},Bn.flatMapDepth=function(t,e,n){return n=n===r?1:bs(n),_r(Na(t,e),n)},Bn.flatten=Xo,Bn.flattenDeep=function(t){return(null==t?0:t.length)?_r(t,f):[]},Bn.flattenDepth=function(t,e){return(null==t?0:t.length)?_r(t,e=e===r?1:bs(e)):[]},Bn.flip=function(t){return Zi(t,512)},Bn.flow=su,Bn.flowRight=uu,Bn.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},Bn.functions=function(t){return null==t?[]:Er(t,Fs(t))},Bn.functionsIn=function(t){return null==t?[]:Er(t,js(t))},Bn.groupBy=Ca,Bn.initial=function(t){return(null==t?0:t.length)?oi(t,0,-1):[]},Bn.intersection=Zo,Bn.intersectionBy=ta,Bn.intersectionWith=ea,Bn.invert=Os,Bn.invertBy=Ls,Bn.invokeMap=ka,Bn.iteratee=lu,Bn.keyBy=Aa,Bn.keys=Fs,Bn.keysIn=js,Bn.map=Na,Bn.mapKeys=function(t,e){var n={};return e=lo(e,3),Ir(t,(function(t,r,i){sr(n,e(t,r,i),t)})),n},Bn.mapValues=function(t,e){var n={};return e=lo(e,3),Ir(t,(function(t,r,i){sr(n,r,e(t,r,i))})),n},Bn.matches=function(t){return Br(lr(t,1))},Bn.matchesProperty=function(t,e){return Kr(t,lr(e,1))},Bn.memoize=qa,Bn.merge=Us,Bn.mergeWith=qs,Bn.method=hu,Bn.methodOf=fu,Bn.mixin=pu,Bn.negate=Va,Bn.nthArg=function(t){return t=bs(t),Jr((function(e){return Hr(e,t)}))},Bn.omit=Vs,Bn.omitBy=function(t,e){return Ks(t,Va(lo(e)))},Bn.once=function(t){return Oa(2,t)},Bn.orderBy=function(t,e,n,i){return null==t?[]:(Ya(e)||(e=null==e?[]:[e]),Ya(n=i?r:n)||(n=null==n?[]:[n]),zr(t,e,n))},Bn.over=vu,Bn.overArgs=Ba,Bn.overEvery=gu,Bn.overSome=mu,Bn.partial=Ka,Bn.partialRight=Wa,Bn.partition=Ra,Bn.pick=Bs,Bn.pickBy=Ks,Bn.property=yu,Bn.propertyOf=function(t){return function(e){return null==t?r:Sr(t,e)}},Bn.pull=ra,Bn.pullAll=ia,Bn.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?Qr(t,e,lo(n,2)):t},Bn.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?Qr(t,e,r,n):t},Bn.pullAt=oa,Bn.range=_u,Bn.rangeRight=bu,Bn.rearg=Ha,Bn.reject=function(t,e){return(Ya(t)?Ne:yr)(t,Va(lo(e,3)))},Bn.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=lo(e,3);++r<o;){var a=t[r];e(a,r,t)&&(n.push(a),i.push(r))}return $r(t,i),n},Bn.rest=function(t,e){if("function"!=typeof t)throw new Rt(i);return Jr(t,e=e===r?e:bs(e))},Bn.reverse=aa,Bn.sampleSize=function(t,e,n){return e=(n?Io(t,e,n):e===r)?1:bs(e),(Ya(t)?tr:ti)(t,e)},Bn.set=function(t,e,n){return null==t?t:ei(t,e,n)},Bn.setWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:ei(t,e,n,i)},Bn.shuffle=function(t){return(Ya(t)?er:ii)(t)},Bn.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Io(t,e,n)?(e=0,n=i):(e=null==e?0:bs(e),n=n===r?i:bs(n)),oi(t,e,n)):[]},Bn.sortBy=xa,Bn.sortedUniq=function(t){return t&&t.length?ci(t):[]},Bn.sortedUniqBy=function(t,e){return t&&t.length?ci(t,lo(e,2)):[]},Bn.split=function(t,e,n){return n&&"number"!=typeof n&&Io(t,e,n)&&(e=n=r),(n=n===r?v:n>>>0)?(t=Es(t))&&("string"==typeof e||null!=e&&!hs(e))&&!(e=hi(e))&&an(t)?Ti(pn(t),0,n):t.split(e,n):[]},Bn.spread=function(t,e){if("function"!=typeof t)throw new Rt(i);return e=null==e?0:bn(bs(e),0),Jr((function(n){var r=n[e],i=Ti(n,0,e);return r&&De(i,r),Ee(t,this,i)}))},Bn.tail=function(t){var e=null==t?0:t.length;return e?oi(t,1,e):[]},Bn.take=function(t,e,n){return t&&t.length?oi(t,0,(e=n||e===r?1:bs(e))<0?0:e):[]},Bn.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?oi(t,(e=i-(e=n||e===r?1:bs(e)))<0?0:e,i):[]},Bn.takeRightWhile=function(t,e){return t&&t.length?vi(t,lo(e,3),!1,!0):[]},Bn.takeWhile=function(t,e){return t&&t.length?vi(t,lo(e,3)):[]},Bn.tap=function(t,e){return e(t),t},Bn.throttle=function(t,e,n){var r=!0,o=!0;if("function"!=typeof t)throw new Rt(i);return as(n)&&(r="leading"in n?!!n.leading:r,o="trailing"in n?!!n.trailing:o),Fa(t,e,{leading:r,maxWait:e,trailing:o})},Bn.thru=_a,Bn.toArray=ys,Bn.toPairs=Ws,Bn.toPairsIn=Hs,Bn.toPath=function(t){return Ya(t)?Pe(t,Ko):ds(t)?[t]:xi(Bo(Es(t)))},Bn.toPlainObject=Ts,Bn.transform=function(t,e,n){var r=Ya(t),i=r||ts(t)||vs(t);if(e=lo(e,4),null==n){var o=t&&t.constructor;n=i?r?new o:[]:as(t)&&rs(o)?Kn(Gt(t)):{}}return(i?Ce:Ir)(t,(function(t,r,i){return e(n,t,r,i)})),n},Bn.unary=function(t){return Da(t,1)},Bn.union=sa,Bn.unionBy=ua,Bn.unionWith=ca,Bn.uniq=function(t){return t&&t.length?fi(t):[]},Bn.uniqBy=function(t,e){return t&&t.length?fi(t,lo(e,2)):[]},Bn.uniqWith=function(t,e){return e="function"==typeof e?e:r,t&&t.length?fi(t,r,e):[]},Bn.unset=function(t,e){return null==t||pi(t,e)},Bn.unzip=la,Bn.unzipWith=ha,Bn.update=function(t,e,n){return null==t?t:di(t,e,bi(n))},Bn.updateWith=function(t,e,n,i){return i="function"==typeof i?i:r,null==t?t:di(t,e,bi(n),i)},Bn.values=zs,Bn.valuesIn=function(t){return null==t?[]:Xe(t,js(t))},Bn.without=fa,Bn.words=ru,Bn.wrap=function(t,e){return Ka(bi(e),t)},Bn.xor=pa,Bn.xorBy=da,Bn.xorWith=va,Bn.zip=ga,Bn.zipObject=function(t,e){return yi(t||[],e||[],rr)},Bn.zipObjectDeep=function(t,e){return yi(t||[],e||[],ei)},Bn.zipWith=ma,Bn.entries=Ws,Bn.entriesIn=Hs,Bn.extend=Cs,Bn.extendWith=ks,pu(Bn,Bn),Bn.add=Tu,Bn.attempt=iu,Bn.camelCase=Gs,Bn.capitalize=Qs,Bn.ceil=Eu,Bn.clamp=function(t,e,n){return n===r&&(n=e,e=r),n!==r&&(n=(n=Is(n))==n?n:0),e!==r&&(e=(e=Is(e))==e?e:0),cr(Is(t),e,n)},Bn.clone=function(t){return lr(t,4)},Bn.cloneDeep=function(t){return lr(t,5)},Bn.cloneDeepWith=function(t,e){return lr(t,5,e="function"==typeof e?e:r)},Bn.cloneWith=function(t,e){return lr(t,4,e="function"==typeof e?e:r)},Bn.conformsTo=function(t,e){return null==e||hr(t,e,Fs(e))},Bn.deburr=$s,Bn.defaultTo=function(t,e){return null==t||t!=t?e:t},Bn.divide=Su,Bn.endsWith=function(t,e,n){t=Es(t),e=hi(e);var i=t.length,o=n=n===r?i:cr(bs(n),0,i);return(n-=e.length)>=0&&t.slice(n,o)==e},Bn.eq=za,Bn.escape=function(t){return(t=Es(t))&&Y.test(t)?t.replace(Q,rn):t},Bn.escapeRegExp=function(t){return(t=Es(t))&&it.test(t)?t.replace(rt,"\\$&"):t},Bn.every=function(t,e,n){var i=Ya(t)?Ae:gr;return n&&Io(t,e,n)&&(e=r),i(t,lo(e,3))},Bn.find=Ia,Bn.findIndex=$o,Bn.findKey=function(t,e){return je(t,lo(e,3),Ir)},Bn.findLast=Ta,Bn.findLastIndex=Yo,Bn.findLastKey=function(t,e){return je(t,lo(e,3),Tr)},Bn.floor=Cu,Bn.forEach=Ea,Bn.forEachRight=Sa,Bn.forIn=function(t,e){return null==t?t:br(t,lo(e,3),js)},Bn.forInRight=function(t,e){return null==t?t:wr(t,lo(e,3),js)},Bn.forOwn=function(t,e){return t&&Ir(t,lo(e,3))},Bn.forOwnRight=function(t,e){return t&&Tr(t,lo(e,3))},Bn.get=Ps,Bn.gt=Ga,Bn.gte=Qa,Bn.has=function(t,e){return null!=t&&yo(t,e,Nr)},Bn.hasIn=Ds,Bn.head=Jo,Bn.identity=cu,Bn.includes=function(t,e,n,r){t=Ja(t)?t:zs(t),n=n&&!r?bs(n):0;var i=t.length;return n<0&&(n=bn(i+n,0)),ps(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&qe(t,e,n)>-1},Bn.indexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=null==n?0:bs(n);return i<0&&(i=bn(r+i,0)),qe(t,e,i)},Bn.inRange=function(t,e,n){return e=_s(e),n===r?(n=e,e=0):n=_s(n),function(t,e,n){return t>=wn(e,n)&&t<bn(e,n)}(t=Is(t),e,n)},Bn.invoke=Ms,Bn.isArguments=$a,Bn.isArray=Ya,Bn.isArrayBuffer=Xa,Bn.isArrayLike=Ja,Bn.isArrayLikeObject=Za,Bn.isBoolean=function(t){return!0===t||!1===t||ss(t)&&kr(t)==_},Bn.isBuffer=ts,Bn.isDate=es,Bn.isElement=function(t){return ss(t)&&1===t.nodeType&&!ls(t)},Bn.isEmpty=function(t){if(null==t)return!0;if(Ja(t)&&(Ya(t)||"string"==typeof t||"function"==typeof t.splice||ts(t)||vs(t)||$a(t)))return!t.length;var e=mo(t);if(e==E||e==N)return!t.size;if(Co(t))return!jr(t).length;for(var n in t)if(Mt.call(t,n))return!1;return!0},Bn.isEqual=function(t,e){return Or(t,e)},Bn.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:r)?n(t,e):r;return i===r?Or(t,e,r,n):!!i},Bn.isError=ns,Bn.isFinite=function(t){return"number"==typeof t&&mn(t)},Bn.isFunction=rs,Bn.isInteger=is,Bn.isLength=os,Bn.isMap=us,Bn.isMatch=function(t,e){return t===e||Lr(t,e,fo(e))},Bn.isMatchWith=function(t,e,n){return n="function"==typeof n?n:r,Lr(t,e,fo(e),n)},Bn.isNaN=function(t){return cs(t)&&t!=+t},Bn.isNative=function(t){if(So(t))throw new Et("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Mr(t)},Bn.isNil=function(t){return null==t},Bn.isNull=function(t){return null===t},Bn.isNumber=cs,Bn.isObject=as,Bn.isObjectLike=ss,Bn.isPlainObject=ls,Bn.isRegExp=hs,Bn.isSafeInteger=function(t){return is(t)&&t>=-9007199254740991&&t<=p},Bn.isSet=fs,Bn.isString=ps,Bn.isSymbol=ds,Bn.isTypedArray=vs,Bn.isUndefined=function(t){return t===r},Bn.isWeakMap=function(t){return ss(t)&&mo(t)==P},Bn.isWeakSet=function(t){return ss(t)&&"[object WeakSet]"==kr(t)},Bn.join=function(t,e){return null==t?"":yn.call(t,e)},Bn.kebabCase=Ys,Bn.last=na,Bn.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var o=i;return n!==r&&(o=(o=bs(n))<0?bn(i+o,0):wn(o,i-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,o):Ue(t,Be,o,!0)},Bn.lowerCase=Xs,Bn.lowerFirst=Js,Bn.lt=gs,Bn.lte=ms,Bn.max=function(t){return t&&t.length?mr(t,cu,Ar):r},Bn.maxBy=function(t,e){return t&&t.length?mr(t,lo(e,2),Ar):r},Bn.mean=function(t){return Ke(t,cu)},Bn.meanBy=function(t,e){return Ke(t,lo(e,2))},Bn.min=function(t){return t&&t.length?mr(t,cu,qr):r},Bn.minBy=function(t,e){return t&&t.length?mr(t,lo(e,2),qr):r},Bn.stubArray=wu,Bn.stubFalse=Iu,Bn.stubObject=function(){return{}},Bn.stubString=function(){return""},Bn.stubTrue=function(){return!0},Bn.multiply=Au,Bn.nth=function(t,e){return t&&t.length?Hr(t,bs(e)):r},Bn.noConflict=function(){return fe._===this&&(fe._=Vt),this},Bn.noop=du,Bn.now=Pa,Bn.pad=function(t,e,n){t=Es(t);var r=(e=bs(e))?fn(t):0;if(!e||r>=e)return t;var i=(e-r)/2;return zi(me(i),n)+t+zi(ge(i),n)},Bn.padEnd=function(t,e,n){t=Es(t);var r=(e=bs(e))?fn(t):0;return e&&r<e?t+zi(e-r,n):t},Bn.padStart=function(t,e,n){t=Es(t);var r=(e=bs(e))?fn(t):0;return e&&r<e?zi(e-r,n)+t:t},Bn.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Tn(Es(t).replace(ot,""),e||0)},Bn.random=function(t,e,n){if(n&&"boolean"!=typeof n&&Io(t,e,n)&&(e=n=r),n===r&&("boolean"==typeof e?(n=e,e=r):"boolean"==typeof t&&(n=t,t=r)),t===r&&e===r?(t=0,e=1):(t=_s(t),e===r?(e=t,t=0):e=_s(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var o=En();return wn(t+o*(e-t+ue("1e-"+((o+"").length-1))),e)}return Yr(t,e)},Bn.reduce=function(t,e,n){var r=Ya(t)?Oe:ze,i=arguments.length<3;return r(t,lo(e,4),n,i,dr)},Bn.reduceRight=function(t,e,n){var r=Ya(t)?Le:ze,i=arguments.length<3;return r(t,lo(e,4),n,i,vr)},Bn.repeat=function(t,e,n){return e=(n?Io(t,e,n):e===r)?1:bs(e),Xr(Es(t),e)},Bn.replace=function(){var t=arguments,e=Es(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Bn.result=function(t,e,n){var i=-1,o=(e=wi(e,t)).length;for(o||(o=1,t=r);++i<o;){var a=null==t?r:t[Ko(e[i])];a===r&&(i=o,a=n),t=rs(a)?a.call(t):a}return t},Bn.round=Nu,Bn.runInContext=t,Bn.sample=function(t){return(Ya(t)?Zn:Zr)(t)},Bn.size=function(t){if(null==t)return 0;if(Ja(t))return ps(t)?fn(t):t.length;var e=mo(t);return e==E||e==N?t.size:jr(t).length},Bn.snakeCase=Zs,Bn.some=function(t,e,n){var i=Ya(t)?Me:ai;return n&&Io(t,e,n)&&(e=r),i(t,lo(e,3))},Bn.sortedIndex=function(t,e){return si(t,e)},Bn.sortedIndexBy=function(t,e,n){return ui(t,e,lo(n,2))},Bn.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=si(t,e);if(r<n&&za(t[r],e))return r}return-1},Bn.sortedLastIndex=function(t,e){return si(t,e,!0)},Bn.sortedLastIndexBy=function(t,e,n){return ui(t,e,lo(n,2),!0)},Bn.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=si(t,e,!0)-1;if(za(t[n],e))return n}return-1},Bn.startCase=tu,Bn.startsWith=function(t,e,n){return t=Es(t),n=null==n?0:cr(bs(n),0,t.length),e=hi(e),t.slice(n,n+e.length)==e},Bn.subtract=Ru,Bn.sum=function(t){return t&&t.length?Ge(t,cu):0},Bn.sumBy=function(t,e){return t&&t.length?Ge(t,lo(e,2)):0},Bn.template=function(t,e,n){var i=Bn.templateSettings;n&&Io(t,e,n)&&(e=r),t=Es(t),e=ks({},e,i,to);var o,a,s=ks({},e.imports,i.imports,to),u=Fs(s),c=Xe(s,u),l=0,h=e.interpolate||wt,f="__p += '",p=At((e.escape||wt).source+"|"+h.source+"|"+(h===Z?pt:wt).source+"|"+(e.evaluate||wt).source+"|$","g"),d="//# sourceURL="+(Mt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ie+"]")+"\n";t.replace(p,(function(e,n,r,i,s,u){return r||(r=i),f+=t.slice(l,u).replace(It,on),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),s&&(a=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=u+e.length,e})),f+="';\n";var v=Mt.call(e,"variable")&&e.variable;if(v){if(ht.test(v))throw new Et("Invalid `variable` option passed into `_.template`")}else f="with (obj) {\n"+f+"\n}\n";f=(a?f.replace(W,""):f).replace(H,"$1").replace(z,"$1;"),f="function("+(v||"obj")+") {\n"+(v?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=iu((function(){return St(u,d+"return "+f).apply(r,c)}));if(g.source=f,ns(g))throw g;return g},Bn.times=function(t,e){if((t=bs(t))<1||t>p)return[];var n=v,r=wn(t,v);e=lo(e),t-=v;for(var i=Qe(r,e);++n<t;)e(n);return i},Bn.toFinite=_s,Bn.toInteger=bs,Bn.toLength=ws,Bn.toLower=function(t){return Es(t).toLowerCase()},Bn.toNumber=Is,Bn.toSafeInteger=function(t){return t?cr(bs(t),-9007199254740991,p):0===t?t:0},Bn.toString=Es,Bn.toUpper=function(t){return Es(t).toUpperCase()},Bn.trim=function(t,e,n){if((t=Es(t))&&(n||e===r))return $e(t);if(!t||!(e=hi(e)))return t;var i=pn(t),o=pn(e);return Ti(i,Ze(i,o),tn(i,o)+1).join("")},Bn.trimEnd=function(t,e,n){if((t=Es(t))&&(n||e===r))return t.slice(0,dn(t)+1);if(!t||!(e=hi(e)))return t;var i=pn(t);return Ti(i,0,tn(i,pn(e))+1).join("")},Bn.trimStart=function(t,e,n){if((t=Es(t))&&(n||e===r))return t.replace(ot,"");if(!t||!(e=hi(e)))return t;var i=pn(t);return Ti(i,Ze(i,pn(e))).join("")},Bn.truncate=function(t,e){var n=30,i="...";if(as(e)){var o="separator"in e?e.separator:o;n="length"in e?bs(e.length):n,i="omission"in e?hi(e.omission):i}var a=(t=Es(t)).length;if(an(t)){var s=pn(t);a=s.length}if(n>=a)return t;var u=n-fn(i);if(u<1)return i;var c=s?Ti(s,0,u).join(""):t.slice(0,u);if(o===r)return c+i;if(s&&(u+=c.length-u),hs(o)){if(t.slice(u).search(o)){var l,h=c;for(o.global||(o=At(o.source,Es(dt.exec(o))+"g")),o.lastIndex=0;l=o.exec(h);)var f=l.index;c=c.slice(0,f===r?u:f)}}else if(t.indexOf(hi(o),u)!=u){var p=c.lastIndexOf(o);p>-1&&(c=c.slice(0,p))}return c+i},Bn.unescape=function(t){return(t=Es(t))&&$.test(t)?t.replace(G,vn):t},Bn.uniqueId=function(t){var e=++Ft;return Es(t)+e},Bn.upperCase=eu,Bn.upperFirst=nu,Bn.each=Ea,Bn.eachRight=Sa,Bn.first=Jo,pu(Bn,(ku={},Ir(Bn,(function(t,e){Mt.call(Bn.prototype,e)||(ku[e]=t)})),ku),{chain:!1}),Bn.VERSION="4.17.21",Ce(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(t){Bn[t].placeholder=Bn})),Ce(["drop","take"],(function(t,e){zn.prototype[t]=function(n){n=n===r?1:bn(bs(n),0);var i=this.__filtered__&&!e?new zn(this):this.clone();return i.__filtered__?i.__takeCount__=wn(n,i.__takeCount__):i.__views__.push({size:wn(n,v),type:t+(i.__dir__<0?"Right":"")}),i},zn.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Ce(["filter","map","takeWhile"],(function(t,e){var n=e+1,r=1==n||3==n;zn.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:lo(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}})),Ce(["head","last"],(function(t,e){var n="take"+(e?"Right":"");zn.prototype[t]=function(){return this[n](1).value()[0]}})),Ce(["initial","tail"],(function(t,e){var n="drop"+(e?"":"Right");zn.prototype[t]=function(){return this.__filtered__?new zn(this):this[n](1)}})),zn.prototype.compact=function(){return this.filter(cu)},zn.prototype.find=function(t){return this.filter(t).head()},zn.prototype.findLast=function(t){return this.reverse().find(t)},zn.prototype.invokeMap=Jr((function(t,e){return"function"==typeof t?new zn(this):this.map((function(n){return Pr(n,t,e)}))})),zn.prototype.reject=function(t){return this.filter(Va(lo(t)))},zn.prototype.slice=function(t,e){t=bs(t);var n=this;return n.__filtered__&&(t>0||e<0)?new zn(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==r&&(n=(e=bs(e))<0?n.dropRight(-e):n.take(e-t)),n)},zn.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},zn.prototype.toArray=function(){return this.take(v)},Ir(zn.prototype,(function(t,e){var n=/^(?:filter|find|map|reject)|While$/.test(e),i=/^(?:head|last)$/.test(e),o=Bn[i?"take"+("last"==e?"Right":""):e],a=i||/^find/.test(e);o&&(Bn.prototype[e]=function(){var e=this.__wrapped__,s=i?[1]:arguments,u=e instanceof zn,c=s[0],l=u||Ya(e),h=function(t){var e=o.apply(Bn,De([t],s));return i&&f?e[0]:e};l&&n&&"function"==typeof c&&1!=c.length&&(u=l=!1);var f=this.__chain__,p=!!this.__actions__.length,d=a&&!f,v=u&&!p;if(!a&&l){e=v?e:new zn(this);var g=t.apply(e,s);return g.__actions__.push({func:_a,args:[h],thisArg:r}),new Hn(g,f)}return d&&v?t.apply(this,s):(g=this.thru(h),d?i?g.value()[0]:g.value():g)})})),Ce(["pop","push","shift","sort","splice","unshift"],(function(t){var e=xt[t],n=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Bn.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var i=this.value();return e.apply(Ya(i)?i:[],t)}return this[n]((function(n){return e.apply(Ya(n)?n:[],t)}))}})),Ir(zn.prototype,(function(t,e){var n=Bn[e];if(n){var r=n.name+"";Mt.call(Dn,r)||(Dn[r]=[]),Dn[r].push({name:e,func:n})}})),Dn[Bi(r,2).name]=[{name:"wrapper",func:r}],zn.prototype.clone=function(){var t=new zn(this.__wrapped__);return t.__actions__=xi(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=xi(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=xi(this.__views__),t},zn.prototype.reverse=function(){if(this.__filtered__){var t=new zn(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},zn.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=Ya(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=wn(e,t+a);break;case"takeRight":t=bn(t,e-a)}}return{start:t,end:e}}(0,i,this.__views__),a=o.start,s=o.end,u=s-a,c=r?s:a-1,l=this.__iteratees__,h=l.length,f=0,p=wn(u,this.__takeCount__);if(!n||!r&&i==u&&p==u)return gi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var v=-1,g=t[c+=e];++v<h;){var m=l[v],y=m.iteratee,_=m.type,b=y(g);if(2==_)g=b;else if(!b){if(1==_)continue t;break t}}d[f++]=g}return d},Bn.prototype.at=ba,Bn.prototype.chain=function(){return ya(this)},Bn.prototype.commit=function(){return new Hn(this.value(),this.__chain__)},Bn.prototype.next=function(){this.__values__===r&&(this.__values__=ys(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?r:this.__values__[this.__index__++]}},Bn.prototype.plant=function(t){for(var e,n=this;n instanceof Wn;){var i=Ho(n);i.__index__=0,i.__values__=r,e?o.__wrapped__=i:e=i;var o=i;n=n.__wrapped__}return o.__wrapped__=t,e},Bn.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof zn){var e=t;return this.__actions__.length&&(e=new zn(this)),(e=e.reverse()).__actions__.push({func:_a,args:[aa],thisArg:r}),new Hn(e,this.__chain__)}return this.thru(aa)},Bn.prototype.toJSON=Bn.prototype.valueOf=Bn.prototype.value=function(){return gi(this.__wrapped__,this.__actions__)},Bn.prototype.first=Bn.prototype.head,ee&&(Bn.prototype[ee]=function(){return this}),Bn}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(fe._=gn,define((function(){return gn}))):de?((de.exports=gn)._=gn,pe._=gn):fe._=gn}).call(this)})),customElements.define("text-custom",class extends HTMLElement{constructor(){super(),this.render()}render(){this.shadow=this.attachShadow({mode:"open"});const t=document.createElement("style"),e=document.createElement("div"),n=this.getAttribute("size")||"18px",r=this.getAttribute("weight")||"400";e.className="text",e.innerHTML=this.textContent,t.innerHTML=`\n      .text {\n        font-size: ${n};\n        font-weight: ${r};\n      }\n      `,this.shadow.appendChild(e),this.shadow.appendChild(t)}});const s=["module","nomodule"];function u(t){if(!t.match(/.+\.[m]?js$/))throw new Error(a(`Unsupported type for bundle "${t}": .js or .mjs expected.`))}function c(t){if(!t||!v(t.path))throw new Error(a('Expected route config to be an object with a "path" string property, or an array of such objects'));const e=t.bundle,n=["component","redirect","bundle"];if(!(d(t.action)||Array.isArray(t.children)||d(t.children)||p(e)||n.some((e=>v(t[e])))))throw new Error(a(`Expected route config "${t.path}" to include either "${n.join('", "')}" or "action" function but none found.`));if(e)if(v(e))u(e);else{if(!s.some((t=>t in e)))throw new Error(a('Expected route bundle to include either "nomodule" or "module" keys, or both'));s.forEach((t=>t in e&&u(e[t])))}t.redirect&&["bundle","component"].forEach((e=>{e in t&&console.warn(a(`Route config "${t.path}" has both "redirect" and "${e}" properties, and "redirect" will always override the latter. Did you mean to only use "${e}"?`))}))}function l(t){o(t).forEach((t=>c(t)))}function h(t,e){let n=document.head.querySelector('script[src="'+t+'"][async]');return n||(n=document.createElement("script"),n.setAttribute("src",t),"module"===e?n.setAttribute("type","module"):"nomodule"===e&&n.setAttribute("nomodule",""),n.async=!0),new Promise(((t,e)=>{n.onreadystatechange=n.onload=e=>{n.__dynamicImportLoaded=!0,t(e)},n.onerror=t=>{n.parentNode&&n.parentNode.removeChild(n),e(t)},null===n.parentNode?document.head.appendChild(n):n.__dynamicImportLoaded&&t()}))}function f(t,e){return!window.dispatchEvent(new CustomEvent(`vaadin-router-${t}`,{cancelable:"go"===t,detail:e}))}function p(t){return"object"==typeof t&&!!t}function d(t){return"function"==typeof t}function v(t){return"string"==typeof t}function g(t){const e=new Error(a(`Page not found (${t.pathname})`));return e.context=t,e.code=404,e}const m=new class{};function y(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)return;let e=t.target;const n=t.composedPath?t.composedPath():t.path||[];for(let t=0;t<n.length;t++){const r=n[t];if(r.nodeName&&"a"===r.nodeName.toLowerCase()){e=r;break}}for(;e&&"a"!==e.nodeName.toLowerCase();)e=e.parentNode;if(!e||"a"!==e.nodeName.toLowerCase())return;if(e.target&&"_self"!==e.target.toLowerCase())return;if(e.hasAttribute("download"))return;if(e.hasAttribute("router-ignore"))return;if(e.pathname===window.location.pathname&&""!==e.hash)return;const r=e.origin||function(t){const e=t.port,n=t.protocol;return`${n}//${"http:"===n&&"80"===e||"https:"===n&&"443"===e?t.hostname:t.host}`}(e);if(r!==window.location.origin)return;const{pathname:i,search:o,hash:a}=e;f("go",{pathname:i,search:o,hash:a})&&(t.preventDefault(),t&&"click"===t.type&&window.scrollTo(0,0))}const _={activate(){window.document.addEventListener("click",y)},inactivate(){window.document.removeEventListener("click",y)}};function b(t){if("vaadin-router-ignore"===t.state)return;const{pathname:e,search:n,hash:r}=window.location;f("go",{pathname:e,search:n,hash:r})}/Trident/.test(navigator.userAgent)&&!d(window.PopStateEvent)&&(window.PopStateEvent=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n.state=e.state||null,n},window.PopStateEvent.prototype=window.Event.prototype);const w={activate(){window.addEventListener("popstate",b)},inactivate(){window.removeEventListener("popstate",b)}};var I=O,T=A,E=function(t,e){return N(A(t,e))},S=N,C=D,k=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function A(t,e){for(var n,r=[],i=0,o=0,a="",s=e&&e.delimiter||"/",u=e&&e.delimiters||"./",c=!1;null!==(n=k.exec(t));){var l=n[0],h=n[1],f=n.index;if(a+=t.slice(o,f),o=f+l.length,h)a+=h[1],c=!0;else{var p="",d=t[o],v=n[2],g=n[3],m=n[4],y=n[5];if(!c&&a.length){var _=a.length-1;u.indexOf(a[_])>-1&&(p=a[_],a=a.slice(0,_))}a&&(r.push(a),a="",c=!1);var b=""!==p&&void 0!==d&&d!==p,w="+"===y||"*"===y,I="?"===y||"*"===y,T=p||s,E=g||m;r.push({name:v||i++,prefix:p,delimiter:T,optional:I,repeat:w,partial:b,pattern:E?x(E):"[^"+R(T)+"]+?"})}}return(a||o<t.length)&&r.push(a+t.substr(o)),r}function N(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var i="",o=r&&r.encode||encodeURIComponent,a=0;a<t.length;a++){var s=t[a];if("string"!=typeof s){var u,c=n?n[s.name]:void 0;if(Array.isArray(c)){if(!s.repeat)throw new TypeError('Expected "'+s.name+'" to not repeat, but got array');if(0===c.length){if(s.optional)continue;throw new TypeError('Expected "'+s.name+'" to not be empty')}for(var l=0;l<c.length;l++){if(u=o(c[l],s),!e[a].test(u))throw new TypeError('Expected all "'+s.name+'" to match "'+s.pattern+'"');i+=(0===l?s.prefix:s.delimiter)+u}}else if("string"!=typeof c&&"number"!=typeof c&&"boolean"!=typeof c){if(!s.optional)throw new TypeError('Expected "'+s.name+'" to be '+(s.repeat?"an array":"a string"));s.partial&&(i+=s.prefix)}else{if(u=o(String(c),s),!e[a].test(u))throw new TypeError('Expected "'+s.name+'" to match "'+s.pattern+'", but got "'+u+'"');i+=s.prefix+u}}else i+=s}return i}}function R(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function x(t){return t.replace(/([=!:$/()])/g,"\\$1")}function P(t){return t&&t.sensitive?"":"i"}function D(t,e,n){for(var r=(n=n||{}).strict,i=!1!==n.start,o=!1!==n.end,a=R(n.delimiter||"/"),s=n.delimiters||"./",u=[].concat(n.endsWith||[]).map(R).concat("$").join("|"),c=i?"^":"",l=0===t.length,h=0;h<t.length;h++){var f=t[h];if("string"==typeof f)c+=R(f),l=h===t.length-1&&s.indexOf(f[f.length-1])>-1;else{var p=f.repeat?"(?:"+f.pattern+")(?:"+R(f.delimiter)+"(?:"+f.pattern+"))*":f.pattern;e&&e.push(f),f.optional?f.partial?c+=R(f.prefix)+"("+p+")?":c+="(?:"+R(f.prefix)+"("+p+"))?":c+=R(f.prefix)+"("+p+")"}}return o?(r||(c+="(?:"+a+")?"),c+="$"===u?"$":"(?="+u+")"):(r||(c+="(?:"+a+"(?="+u+"))?"),l||(c+="(?="+a+"|"+u+")")),new RegExp(c,P(n))}function O(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(O(t[i],e,n).source);return new RegExp("(?:"+r.join("|")+")",P(n))}(t,e,n):function(t,e,n){return D(A(t,n),e,n)}(t,e,n)}I.parse=T,I.compile=E,I.tokensToFunction=S,I.tokensToRegExp=C;const{hasOwnProperty:L}=Object.prototype,M=new Map;function F(t){try{return decodeURIComponent(t)}catch(e){return t}}function j(t,e,n,r,i){let o,a,s=0,u=t.path||"";return"/"===u.charAt(0)&&(n&&(u=u.substr(1)),n=!0),{next(c){if(t===c)return{done:!0};const l=t.__children=t.__children||t.children;if(!o&&(o=function(t,e,n,r,i){const o=`${t}|${n=!!n}`;let a=M.get(o);if(!a){const e=[];a={keys:e,pattern:I(t,e,{end:n,strict:""===t})},M.set(o,a)}const s=a.pattern.exec(e);if(!s)return null;const u=Object.assign({},i);for(let t=1;t<s.length;t++){const e=a.keys[t-1],n=e.name,r=s[t];void 0===r&&L.call(u,n)||(e.repeat?u[n]=r?r.split(e.delimiter).map(F):[]:u[n]=r?F(r):r)}return{path:s[0],keys:(r||[]).concat(a.keys),params:u}}(u,e,!l,r,i),o))return{done:!1,value:{route:t,keys:o.keys,params:o.params,path:o.path}};if(o&&l)for(;s<l.length;){if(!a){const r=l[s];r.parent=t;let i=o.path.length;i>0&&"/"===e.charAt(i)&&(i+=1),a=j(r,e.substr(i),n,o.keys,o.params)}const r=a.next(c);if(!r.done)return{done:!1,value:r.value};a=null,s++}return{done:!0}}}}function U(t){if(d(t.route.action))return t.route.action(t)}M.set("|false",{keys:[],pattern:/(?:)/});class q{constructor(t,e={}){if(Object(t)!==t)throw new TypeError("Invalid routes");this.baseUrl=e.baseUrl||"",this.errorHandler=e.errorHandler,this.resolveRoute=e.resolveRoute||U,this.context=Object.assign({resolver:this},e.context),this.root=Array.isArray(t)?{path:"",__children:t,parent:null,__synthetic:!0}:t,this.root.parent=null}getRoutes(){return[...this.root.__children]}setRoutes(t){l(t);const e=[...o(t)];this.root.__children=e}addRoutes(t){return l(t),this.root.__children.push(...o(t)),this.getRoutes()}removeRoutes(){this.setRoutes([])}resolve(t){const e=Object.assign({},this.context,v(t)?{pathname:t}:t),n=j(this.root,this.__normalizePathname(e.pathname),this.baseUrl),r=this.resolveRoute;let i=null,o=null,a=e;function s(t,u=i.value.route,c){const l=null===c&&i.value.route;return i=o||n.next(l),o=null,t||!i.done&&function(t,e){let n=e;for(;n;)if(n=n.parent,n===t)return!0;return!1}(u,i.value.route)?i.done?Promise.reject(g(e)):(a=Object.assign(a?{chain:a.chain?a.chain.slice(0):[]}:{},e,i.value),function(t,e){const{route:n,path:r}=e;if(n&&!n.__synthetic){const e={path:r,route:n};if(t.chain){if(n.parent){let e=t.chain.length;for(;e--&&t.chain[e].route&&t.chain[e].route!==n.parent;)t.chain.pop()}}else t.chain=[];t.chain.push(e)}}(a,i.value),Promise.resolve(r(a)).then((e=>null!=e&&e!==m?(a.result=e.result||e,a):s(t,u,e)))):(o=i,Promise.resolve(m))}return e.next=s,Promise.resolve().then((()=>s(!0,this.root))).catch((t=>{const e=function(t){let e=`Path '${t.pathname}' is not properly resolved due to an error.`;const n=(t.route||{}).path;return n&&(e+=` Resolution had failed on route: '${n}'`),e}(a);if(t?console.warn(e):t=new Error(e),t.context=t.context||a,t instanceof DOMException||(t.code=t.code||500),this.errorHandler)return a.result=this.errorHandler(t),a;throw t}))}static __createUrl(t,e){return new URL(t,e)}get __effectiveBaseUrl(){return this.baseUrl?this.constructor.__createUrl(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}__normalizePathname(t){if(!this.baseUrl)return t;const e=this.__effectiveBaseUrl,n=this.constructor.__createUrl(t,e).href;return n.slice(0,e.length)===e?n.slice(e.length):void 0}}q.pathToRegexp=I;const{pathToRegexp:V}=q,B=new Map;function K(t,e,n){const r=e.name||e.component;if(r&&(t.has(r)?t.get(r).push(e):t.set(r,[e])),Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];i.parent=e,K(t,i,i.__children||i.children)}}function W(t,e){const n=t.get(e);if(n&&n.length>1)throw new Error(`Duplicate route with name "${e}". Try seting unique 'name' route properties.`);return n&&n[0]}function H(t){let e=t.path;return e=Array.isArray(e)?e[0]:e,void 0!==e?e:""}function z(t,e={}){if(!(t instanceof q))throw new TypeError("An instance of Resolver is expected");const n=new Map;return(r,i)=>{let o=W(n,r);if(!o&&(n.clear(),K(n,t.root,t.root.__children),o=W(n,r),!o))throw new Error(`Route "${r}" not found`);let a=B.get(o.fullPath);if(!a){let t=H(o),e=o.parent;for(;e;){const n=H(e);n&&(t=n.replace(/\/$/,"")+"/"+t.replace(/^\//,"")),e=e.parent}const n=V.parse(t),r=V.tokensToFunction(n),i=Object.create(null);for(let t=0;t<n.length;t++)v(n[t])||(i[n[t].name]=!0);a={toPath:r,keys:i},B.set(t,a),o.fullPath=t}let s=a.toPath(i,e)||"/";if(e.stringifyQueryParams&&i){const t={},n=Object.keys(i);for(let e=0;e<n.length;e++){const r=n[e];a.keys[r]||(t[r]=i[r])}const r=e.stringifyQueryParams(t);r&&(s+="?"===r.charAt(0)?r:`?${r}`)}return s}}let G=[];function Q(t,e){return t.classList.add(e),new Promise((n=>{if((t=>{const e=getComputedStyle(t).getPropertyValue("animation-name");return e&&"none"!==e})(t)){const r=t.getBoundingClientRect(),i=`height: ${r.bottom-r.top}px; width: ${r.right-r.left}px`;t.setAttribute("style",`position: absolute; ${i}`),((t,e)=>{const n=()=>{t.removeEventListener("animationend",n),e()};t.addEventListener("animationend",n)})(t,(()=>{t.classList.remove(e),t.removeAttribute("style"),n()}))}else t.classList.remove(e),n()}))}function $(t){return null!=t}function Y({pathname:t="",search:e="",hash:n="",chain:r=[],params:i={},redirectFrom:o,resolver:a},s){const u=r.map((t=>t.route));return{baseUrl:a&&a.baseUrl||"",pathname:t,search:e,hash:n,routes:u,route:s||u.length&&u[u.length-1]||null,params:i,redirectFrom:o,getUrl:(t={})=>et(rt.pathToRegexp.compile(nt(u))(Object.assign({},i,t)),a)}}function X(t,e){const n=Object.assign({},t.params);return{redirect:{pathname:e,from:t.pathname,params:n}}}function J(t,e,n){if(d(t))return t.apply(n,e)}function Z(t,e,n){return r=>r&&(r.cancel||r.redirect)?r:n?J(n[t],e,n):void 0}function tt(t){if(t&&t.length){const e=t[0].parentNode;for(let n=0;n<t.length;n++)e.removeChild(t[n])}}function et(t,e){const n=e.__effectiveBaseUrl;return n?e.constructor.__createUrl(t.replace(/^\//,""),n).pathname:t}function nt(t){return t.map((t=>t.path)).reduce(((t,e)=>e.length?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):t),"")}class rt extends q{constructor(t,e){const n=document.head.querySelector("base"),r=n&&n.getAttribute("href");super([],Object.assign({baseUrl:r&&q.__createUrl(r,document.URL).pathname.replace(/[^\/]*$/,"")},e)),this.resolveRoute=t=>this.__resolveRoute(t);const i=rt.NavigationTrigger;rt.setTriggers.apply(rt,Object.keys(i).map((t=>i[t]))),this.baseUrl,this.ready,this.ready=Promise.resolve(t),this.location,this.location=Y({resolver:this}),this.__lastStartedRenderId=0,this.__navigationEventHandler=this.__onNavigationEvent.bind(this),this.setOutlet(t),this.subscribe(),this.__createdByRouter=new WeakMap,this.__addedByRouter=new WeakMap}__resolveRoute(t){const e=t.route;let n=Promise.resolve();d(e.children)&&(n=n.then((()=>e.children(function(t){const e=Object.assign({},t);return delete e.next,e}(t)))).then((t=>{$(t)||d(e.children)||(t=e.children),function(t,e){if(!Array.isArray(t)&&!p(t))throw new Error(a(`Incorrect "children" value for the route ${e.path}: expected array or object, but got ${t}`));e.__children=[];const n=o(t);for(let t=0;t<n.length;t++)c(n[t]),e.__children.push(n[t])}(t,e)})));const r={redirect:e=>X(t,e),component:t=>{const e=document.createElement(t);return this.__createdByRouter.set(e,!0),e}};return n.then((()=>{if(this.__isLatestRender(t))return J(e.action,[t,r],e)})).then((t=>{return $(t)&&(t instanceof HTMLElement||t.redirect||t===m)?t:v(e.redirect)?r.redirect(e.redirect):e.bundle?(n=e.bundle,v(n)?h(n):Promise.race(s.filter((t=>t in n)).map((t=>h(n[t],t))))).then((()=>{}),(()=>{throw new Error(a(`Bundle not found: ${e.bundle}. Check if the file name is correct`))})):void 0;var n})).then((t=>$(t)?t:v(e.component)?r.component(e.component):void 0))}setOutlet(t){t&&this.__ensureOutlet(t),this.__outlet=t}getOutlet(){return this.__outlet}setRoutes(t,e=!1){return this.__previousContext=void 0,this.__urlForName=void 0,super.setRoutes(t),e||this.__onNavigationEvent(),this.ready}render(t,e){const n=++this.__lastStartedRenderId,r=Object.assign({search:"",hash:""},v(t)?{pathname:t}:t,{__renderId:n});return this.ready=this.resolve(r).then((t=>this.__fullyResolveChain(t))).then((t=>{if(this.__isLatestRender(t)){const r=this.__previousContext;if(t===r)return this.__updateBrowserHistory(r,!0),this.location;if(this.location=Y(t),e&&this.__updateBrowserHistory(t,1===n),f("location-changed",{router:this,location:this.location}),t.__skipAttach)return this.__copyUnchangedElements(t,r),this.__previousContext=t,this.location;this.__addAppearingContent(t,r);const i=this.__animateIfNeeded(t);return this.__runOnAfterEnterCallbacks(t),this.__runOnAfterLeaveCallbacks(t,r),i.then((()=>{if(this.__isLatestRender(t))return this.__removeDisappearingContent(),this.__previousContext=t,this.location}))}})).catch((t=>{if(n===this.__lastStartedRenderId)throw e&&this.__updateBrowserHistory(r),tt(this.__outlet&&this.__outlet.children),this.location=Y(Object.assign(r,{resolver:this})),f("error",Object.assign({router:this,error:t},r)),t})),this.ready}__fullyResolveChain(t,e=t){return this.__findComponentContextAfterAllRedirects(e).then((n=>{const r=n!==e?n:t,i=et(nt(n.chain),n.resolver)===n.pathname,o=(t,e=t.route,n)=>t.next(void 0,e,n).then((n=>null===n||n===m?i?t:null!==e.parent?o(t,e.parent,n):n:n));return o(n).then((t=>{if(null===t||t===m)throw g(r);return t&&t!==m&&t!==n?this.__fullyResolveChain(r,t):this.__amendWithOnBeforeCallbacks(n)}))}))}__findComponentContextAfterAllRedirects(t){const e=t.result;return e instanceof HTMLElement?(function(t,e){e.location=Y(t);const n=t.chain.map((t=>t.route)).indexOf(t.route);t.chain[n].element=e}(t,e),Promise.resolve(t)):e.redirect?this.__redirect(e.redirect,t.__redirectCount,t.__renderId).then((t=>this.__findComponentContextAfterAllRedirects(t))):e instanceof Error?Promise.reject(e):Promise.reject(new Error(a(`Invalid route resolution result for path "${t.pathname}". Expected redirect object or HTML element, but got: "${function(t){if("object"!=typeof t)return String(t);const e=Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];return"Object"===e||"Array"===e?`${e} ${JSON.stringify(t)}`:e}(e)}". Double check the action return value for the route.`)))}__amendWithOnBeforeCallbacks(t){return this.__runOnBeforeCallbacks(t).then((e=>e===this.__previousContext||e===t?e:this.__fullyResolveChain(e)))}__runOnBeforeCallbacks(t){const e=this.__previousContext||{},n=e.chain||[],r=t.chain;let i=Promise.resolve();const o=()=>({cancel:!0}),a=e=>X(t,e);if(t.__divergedChainIndex=0,t.__skipAttach=!1,n.length){for(let e=0;e<Math.min(n.length,r.length)&&(n[e].route===r[e].route&&(n[e].path===r[e].path||n[e].element===r[e].element)&&this.__isReusableElement(n[e].element,r[e].element));e=++t.__divergedChainIndex);if(t.__skipAttach=r.length===n.length&&t.__divergedChainIndex==r.length&&this.__isReusableElement(t.result,e.result),t.__skipAttach){for(let e=r.length-1;e>=0;e--)i=this.__runOnBeforeLeaveCallbacks(i,t,{prevent:o},n[e]);for(let e=0;e<r.length;e++)i=this.__runOnBeforeEnterCallbacks(i,t,{prevent:o,redirect:a},r[e]),n[e].element.location=Y(t,n[e].route)}else for(let e=n.length-1;e>=t.__divergedChainIndex;e--)i=this.__runOnBeforeLeaveCallbacks(i,t,{prevent:o},n[e])}if(!t.__skipAttach)for(let e=0;e<r.length;e++)e<t.__divergedChainIndex?e<n.length&&n[e].element&&(n[e].element.location=Y(t,n[e].route)):(i=this.__runOnBeforeEnterCallbacks(i,t,{prevent:o,redirect:a},r[e]),r[e].element&&(r[e].element.location=Y(t,r[e].route)));return i.then((e=>{if(e){if(e.cancel)return this.__previousContext.__renderId=t.__renderId,this.__previousContext;if(e.redirect)return this.__redirect(e.redirect,t.__redirectCount,t.__renderId)}return t}))}__runOnBeforeLeaveCallbacks(t,e,n,r){const i=Y(e);return t.then((t=>{if(this.__isLatestRender(e)){return Z("onBeforeLeave",[i,n,this],r.element)(t)}})).then((t=>{if(!(t||{}).redirect)return t}))}__runOnBeforeEnterCallbacks(t,e,n,r){const i=Y(e,r.route);return t.then((t=>{if(this.__isLatestRender(e)){return Z("onBeforeEnter",[i,n,this],r.element)(t)}}))}__isReusableElement(t,e){return!(!t||!e)&&(this.__createdByRouter.get(t)&&this.__createdByRouter.get(e)?t.localName===e.localName:t===e)}__isLatestRender(t){return t.__renderId===this.__lastStartedRenderId}__redirect(t,e,n){if(e>256)throw new Error(a(`Too many redirects when rendering ${t.from}`));return this.resolve({pathname:this.urlForPath(t.pathname,t.params),redirectFrom:t.from,__redirectCount:(e||0)+1,__renderId:n})}__ensureOutlet(t=this.__outlet){if(!(t instanceof Node))throw new TypeError(a(`Expected router outlet to be a valid DOM Node (but got ${t})`))}__updateBrowserHistory({pathname:t,search:e="",hash:n=""},r){if(window.location.pathname!==t||window.location.search!==e||window.location.hash!==n){const i=r?"replaceState":"pushState";window.history[i](null,document.title,t+e+n),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}__copyUnchangedElements(t,e){let n=this.__outlet;for(let r=0;r<t.__divergedChainIndex;r++){const i=e&&e.chain[r].element;if(i){if(i.parentNode!==n)break;t.chain[r].element=i,n=i}}return n}__addAppearingContent(t,e){this.__ensureOutlet(),this.__removeAppearingContent();const n=this.__copyUnchangedElements(t,e);this.__appearingContent=[],this.__disappearingContent=Array.from(n.children).filter((e=>this.__addedByRouter.get(e)&&e!==t.result));let r=n;for(let e=t.__divergedChainIndex;e<t.chain.length;e++){const i=t.chain[e].element;i&&(r.appendChild(i),this.__addedByRouter.set(i,!0),r===n&&this.__appearingContent.push(i),r=i)}}__removeDisappearingContent(){this.__disappearingContent&&tt(this.__disappearingContent),this.__disappearingContent=null,this.__appearingContent=null}__removeAppearingContent(){this.__disappearingContent&&this.__appearingContent&&(tt(this.__appearingContent),this.__disappearingContent=null,this.__appearingContent=null)}__runOnAfterLeaveCallbacks(t,e){if(e)for(let n=e.chain.length-1;n>=t.__divergedChainIndex&&this.__isLatestRender(t);n--){const r=e.chain[n].element;if(r)try{const n=Y(t);J(r.onAfterLeave,[n,{},e.resolver],r)}finally{this.__disappearingContent.indexOf(r)>-1&&tt(r.children)}}}__runOnAfterEnterCallbacks(t){for(let e=t.__divergedChainIndex;e<t.chain.length&&this.__isLatestRender(t);e++){const n=t.chain[e].element||{},r=Y(t,t.chain[e].route);J(n.onAfterEnter,[r,{},t.resolver],n)}}__animateIfNeeded(t){const e=(this.__disappearingContent||[])[0],n=(this.__appearingContent||[])[0],r=[],i=t.chain;let o;for(let t=i.length;t>0;t--)if(i[t-1].route.animate){o=i[t-1].route.animate;break}if(e&&n&&o){const t=p(o)&&o.leave||"leaving",i=p(o)&&o.enter||"entering";r.push(Q(e,t)),r.push(Q(n,i))}return Promise.all(r).then((()=>t))}subscribe(){window.addEventListener("vaadin-router-go",this.__navigationEventHandler)}unsubscribe(){window.removeEventListener("vaadin-router-go",this.__navigationEventHandler)}__onNavigationEvent(t){const{pathname:e,search:n,hash:r}=t?t.detail:window.location;v(this.__normalizePathname(e))&&(t&&t.preventDefault&&t.preventDefault(),this.render({pathname:e,search:n,hash:r},!0))}static setTriggers(...t){var e;e=t,G.forEach((t=>t.inactivate())),e.forEach((t=>t.activate())),G=e}urlForName(t,e){return this.__urlForName||(this.__urlForName=z(this)),et(this.__urlForName(t,e),this)}urlForPath(t,e){return et(rt.pathToRegexp.compile(t)(e),this)}static go(t){const{pathname:e,search:n,hash:r}=v(t)?this.__createUrl(t,"http://a"):t;return f("go",{pathname:e,search:n,hash:r})}}const it=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,ot=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function at(t,e){if("function"!=typeof t)return;const n=it.exec(t.toString());if(n)try{t=new Function(n[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};const st=function(t,e){if(window.Vaadin.developmentMode)return at(t,e)};function ut(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!!localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&(ot?!function(){if(ot){if(Object.keys(ot).map((t=>ot[t])).filter((t=>t.productionMode)).length>0)return!0}return!1}():!at((function(){return!0})))}catch(t){return!1}}());window.Vaadin=window.Vaadin||{},window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.7.4"}),st(ut),rt.NavigationTrigger={POPSTATE:w,CLICK:_};var ct,lt={};ct=lt,Object.defineProperty(ct,"__esModule",{value:!0,configurable:!0}),e(lt,"firebase",(()=>De)),e(lt,"default",(()=>Oe));var ht=function(t,e){return(ht=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function ft(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}ht(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var pt=function(){return pt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},pt.apply(this,arguments)};function dt(t,e,n,r){return new(n||(n=Promise))((function(i,o){function a(t){try{u(r.next(t))}catch(t){o(t)}}function s(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}u((r=r.apply(t,e||[])).next())}))}function vt(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=a.trys,(i=i.length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}Object.create;function gt(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mt(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function yt(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var _t=!1,bt=!1,wt="${JSCORE_VERSION}",It=function(t,e){if(!t)throw Tt(e)},Tt=function(t){return new Error("Firebase Database ("+wt+") INTERNAL ASSERT FAILED: "+t)},Et=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},St={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],a=i+1<t.length,s=a?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=o>>2,h=(3&o)<<4|s>>4,f=(15&s)<<2|c>>6,p=63&c;u||(p=64,a||(f=64)),r.push(n[l],n[h],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Et(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(1023&a))}else{o=t[n++];var s=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0,s=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==a||null==s||null==u)throw Error();var c=o<<2|a>>4;if(r.push(c),64!==s){var l=a<<4&240|s>>2;if(r.push(l),64!==u){var h=s<<6&192|u;r.push(h)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},Ct=function(t){try{return St.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kt(t){return At(void 0,t)}function At(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=At(t[n],e[n]));return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Nt=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",r=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=pt({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[St.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),St.encodeString(JSON.stringify(o),!1),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Pt(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function Dt(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}}function Ot(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Lt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Mt(){return!0===_t||!0===bt}function Ft(){return"indexedDB"in self&&null!=indexedDB}function jt(){return new Promise((function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}}))}function Ut(){return!(!navigator||!navigator.cookieEnabled)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var qt=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,Vt.prototype.create),o}return ft(e,t),e}(Error),Vt=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],a=o?Bt(o,r):"Error",s=this.serviceName+": "+a+" ("+i+").",u=new qt(i,s,r);return u},t}();function Bt(t,e){return t.replace(Kt,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var Kt=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(t){return JSON.parse(t)}function Ht(t){return JSON.stringify(t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zt=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=Wt(Ct(o[0])||""),n=Wt(Ct(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Gt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qt(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function $t(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Yt(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Xt=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,a,s=this.chain_[0],u=this.chain_[1],c=this.chain_[2],l=this.chain_[3],h=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(o=l^u&(c^l),a=1518500249):(o=u^c^l,a=1859775393):r<60?(o=u&c|l&(u|c),a=2400959708):(o=u^c^l,a=3395469782);i=(s<<5|s>>>27)+o+h+a+n[r]&4294967295;h=l,l=c,c=4294967295&(u<<30|u>>>2),u=s,s=i}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+h&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function Jt(t,e){var n=new Zt(t,e);return n.subscribe.bind(n)}var Zt=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=te),void 0===r.error&&(r.error=te),void 0===r.complete&&(r.complete=te);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function te(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ee=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function ne(t,e){return t+" failed: "+e+" argument "}function re(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(ne(t,e)+"must be a valid function.")}function ie(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(ne(t,e)+"must be a valid context object.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oe=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function ae(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function se(t){return t&&t._delegate?t._delegate:t}var ue=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),ce=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Nt;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(t){}try{for(var r=gt(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=mt(i.value,2),a=o[0],s=o[1],u=this.normalizeInstanceIdentifier(a);try{var c=this.getOrInitializeService({instanceIdentifier:u});s.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t="[DEFAULT]"),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(yt(yt([],mt(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),mt(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t="[DEFAULT]"),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var r=t.options,i=void 0===r?{}:r,o=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(o))throw Error(this.name+"("+o+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:o,options:i});try{for(var s=gt(this.instancesDeferred.entries()),u=s.next();!u.done;u=s.next()){var c=mt(u.value,2),l=c[0],h=c[1];o===this.normalizeInstanceIdentifier(l)&&h.resolve(a)}}catch(t){e={error:t}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,r,i=this.onInitCallbacks.get(e);if(i)try{for(var o=gt(i),a=o.next();!a.done;a=o.next()){var s=a.value;try{s(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,"[DEFAULT]"===e?void 0:e),options:i}),this.instances.set(n,o),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t="[DEFAULT]"),this.component?this.component.multipleInstances?t:"[DEFAULT]":t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var le,he=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new ce(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function fe(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],a=0,s=o.length;a<s;a++,i++)r[i]=o[a];return r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pe,de=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(pe||(pe={}));var ve,ge={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},me=pe.INFO,ye=((le={})[pe.DEBUG]="log",le[pe.VERBOSE]="log",le[pe.INFO]="info",le[pe.WARN]="warn",le[pe.ERROR]="error",le),_e=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=ye[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,fe(["["+i+"]  "+t.name+":"],n))}},be=function(){function t(t){this.name=t,this._logLevel=me,this._logHandler=_e,this._userLogHandler=null,de.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in pe))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?ge[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fe([this,pe.DEBUG],t)),this._logHandler.apply(this,fe([this,pe.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fe([this,pe.VERBOSE],t)),this._logHandler.apply(this,fe([this,pe.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fe([this,pe.INFO],t)),this._logHandler.apply(this,fe([this,pe.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fe([this,pe.WARN],t)),this._logHandler.apply(this,fe([this,pe.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,fe([this,pe.ERROR],t)),this._logHandler.apply(this,fe([this,pe.ERROR],t))},t}();function we(t){de.forEach((function(e){e.setLogLevel(t)}))}var Ie,Te=((ve={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",ve["bad-app-name"]="Illegal App name: '{$appName}",ve["duplicate-app"]="Firebase App named '{$appName}' already exists",ve["app-deleted"]="Firebase App named '{$appName}' already deleted",ve["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",ve["invalid-log-argument"]="First argument to `onLog` must be null or a function.",ve),Ee=new Vt("app","Firebase",Te),Se=((Ie={})["@firebase/app"]="fire-core",Ie["@firebase/analytics"]="fire-analytics",Ie["@firebase/app-check"]="fire-app-check",Ie["@firebase/auth"]="fire-auth",Ie["@firebase/database"]="fire-rtdb",Ie["@firebase/functions"]="fire-fn",Ie["@firebase/installations"]="fire-iid",Ie["@firebase/messaging"]="fire-fcm",Ie["@firebase/performance"]="fire-perf",Ie["@firebase/remote-config"]="fire-rc",Ie["@firebase/storage"]="fire-gcs",Ie["@firebase/firestore"]="fire-fst",Ie["fire-js"]="fire-js",Ie["firebase-wrapper"]="fire-js-all",Ie),Ce=new be("@firebase/app"),ke=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=kt(t),this.container=new he(e.name),this._addComponent(new ue("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e="[DEFAULT]"),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e="[DEFAULT]"),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){Ce.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ee.create("app-deleted",{appName:this.name_})},t}();ke.prototype.name&&ke.prototype.options||ke.prototype.delete||console.log("dc");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ae(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={});if("object"!=typeof i||null===i){i={name:i}}var o=i;void 0===o.name&&(o.name="[DEFAULT]");var a=o.name;if("string"!=typeof a||!a)throw Ee.create("bad-app-name",{appName:String(a)});if(Gt(e,a))throw Ee.create("duplicate-app",{appName:a});var s=new t(n,o,r);return e[a]=s,s},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=Se[t])&&void 0!==r?r:t;n&&(i+="-"+n);var a=i.match(/\s|\//),s=e.match(/\s|\//);if(a||s){var u=['Unable to register library "'+i+'" with version "'+e+'":'];return a&&u.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),a&&s&&u.push("and"),s&&u.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Ce.warn(u.join(" "))}o(new ue(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:we,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ee.create("invalid-log-argument");!function(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=ge[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:pe[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=de;r<i.length;r++)n(i[r])}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e)},apps:null,SDK_VERSION:"8.7.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(!Gt(e,t=t||"[DEFAULT]"))throw Ee.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return Ce.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var s=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw Ee.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&At(s,o.serviceProps),r[a]=s,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this._getService.bind(this,a);return n.apply(this,o.multipleInstances?t:[])}}for(var u=0,c=Object.keys(e);u<c.length;u++){var l=c[u];e[l]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ne=function t(){var e=Ae(ke);return e.INTERNAL=pt(pt({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){At(e,t)},createSubscribe:Jt,ErrorFactory:Vt,deepExtend:At}),e}(),Re=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Ce.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var xe=self.firebase.SDK_VERSION;xe&&xe.indexOf("LITE")>=0&&Ce.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Pe=Ne.initializeApp;Ne.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Dt()&&Ce.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),Pe.apply(void 0,t)};var De=Ne;!function(t,e){t.INTERNAL.registerComponent(new ue("platform-logger",(function(t){return new Re(t)}),"PRIVATE")),t.registerVersion("@firebase/app","0.6.28",e),t.registerVersion("fire-js","")}(De);var Oe=De;(function(){var e,n="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var r=function(e){e=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof t&&t,e];for(var n=0;n<e.length;++n){var r=e[n];if(r&&r.Math==Math)return r}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,e){if(e){var i=r;t=t.split(".");for(var o=0;o<t.length-1;o++){var a=t[o];a in i||(i[a]={}),i=i[a]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&n(i,t,{configurable:!0,writable:!0,value:e})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function n(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;n.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var a=r.setTimeout;n.prototype.c=function(t){a(t,0)},n.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},n.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)s.b(this.a[t]);this.a=null}};var s=new n;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,a=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),a},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?s.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),a=r.next();!a.done;a=r.next())i(a.value).Ra(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){a[e]=n,0==--s&&t(a)}}var a=[],s=0;do{a.push(void 0),s++,i(r.value).Ra(o(a.length-1),e),r=n.next()}while(!r.done)}))},e}));var a=a||{},s=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function l(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function h(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function p(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==f(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function g(t){return Object.prototype.hasOwnProperty.call(t,m)&&t[m]||(t[m]=++y)}var m="closure_uid_"+(1e9*Math.random()>>>0),y=0;function _(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?_:b).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function C(t,e,n){this.code=N+t,this.message=e||R[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new C(e.substring(N.length),t.message,t.serverResponse):null}E(C,Error),C.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},C.prototype.toJSON=function(){return this.w()};var A,N="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},x={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function P(t){for(var e in x)if(x[e].id===t)return{firebaseEndpoint:(t=x[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function D(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function O(t){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");O.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function F(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function j(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function U(){this.b=this.a=null}A=P("__EID__")?"__EID__":void 0,E(O,Error),O.prototype.name="CustomError",E(L,O),L.prototype.name="AssertionError",F.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new F((function(){return new B}),(function(t){t.reset()}));function V(){var t=_e,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function B(){this.next=this.b=this.a=null}U.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},B.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},B.prototype.reset=function(){this.next=this.b=this.a=null};var K=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},W=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var H=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,a=0;a<n;a++)if(a in o){var s=o[a];e.call(void 0,s,a,t)&&(r[i++]=s)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},G=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function Q(t,e){return 0<=K(t,e)}function $(t,e){var n;return(n=0<=(e=K(t,e)))&&Array.prototype.splice.call(t,e,1),n}function Y(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&1==Array.prototype.splice.call(t,r,1).length&&0}))}function X(t){return Array.prototype.concat.apply([],arguments)}function J(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,at=/\x00/g,st=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var lt=s.navigator;if(lt){var ht=lt.userAgent;if(ht){Z=ht;break t}}Z=""}function ft(t){return ut(Z,t)}function pt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function dt(t){for(var e in t)return!1;return!0}function vt(t){var e,n={};for(e in t)n[e]=t[e];return n}var gt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function mt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<gt.length;o++)n=gt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||s).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(v(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function _t(t,e){this.a=t===Tt&&e||"",this.b=It}function bt(t){return t instanceof _t&&t.constructor===_t&&t.b===It?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}_t.prototype.ta=!0,_t.prototype.sa=function(){return this.a},_t.prototype.toString=function(){return"Const{"+this.a+"}"};var wt,It={},Tt={};function Et(){if(void 0===wt){var t=null,e=s.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){s.console&&s.console.error(t.message)}wt=t}else wt=t}return wt}function St(t,e){this.a=e===Rt?t:""}function Ct(t){return t instanceof St&&t.constructor===St?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=bt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new St(t=e?e.createScriptURL(t):t,Rt)}(t=n.replace(At,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof _t?bt(t):encodeURIComponent(String(t))})))}St.prototype.ta=!0,St.prototype.sa=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var At=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Rt={};function xt(t,e){this.a=e===jt?t:""}function Pt(t){return t instanceof xt&&t.constructor===xt?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}xt.prototype.ta=!0,xt.prototype.sa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Dt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Ot=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof xt)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t))t=new xt(t,jt);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Ot);t=e&&Dt.test(e[1])?new xt(t,jt):null}return t}function Ft(t){return t instanceof xt?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new xt(t,jt))}var jt={},Ut=new xt("about:invalid#zClosurez",jt);function qt(t,e,n){this.a=n===Vt?t:""}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Vt={};function Bt(t,e,n,r){return t=t instanceof xt?t:Ft(t),e=e||s,n=n instanceof _t?bt(n):n||"",e.open(Pt(t),n,r,void 0)}function Kt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Wt(t){return st.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(at,"&#0;"))),t}function Ht(t){return Ht[" "](t),t}Ht[" "]=h;var zt,Gt=ft("Opera"),Qt=ft("Trident")||ft("MSIE"),$t=ft("Edge"),Yt=$t||Qt,Xt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Jt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function Zt(){var t=s.document;return t?t.documentMode:void 0}t:{var te="",ee=function(){var t=Z;return Xt?/rv:([^\);]+)(\)|;)/.exec(t):$t?/Edge\/([\d\.]+)/.exec(t):Qt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):Jt?/WebKit\/(\S+)/.exec(t):Gt?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(ee&&(te=ee?ee[1]:""),Qt){var ne=Zt();if(null!=ne&&ne>parseFloat(te)){zt=String(ne);break t}}zt=te}var re,ie={};function oe(t){return function(t,e){var n=ie;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}(t,(function(){for(var e=0,n=tt(String(zt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var a=n[o]||"",s=r[o]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==a[0].length&&0==s[0].length)break;e=ct(0==a[1].length?0:parseInt(a[1],10),0==s[1].length?0:parseInt(s[1],10))||ct(0==a[2].length,0==s[2].length)||ct(a[2],s[2]),a=a[3],s=s[3]}while(0==e)}return 0<=e}))}if(s.document&&Qt){var ae=Zt();re=ae||(parseInt(zt,10)||void 0)}else re=void 0;var se=re;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ue=!Qt||9<=Number(se);function ce(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function le(t,e){pt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:pe.hasOwnProperty(n)?t.setAttribute(pe[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var he,fe,pe={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function de(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!p(o)||v(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(v(o)){var a="function"==typeof o.item||"string"==typeof o.item;break t}if(d(o)){a="function"==typeof o.item;break t}}a=!1}W(a?J(o):o,r)}}}function ve(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ge(t){s.setTimeout((function(){throw t}),0)}function me(t,e){fe||function(){if(s.Promise&&s.Promise.resolve){var t=s.Promise.resolve(void 0);fe=function(){t.then(be)}}else fe=function(){var t=be;!d(s.setImmediate)||s.Window&&s.Window.prototype&&!ft("Edge")&&s.Window.prototype.setImmediate==s.setImmediate?(he||(he=function(){var t=s.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=ve(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=w((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){s.setTimeout(t,0)}}()),he(t)):s.setImmediate(t)}}(),ye||(fe(),ye=!0),_e.add(t,e)}var ye=!1,_e=new U;function be(){for(var t;t=V();){try{t.a.call(t.b)}catch(t){ge(t)}j(q,t)}ye=!1}function we(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=h)try{var n=this;t.call(e,(function(t){Me(n,Te,t)}),(function(t){if(!(t instanceof Ke))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Me(n,Ee,t)}))}catch(t){Me(this,Ee,t)}}var Ie=0,Te=2,Ee=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ce=new F((function(){return new Se}),(function(t){t.reset()}));function ke(t,e,n){var r=Ce.get();return r.g=t,r.b=e,r.f=n,r}function Ae(t){if(t instanceof we)return t;var e=new we(h);return Me(e,Te,t),e}function Ne(t){return new we((function(e,n){n(t)}))}function Re(t,e,n){Fe(t,e,n,null)||me(I(e,t))}function xe(t){return new we((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function Pe(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,a=n.b;a&&(a.c||(r++,a.a==t&&(i=a),!(i&&1<r)));a=a.next)i||(o=a);i&&(n.a==Ie&&1==r?Pe(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),qe(n,i,Ee,e)))}t.c=null}else Me(t,Ee,e)}function De(t,e){t.b||t.a!=Te&&t.a!=Ee||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Le(t,e,n,r){var i=ke(null,null,null);return i.a=new we((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ke?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,De(t,i),i.a}function Me(t,e,n){t.a==Ie&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Fe(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Ee||n instanceof Ke||function(t,e){t.g=!0,me((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Fe(t,e,n,r){if(t instanceof we)return De(t,ke(e||h,n||null,r)),!0;if(D(t))return t.then(e,n,r),!0;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}function a(t){s||(s=!0,n.call(i,t))}var s=!1;try{e.call(t,a,o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function je(t){t.h||(t.h=!0,me(t.gc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function qe(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Ve(e,n,r);else try{e.c?e.g.call(e.f):Ve(e,n,r)}catch(t){Be.call(null,t)}j(Ce,e)}function Ve(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}we.prototype.then=function(t,e,n){return Le(this,d(t)?t:null,d(e)?e:null,n)},we.prototype.$goog_Thenable=!0,(e=we.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,De(this,t),this},e.o=function(t,e){return Le(this,null,t,e)},e.cancel=function(t){if(this.a==Ie){var e=new Ke(t);me((function(){Pe(this,e)}),this)}},e.$c=function(t){this.a=Ie,Me(this,Te,t)},e.ad=function(t){this.a=Ie,Me(this,Ee,t)},e.gc=function(){for(var t;t=Ue(this);)qe(this,t,this.a,this.i);this.h=!1};var Be=ge;function Ke(t){O.call(this,t)}function We(){0!=He&&(ze[g(this)]=this),this.ya=this.ya,this.pa=this.pa}E(Ke,O),Ke.prototype.name="cancel";var He=0,ze={};function Ge(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=He)){var e=g(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete ze[e]}}We.prototype.ya=!1,We.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var Qe=Object.freeze||function(t){return t},$e=!Qt||9<=Number(se),Ye=Qt&&!oe("9"),Xe=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{s.addEventListener("test",h,e),s.removeEventListener("test",h,e)}catch(t){}return t}();function Je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ze(t,e){if(Je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Xt){t:{try{Ht(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:tn[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Je.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Ze,Je);var tn=Qe({2:"touch",3:"pen",4:"mouse"});Ze.prototype.preventDefault=function(){Ze.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Ye)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ze.prototype.g=function(){return this.a};var en="closure_listenable_"+(1e6*Math.random()|0),nn=0;function rn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++nn,this.wa=this.Qa=!1}function on(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function an(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(on(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function un(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}an.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var a=un(t,e,r,i);return-1<a?(e=t[a],n||(e.Qa=!1)):((e=new rn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var cn="closure_lm_"+(1e6*Math.random()|0),ln={};function hn(t,e,n,r,i){if(r&&r.once)pn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=In(n),t&&t[en]?En(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!1,r,i)}function fn(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=v(i)?!!i.capture:!!i,s=bn(t);if(s||(t[cn]=s=new an(t)),!(n=s.add(e,n,r,a,o)).proxy){if(r=function(){var t=_n,e=$e?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(gn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function pn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)pn(t,e[o],n,r,i);else n=In(n),t&&t[en]?Sn(t,e,n,v(r)?!!r.capture:!!r,i):fn(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=In(n),t&&t[en]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=un(o=t.a[e],n,r,i))&&(on(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=un(e,n,r,i)),(n=-1<t?e[t]:null)&&vn(n))}function vn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[en])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(gn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(sn(n,t),0==n.b&&(n.src=null,e[cn]=null)):on(t)}}}function gn(t){return t in ln?ln[t]:ln[t]="on"+t}function mn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=yn(o,r),i=i&&!1!==o)}return i}function yn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&vn(t),n.call(r,e)}function _n(t,e){if(t.wa)return!0;if(!$e){if(!e)t:{e=["window","event"];for(var n=s,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ze(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=mn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=mn(r[i],t,!1,e),n=n&&o}return n}return yn(t,new Ze(e,this))}function bn(t){return(t=t[cn])instanceof an?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function In(t){return d(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function Tn(){We.call(this),this.v=new an(this),this.bc=this,this.hb=null}function En(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function Sn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Cn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.wa&&a.capture==n){var s=a.listener,u=a.Wa||a.src;a.Qa&&sn(t.v,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}function kn(t,e,n){if(d(t))n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:s.setTimeout(t,e||0)}function An(t){var e=null;return new we((function(n,r){-1==(e=kn((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw s.clearTimeout(e),t}))}function Nn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Rn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function xn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(Tn,We),Tn.prototype[en]=!0,Tn.prototype.addEventListener=function(t,e,n,r){hn(this,t,e,n,r)},Tn.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},Tn.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Je(t,n);else if(t instanceof Je)t.target=t.target||n;else{var i=t;mt(t=new Je(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var a=t.b=e[o];i=Cn(a,r,!0,t)&&i}if(i=Cn(a=t.b=n,r,!0,t)&&i,i=Cn(a,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Cn(a=t.b=e[o],r,!1,t)&&i;return i},Tn.prototype.Da=function(){if(Tn.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)on(n[r]);delete e.a[t],e.b--}}this.hb=null},(e=xn.prototype).X=function(){Pn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.Y=function(){return Pn(this),this.a.concat()},e.clear=function(){this.b={},this.c=this.a.length=0},e.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},e.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var On=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Ln(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Ln?(this.i=void 0!==e?e:t.i,Mn(this,t.c),this.l=t.l,this.a=t.a,Fn(this,t.g),this.f=t.f,jn(this,rr(t.b)),this.h=t.h):t&&(n=String(t).match(On))?(this.i=!!e,Mn(this,n[1]||"",!0),this.l=Kn(n[2]||""),this.a=Kn(n[3]||"",!0),Fn(this,n[4]),this.f=Kn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Kn(n[7]||"")):(this.i=!!e,this.b=new Xn(null,this.i))}function Mn(t,e,n){t.c=n?Kn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Fn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Xn?(t.b=e,function(t,e){e&&!t.f&&(Jn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(tr(this,e),nr(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Wn(e,$n)),t.b=new Xn(e,t.i))}function Un(t,e,n){t.b.set(e,n)}function qn(t,e){return t.b.get(e)}function Vn(t){return t instanceof Ln?new Ln(t):new Ln(t,void 0)}function Bn(t,e,n,r){var i=new Ln(null,void 0);return t&&Mn(i,t),e&&(i.a=e),n&&Fn(i,n),r&&(i.f=r),i}function Kn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Wn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Ln.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Wn(e,zn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Wn(e,zn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Wn(n,"/"==n.charAt(0)?Qn:Gn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Wn(n,Yn)),t.join("")},Ln.prototype.resolve=function(t){var e=new Ln(this),n=!!t.c;n?Mn(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Fn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],a=0;a<i.length;){var s=i[a++];"."==s?r&&a==i.length&&o.push(""):".."==s?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&a==i.length&&o.push("")):(o.push(s),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,rr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var zn=/[#\/\?@]/g,Gn=/[#\?:]/g,Qn=/[#\?]/g,$n=/[#\?@]/g,Yn=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Jn(t){t.a||(t.a=new xn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Zn(t){var e=Rn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Xn(null,void 0);t=Nn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?nr(n,i,o):n.add(i,o)}return n}function tr(t,e){Jn(t),e=ir(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Pn(t)))}function er(t,e){return Jn(t),e=ir(t,e),Dn(t.a.b,e)}function nr(t,e,n){tr(t,e),0<n.length&&(t.c=null,t.a.set(ir(t,e),J(n)),t.b+=n.length)}function rr(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new xn(t.a),e.b=t.b),e}function ir(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function or(t){var e=[];return sr(new ar,t,e),e.join("")}function ar(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&("function"!=typeof(o=e[r])&&(n.push(i),lr(r,n),n.push(":"),sr(t,o,n),i=","));return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":lr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(e=Xn.prototype).add=function(t,e){Jn(this),this.c=null,t=ir(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.clear=function(){this.a=this.c=null,this.b=0},e.forEach=function(t,e){Jn(this),this.a.forEach((function(n,r){W(n,(function(n){t.call(e,n,r,this)}),this)}),this)},e.Y=function(){Jn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.X=function(t){Jn(this);var e=[];if("string"==typeof t)er(this,t)&&(e=X(e,this.a.get(ir(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=X(e,t[n])}return e},e.set=function(t,e){return Jn(this),this.c=null,er(this,t=ir(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.c=t.join("&")};var ur={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},cr=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function lr(t,e){e.push('"',t.replace(cr,(function(t){var e=ur[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ur[t]=e),e})),'"')}function hr(){var t=xr();return Qt&&!!se&&11==se||/Edge\/\d+/.test(t)}function fr(){return s.window&&s.window.location.href||self&&self.location&&self.location.href||""}function pr(t,e){e=e||s.window;var n="about:blank";t&&(n=Pt(Mt(t)||Ut)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function vr(t){return!!((t=(t||xr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function gr(t){t=t||s.window;try{t.close()}catch(t){}}function mr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(a in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=xr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),Ar(xr())==Cr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof xt?n:Mt(void 0!==n.href?n.href:String(n))||Ut,n=t.target||n.target,i=[],t)switch(a){case"width":case"height":case"top":case"left":i.push(a+"="+t[a]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(a+"="+(t[a]?1:0))}var a=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(a=ve(document,"A"),"HTMLAnchorElement"),e=e instanceof xt?e:Ft(e),a.href=Pt(e),a.setAttribute("target",n),t.noreferrer&&a.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),a.dispatchEvent(t),a={}):t.noreferrer?(a=Bt("",r,n,a),t=Pt(e),a&&(Yt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),a.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Wt(t)+'">',t=new qt(t=(r=Et())?r.createHTML(t):t,null,Vt),r=a.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(a=Bt(e,r,n,a))&&t.noopener&&(a.opener=null),a)try{a.focus()}catch(t){}return a}var yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,_r=/^[^@]+@[^@]+$/;function br(){var t=null;return new we((function(e){"complete"==s.document.readyState?e():(t=function(){e()},pn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function wr(t){return t=t||xr(),!("file:"!==Mr()&&"ionic:"!==Mr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ir(){var t=s.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Tr(){return void 0!==s.WorkerGlobalScope&&"function"==typeof s.importScripts}function Er(){return Oe.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Oe.INTERNAL.hasOwnProperty("node")?"Node":Tr()?"Worker":"Browser"}function Sr(){var t=Er();return"ReactNative"===t||"Node"===t}var Cr="Firefox",kr="Chrome";function Ar(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Cr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":kr:"Safari"}var Nr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Rr(t,e){e=e||[];var n,r=[],i={};for(n in Nr)i[Nr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Er())?r=Ar(i=xr()):"Worker"===r&&(r=Ar(i=xr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function xr(){return s.navigator&&s.navigator.userAgent||""}function Pr(t,e){t=t.split("."),e=e||s;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Dr(){try{var t=s.localStorage,e=Vr();if(t)return t.setItem(e,"1"),t.removeItem(e),!hr()||!!s.indexedDB}catch(t){return Tr()&&!!s.indexedDB}return!1}function Or(){return(Lr()||"chrome-extension:"===Mr()||wr())&&!Sr()&&Dr()&&!Tr()}function Lr(){return"http:"===Mr()||"https:"===Mr()}function Mr(){return s.location&&s.location.protocol||null}function Fr(t){return!vr(t=t||xr())&&Ar(t)!=Cr}function jr(t){return void 0===t?null:or(t)}function Ur(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function qr(t){if(null!==t)return JSON.parse(t)}function Vr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=Ar(t=t||xr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Kr(){var t=s.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Wr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=xr(),e=Er(),this.b=vr(t)||"ReactNative"===e}function Hr(){var t=s.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function zr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Gr(){return!(!Pr("fireauth.oauthhelper",s)&&!Pr("fireauth.iframe",s))}Wr.prototype.get=function(){var t=s.navigator;return!t||"boolean"!=typeof t.onLine||!Lr()&&"chrome-extension:"!==Mr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Qr,$r={};function Yr(t){$r[t]||($r[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Xr={};Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Qr=2==Xr.abcd}catch(t){Qr=!1}function Jr(t,e,n){Qr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Zr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Jr(t,n,e[n])}function ti(t){var e={};return Zr(e,t),e}function ei(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Jr(e,n,ei(t[n]));return e}function ni(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[ai]))throw new C("internal-error","Internal assert: invalid MultiFactorInfo object");Jr(this,"uid",t[ai]),Jr(this,"displayName",t[ii]||null);var n=null;t[oi]&&(n=new Date(t[oi]).toUTCString()),Jr(this,"enrollmentTime",n),Jr(this,"factorId",e)}function ri(t){try{var e=new ui(t)}catch(t){e=null}return e}ni.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ii="displayName",oi="enrolledAt",ai="mfaEnrollmentId",si="phoneInfo";function ui(t){ni.call(this,t),Jr(this,"phoneNumber",t[si])}function ci(t){var e={},n=t[pi],r=t[vi],i=t[gi];if(t=ri(t[di]),!i||i!=hi&&i!=fi&&!n||i==fi&&!r||i==li&&!t)throw Error("Invalid checkActionCode response!");i==fi?(e[yi]=n||null,e[bi]=n||null,e[mi]=r):(e[yi]=r||null,e[bi]=r||null,e[mi]=n||null),e[_i]=t||null,Jr(this,Ii,i),Jr(this,wi,ei(e))}E(ui,ni),ui.prototype.w=function(){var t=ui.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var li="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",fi="VERIFY_AND_CHANGE_EMAIL",pi="email",di="mfaInfo",vi="newEmail",gi="requestType",mi="email",yi="fromEmail",_i="multiFactorInfo",bi="previousEmail",wi="data",Ii="operation";function Ti(t){var e=qn(t=Vn(t),Ei)||null,n=qn(t,Si)||null,r=qn(t,Ai)||null;if(r=r&&Ri[r]||null,!e||!n||!r)throw new C("argument-error",Ei+", "+Si+"and "+Ai+" are required in a valid action code URL.");Zr(this,{apiKey:e,operation:r,code:n,continueUrl:qn(t,Ci)||null,languageCode:qn(t,ki)||null,tenantId:qn(t,Ni)||null})}var Ei="apiKey",Si="oobCode",Ci="continueUrl",ki="languageCode",Ai="mode",Ni="tenantId",Ri={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:li,signIn:hi,verifyAndChangeEmail:fi,verifyEmail:"VERIFY_EMAIL"};function xi(t){try{return new Ti(t)}catch(t){return null}}function Pi(t){var e=t[Fi];if(void 0===e)throw new C("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new C("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Di];if(n&&"object"==typeof n){e=n[qi];var r=n[ji];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new C("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new C("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new C("argument-error",qi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new C("missing-android-pkg-name")}}else if(void 0!==n)throw new C("argument-error",Di+" property must be a non null object when specified.");if(this.f=null,(e=t[Mi])&&"object"==typeof e){if("string"==typeof(e=e[Vi])&&e.length)this.f=e;else if(void 0!==e)throw new C("argument-error",Vi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new C("argument-error",Mi+" property must be a non null object when specified.");if(void 0!==(e=t[Li])&&"boolean"!=typeof e)throw new C("argument-error",Li+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Oi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new C("argument-error",Oi+" property must be a non empty string when specified.");this.i=t||null}var Di="android",Oi="dynamicLinkDomain",Li="handleCodeInApp",Mi="iOS",Fi="url",ji="installApp",Ui="minimumVersion",qi="packageName",Vi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Ki=null;function Wi(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Ki[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Ki){Ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Ki[o]&&(Ki[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),a=n(64),s=n(64);if(64===s&&-1===i)break;e(i<<2|o>>4),64!=a&&(e(o<<4&240|a>>2),64!=s&&e(a<<6&192|s))}}(t,(function(t){e.push(t)})),e}function Hi(t){var e=Gi(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function zi(t){try{return new Hi(t)}catch(t){return null}}function Gi(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=Wi(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var a=r[e++],s=((7&i)<<18|(63&o)<<12|(63&a)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(s>>10)),t[n++]=String.fromCharCode(56320+(1023&s))}else o=r[e++],a=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}return JSON.parse(t.join(""))}catch(t){}return null}Hi.prototype.T=function(){return this.f},Hi.prototype.l=function(){return this.c},Hi.prototype.toString=function(){return this.h};var Qi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),$i=["client_id","response_type","scope","redirect_uri","state"],Yi={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:$i},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:$i},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:$i},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:Qi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function Xi(t){for(var e in Yi)if(Yi[e].fa==t)return Yi[e];return null}function Ji(t){var e={};e["facebook.com"]=ro,e["google.com"]=oo,e["github.com"]=io,e["twitter.com"]=ao;var n=t&&t[to];try{if(n)return e[n]?new e[n](t):new no(t);if(void 0!==t[Zi])return new eo(t)}catch(t){}return null}var Zi="idToken",to="providerId";function eo(t){var e=t[to];if(!e&&t[Zi]){var n=zi(t[Zi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Jr(this,"providerId",e),Jr(this,"isNewUser",n)}function no(t){eo.call(this,t),Jr(this,"profile",ei((t=qr(t.rawUserInfo||"{}"))||{}))}function ro(t){if(no.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(no.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",this.profile&&this.profile.login||null)}function oo(t){if(no.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function ao(t){if(no.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Jr(this,"username",t.screenName||null)}function so(t){var e=Vn(t),n=qn(e,"link"),r=qn(Vn(n),"link");return e=qn(e,"deep_link_id"),qn(Vn(e),"link")||e||r||n||t}function uo(t,e){if(!t&&!e)throw new C("internal-error","Internal assert: no raw session string available");if(t&&e)throw new C("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?co:lo}E(no,eo),E(ro,no),E(io,no),E(oo,no),E(ao,no);var co="enroll",lo="signin";function ho(){}function fo(t,e){return t.then((function(t){if(t[es]){var n=zi(t[es]);if(!n||e!=n.i)throw new C("user-mismatch");return t}throw new C("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new C("user-mismatch"):t}))}function po(t,e){if(!e)throw new C("internal-error","failed to construct a credential");this.a=e,Jr(this,"providerId",t),Jr(this,"signInMethod",t)}function vo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function go(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new po(t.providerId,t.pendingToken)}catch(t){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Jr(this,"idToken",e.idToken),e.accessToken&&Jr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Jr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new C("internal-error","failed to construct a credential");Jr(this,"accessToken",e.oauthToken),Jr(this,"secret",e.oauthTokenSecret)}Jr(this,"providerId",t),Jr(this,"signInMethod",n)}function yo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function _o(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function bo(t,e){this.Qc=e||[],Zr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=(Xi(t)||{}).Ja||null,this.pb=null}function wo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new C("argument-error",'SAML provider IDs must be prefixed with "saml."');bo.call(this,t,[])}function Io(t){bo.call(this,t,$i),this.a=[]}function To(){Io.call(this,"facebook.com")}function Eo(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function So(){Io.call(this,"github.com")}function Co(t){if(!t)throw new C("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new So).credential({accessToken:e})}function ko(){Io.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new ko).credential({idToken:n,accessToken:e})}function No(){bo.call(this,"twitter.com",Qi)}function Ro(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new C("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function xo(t,e,n){this.a=t,this.f=e,Jr(this,"providerId","password"),Jr(this,"signInMethod",n===Do.EMAIL_LINK_SIGN_IN_METHOD?Do.EMAIL_LINK_SIGN_IN_METHOD:Do.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Po(t){return t&&t.email&&t.password?new xo(t.email,t.password,t.signInMethod):null}function Do(){Zr(this,{providerId:"password",isOAuthProvider:!1})}function Oo(t,e){if(!(e=Lo(e)))throw new C("argument-error","Invalid email link!");return new xo(t,e.code,Do.EMAIL_LINK_SIGN_IN_METHOD)}function Lo(t){return(t=xi(t=so(t)))&&t.operation===hi?t:null}function Mo(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new C("internal-error");this.a=t,Jr(this,"providerId","phone"),this.fa="phone",Jr(this,"signInMethod","phone")}function Fo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return W(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Mo(e)}return null}function jo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function Uo(t){try{this.a=t||Oe.auth()}catch(t){throw new C("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Zr(this,{providerId:"phone",isOAuthProvider:!1})}function qo(t,e){if(!t)throw new C("missing-verification-id");if(!e)throw new C("missing-verification-code");return new Mo({fb:t,eb:e})}function Vo(t){if(t.temporaryProof&&t.phoneNumber)return new Mo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,a=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return Eo(n);case"github.com":return Co(n);case"twitter.com":return Ro(n,r);default:return n||r||o||a?a?0==e.indexOf("saml.")?new po(e,a):new mo(e,{pendingToken:a,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new Io(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Bo(t){if(!t.isOAuthProvider)throw new C("invalid-oauth-provider")}function Ko(t,e,n,r,i,o,a){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=a||null,this.a=i||null,!this.g&&!this.a)throw new C("invalid-auth-event");if(this.g&&this.a)throw new C("invalid-auth-event");if(this.g&&!this.f)throw new C("invalid-auth-event")}function Wo(t){return(t=t||{}).type?new Ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Ho(){this.b=null,this.a=[]}uo.prototype.Ha=function(){return this.a?Ae(this.a):Ae(this.b)},uo.prototype.w=function(){return this.type==co?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},ho.prototype.ka=function(){},ho.prototype.b=function(){},ho.prototype.c=function(){},ho.prototype.w=function(){},po.prototype.ka=function(t){return Ts(t,vo(this))},po.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,Es(t,n)},po.prototype.c=function(t,e){return fo(Ss(t,vo(this)),e)},po.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(t){return Ts(t,yo(this))},mo.prototype.b=function(t,e){var n=yo(this);return n.idToken=e,Es(t,n)},mo.prototype.c=function(t,e){return fo(Ss(t,yo(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},bo.prototype.Ka=function(t){return this.Jb=vt(t),this},E(wo,bo),E(Io,bo),Io.prototype.Ca=function(t){return Q(this.a,t)||this.a.push(t),this},Io.prototype.Rb=function(){return J(this.a)},Io.prototype.credential=function(t,e){var n;if(!(n=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new C("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},E(To,Io),Jr(To,"PROVIDER_ID","facebook.com"),Jr(To,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(So,Io),Jr(So,"PROVIDER_ID","github.com"),Jr(So,"GITHUB_SIGN_IN_METHOD","github.com"),E(ko,Io),Jr(ko,"PROVIDER_ID","google.com"),Jr(ko,"GOOGLE_SIGN_IN_METHOD","google.com"),E(No,bo),Jr(No,"PROVIDER_ID","twitter.com"),Jr(No,"TWITTER_SIGN_IN_METHOD","twitter.com"),xo.prototype.ka=function(t){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?au(t,Ds,{email:this.a,oobCode:this.f}):au(t,eu,{email:this.a,password:this.f})},xo.prototype.b=function(t,e){return this.signInMethod==Do.EMAIL_LINK_SIGN_IN_METHOD?au(t,Os,{idToken:e,email:this.a,oobCode:this.f}):au(t,Gs,{idToken:e,email:this.a,password:this.f})},xo.prototype.c=function(t,e){return fo(this.ka(t),e)},xo.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Zr(Do,{PROVIDER_ID:"password"}),Zr(Do,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Zr(Do,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Mo.prototype.ka=function(t){return t.gb(jo(this))},Mo.prototype.b=function(t,e){var n=jo(this);return n.idToken=e,au(t,ru,n)},Mo.prototype.c=function(t,e){var n=jo(this);return n.operation="REAUTH",fo(t=au(t,iu,n),e)},Mo.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},Uo.prototype.gb=function(t,e){var n=this.a.a;return Ae(e.verify()).then((function(r){if("string"!=typeof r)throw new C("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"===e.type){var i,o=v(t)?t.session:null,a=v(t)?t.phoneNumber:t;return i=o&&o.type==co?o.Ha().then((function(t){return function(t,e){return au(t,$s,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:a,recaptchaToken:r}})})):o&&o.type==lo?o.Ha().then((function(e){return function(t,e){return au(t,Ys,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return au(t,Hs,e)}(n,{phoneNumber:a,recaptchaToken:r}),i.then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}))}throw new C("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}))},Zr(Uo,{PROVIDER_ID:"phone"}),Zr(Uo,{PHONE_SIGN_IN_METHOD:"phone"}),Ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Ko.prototype.T=function(){return this.h},Ko.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var zo,Go=null;function Qo(t){var e="unauthorized-domain",n=void 0,r=Vn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Kt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Kt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",C.call(this,e,n)}function $o(t,e,n){C.call(this,t,n),(t=e||{}).Kb&&Jr(this,"email",t.Kb),t.ea&&Jr(this,"phoneNumber",t.ea),t.credential&&Jr(this,"credential",t.credential),t.$b&&Jr(this,"tenantId",t.$b)}function Yo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Vo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new C(e,t.message||void 0);return new $o(e,n,t.message)}return null}function Xo(){}function Jo(t){return t.c||(t.c=t.b())}function Zo(){}function ta(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function ea(){}function na(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=w(this.qc,this),this.a.onerror=w(this.Tb,this),this.a.onprogress=w(this.rc,this),this.a.ontimeout=w(this.vc,this)}function ra(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ia(t,e,n){this.reset(t,e,n,void 0,void 0)}E(Qo,C),E($o,C),$o.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&mt(t,e),t},$o.prototype.toJSON=function(){return this.w()},Xo.prototype.c=null,E(Zo,Xo),Zo.prototype.a=function(){var t=ta(this);return t?new ActiveXObject(t):new XMLHttpRequest},Zo.prototype.b=function(){var t={};return ta(this)&&(t[0]=!0,t[1]=!0),t},zo=new Zo,E(ea,Xo),ea.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new na;throw Error("Unsupported browser")},ea.prototype.b=function(){return{}},(e=na.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},e.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},e.abort=function(){this.a.abort()},e.setRequestHeader=function(){},e.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},e.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,ra(this,4)},e.Tb=function(){this.status=500,this.response=this.responseText="",ra(this,4)},e.vc=function(){this.Tb()},e.rc=function(){this.status=200,ra(this,1)},e.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ia.prototype.a=null;function oa(t){this.f=t,this.b=this.c=this.a=null}function aa(t,e){this.name=t,this.value=e}ia.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||T(),delete this.a},aa.prototype.toString=function(){return this.name};var sa=new aa("SEVERE",1e3),ua=new aa("WARNING",900),ca=new aa("CONFIG",700),la=new aa("FINE",500);function ha(t){return t.c?t.c:t.a?ha(t.a):(M("Root logger has no level set."),null)}oa.prototype.log=function(t,e,n){if(t.value>=ha(this).value)for(d(e)&&(e=e()),t=new ia(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var fa={},pa=null;function da(t){var e;if(pa||(pa=new oa(""),fa[""]=pa,pa.c=ca),!(e=fa[t])){e=new oa(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=da(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,fa[t]=e}return e}function va(t,e){t&&t.log(la,e,void 0)}function ga(t){this.f=t}function ma(t){Tn.call(this),this.u=t,this.h=void 0,this.readyState=ya,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=da("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ga,Xo),ga.prototype.a=function(){return new ma(this.f)},ga.prototype.b=function(t){return function(){return t}}({}),E(ma,Tn);var ya=0;function _a(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ba(t){t.readyState=4,t.g=null,t.c=null,t.m=null,wa(t)}function wa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function Ia(t){Tn.call(this),this.headers=new xn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=Ta,this.u=this.S=!1}(e=ma.prototype).open=function(t,e){if(this.readyState!=ya)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,wa(this)},e.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},e.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ba(this)),this.readyState=ya},e.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,wa(this)),this.a&&(this.readyState=3,wa(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==s.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,_a(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},e.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ba(this):wa(this),3==this.readyState&&_a(this)}},e.tc=function(t){this.a&&(this.response=this.responseText=t,ba(this))},e.sc=function(t){this.a&&(this.response=t,ba(this))},e.Va=function(t){var e=this.i;e&&e.log(ua,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ba(this)},e.setRequestHeader=function(t,e){this.l.append(t,e)},e.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ua,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},e.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ua,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(Ia,Tn);var Ta="";Ia.prototype.b=da("goog.net.XhrIo");var Ea=/^https?$/i,Sa=["POST","PUT"];function Ca(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():zo.a(),t.C=t.D?Jo(t.D):Jo(zo),t.a.onreadystatechange=w(t.Wb,t);try{va(t.b,La(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return va(t.b,La(t,"Error opening Xhr: "+e.message)),void Aa(t,e)}e=r||"";var o=new xn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)W(t,e,void 0);else for(var n=Rn(t),r=Nn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=ka,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=s.FormData&&e instanceof s.FormData,!Q(Sa,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Pa(t),0<t.g&&(t.u=function(t){return Qt&&oe(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),va(t.b,La(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=w(t.Ma,t)):t.s=kn(t.Ma,t.g,t)),va(t.b,La(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){va(t.b,La(t,"Send error: "+e.message)),Aa(t,e)}}function ka(t){return"content-type"==t.toLowerCase()}function Aa(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,Na(t),xa(t)}function Na(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function Ra(t){if(t.c&&void 0!==a)if(t.C[1]&&4==Da(t)&&2==Oa(t))va(t.b,La(t,"Local request error detected and ignored"));else if(t.i&&4==Da(t))kn(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Da(t)){va(t.b,La(t,"Request complete")),t.c=!1;try{var e,n=Oa(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(On)[1]||null;if(!o&&s.self&&s.self.location){var u=s.self.location.protocol;o=u.substr(0,u.length-1)}i=!Ea.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Da(t)?t.a.statusText:""}catch(e){va(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Oa(t)+"]",Na(t)}}finally{xa(t)}}}function xa(t,e){if(t.a){Pa(t);var n=t.a,r=t.C[0]?h:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(sa,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Pa(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(s.clearTimeout(t.s),t.s=null)}function Da(t){return t.a?t.a.readyState:0}function Oa(t){try{return 2<Da(t)?t.a.status:-1}catch(t){return-1}}function La(t,e){return e+" ["+t.P+" "+t.l+" "+Oa(t)+"]"}function Ma(t){var e=Ga;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Fa(t,e,n){t.a=!0,t.c=n,t.f=!e,Va(t)}function ja(t){if(t.a){if(!t.v)throw new Ba(t);t.v=!1}}function Ua(t,e,n,r){t.g.push([e,n,r]),t.a&&Va(t)}function qa(t){return G(t.g,(function(t){return d(t[1])}))}function Va(t){if(t.h&&t.a&&qa(t)){var e=t.h,n=Ha[e];n&&(s.clearTimeout(n.a),delete Ha[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],a=i[1];if(i=i[2],o=t.f?a:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(D(e)||"function"==typeof s.Promise&&e instanceof s.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,qa(t)||(n=!0)}}t.c=e,r&&(u=w(t.m,t,!0),r=w(t.m,t,!1),e instanceof Ma?(Ua(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Wa(e),Ha[e.a]=e,t.h=e.a)}function Ba(){O.call(this)}function Ka(){O.call(this)}function Wa(t){this.a=s.setTimeout(w(this.c,this),0),this.b=t}(e=Ia.prototype).Ma=function(){void 0!==a&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",va(this.b,La(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(){this.a&&this.c&&(va(this.b,La(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),xa(this))},e.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),xa(this,!0)),Ia.bb.Da.call(this)},e.Wb=function(){this.ya||(this.N||this.i||this.f?Ra(this):this.Jc())},e.Jc=function(){Ra(this)},e.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case Ta:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(sa,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return va(this.b,"Can not get response: "+t.message),null}},Ma.prototype.cancel=function(t){if(this.a)this.c instanceof Ma&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new Ka(this),ja(this),Fa(this,!1,t))}},Ma.prototype.m=function(t,e){this.i=!1,Fa(this,t,e)},Ma.prototype.then=function(t,e,n){var r,i,o=new we((function(t,e){r=t,i=e}));return Ua(this,r,(function(t){t instanceof Ka?o.cancel():i(t)})),o.then(t,e,n)},Ma.prototype.$goog_Thenable=!0,E(Ba,O),Ba.prototype.message="Deferred has already fired",Ba.prototype.name="AlreadyCalledError",E(Ka,O),Ka.prototype.message="Deferred was canceled",Ka.prototype.name="CanceledError",Wa.prototype.c=function(){throw delete Ha[this.a],this.b};var Ha={};function za(t){var e={},n=e.document||document,r=Ct(t).toString(),i=ve(document,"SCRIPT"),o={Xb:i,Ma:void 0},a=new Ma(o),u=null,h=null!=e.timeout?e.timeout:5e3;return 0<h&&(u=window.setTimeout((function(){Qa(i,!0);var t=new Xa(Ya,"Timeout reached for loading script "+r);ja(a),Fa(a,!1,t)}),h),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Qa(i,e.xd||!1,u),ja(a),Fa(a,!0,null))},i.onerror=function(){Qa(i,!0,u);var t=new Xa($a,"Error while loading script "+r);ja(a),Fa(a,!1,t)},mt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),le(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=Ct(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=s?e=l(e.document):(null===c&&(c=l(s.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),a}function Ga(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Qa(t,!0,this.Ma)}}function Qa(t,e,n){null!=n&&s.clearTimeout(n),t.onload=h,t.onerror=h,t.onreadystatechange=h,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var $a=0,Ya=1;function Xa(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),O.call(this,n),this.code=t}function Ja(t){this.f=t}function Za(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||ns,this.g=vt(t.secureTokenHeaders||rs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||is,this.a=vt(t.firebaseHeaders||os),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Er(),!(n=s.XMLHttpRequest||n&&Oe.INTERNAL.node&&Oe.INTERNAL.node.XMLHttpRequest)&&!Tr())throw new C("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Tr()?this.f=new ga(self):Sr()?this.f=new Ja(n):this.f=new ea,this.b=null}E(Xa,O),E(Ja,Xo),Ja.prototype.a=function(){return new this.f},Ja.prototype.b=function(){return{}};var ts,es="idToken",ns=new Wr(3e4,6e4),rs={"Content-Type":"application/x-www-form-urlencoded"},is=new Wr(3e4,6e4),os={"Content-Type":"application/json"};function as(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ss(t,e){e&&(t.l=us("https://securetoken.googleapis.com/v1/token",e),t.h=us("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=us("https://identitytoolkit.googleapis.com/v2/",e))}function us(t,e){return t=Vn(t),e=Vn(e.url),t.f=t.a+t.f,Mn(t,e.c),t.a=e.a,Fn(t,e.g),t.toString()}function cs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function ls(t,e,n,r,i,o,a){(function(){var t=xr();return!((t=Ar(t)!=kr?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||Qt&&se&&!(9<se))})()||Tr()?t=w(t.u,t):(ts||(ts=new we((function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{s[fs]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ua(t,null,e,void 0)}(za(kt(hs,{onload:fs})),(function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}))),t=w(t.s,t)),t(e,n,r,i,o,a)}Za.prototype.T=function(){return this.b},Za.prototype.u=function(t,e,n,r,i,o){if(Tr()&&(void 0===s.fetch||void 0===s.Headers||void 0===s.Request))throw new C("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var a=new Ia(this.f);if(o){a.g=Math.max(0,o);var u=setTimeout((function(){a.dispatchEvent("timeout")}),o)}En(a,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return va(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),Sn(a,"ready",(function(){u&&clearTimeout(u),Ge(this)})),Sn(a,"timeout",(function(){u&&clearTimeout(u),Ge(this),e&&e(null)})),Ca(a,t,n,r,i)};var hs=new _t(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),fs="__fcb"+Math.floor(1e6*Math.random()).toString();function ps(t,e,n,r,i,o,a){var s=Vn(e+n);Un(s,"key",t.c),a&&Un(s,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(s,c,i[c]);return new we((function(e,n){ls(t,s.toString(),(function(t){t?t.error?n(uu(t,o||{})):e(t):n(new C("network-request-failed"))}),r,u?void 0:or(Ur(i)),t.a,t.v.get())}))}function ds(t){if("string"!=typeof(t=t.email)||!_r.test(t))throw new C("invalid-email")}function vs(t){"email"in t&&ds(t)}function gs(t){if(!t[es]){if(t.mfaPendingCredential)throw new C("multi-factor-auth-required",null,vt(t));throw new C("internal-error")}}function ms(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new C("internal-error")}else{if(!t.sessionInfo)throw new C("missing-verification-id");if(!t.code)throw new C("missing-verification-code")}}Za.prototype.s=function(t,e,n,r,i){var o=this;ts.then((function(){window.gapi.client.setApiKey(o.c);var a=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(a),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Za.prototype.Ab=function(){return au(this,Qs,{})},Za.prototype.Cb=function(t,e){return au(this,zs,{idToken:t,email:e})},Za.prototype.Db=function(t,e){return au(this,Gs,{idToken:t,password:e})};var ys={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function _s(t){if(!t.phoneVerificationInfo)throw new C("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new C("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new C("missing-verification-code")}function bs(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new C("internal-error")}function ws(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(er(t=new Xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function Is(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Yo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Yo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Yo(t)):t.errorMessage&&(e=su(t.errorMessage)),e)throw e;gs(t)}function Ts(t,e){return e.returnIdpCredential=!0,au(t,Xs,e)}function Es(t,e){return e.returnIdpCredential=!0,au(t,Zs,e)}function Ss(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,au(t,Js,e)}function Cs(t){if(!t.oobCode)throw new C("invalid-action-code")}(e=Za.prototype).Eb=function(t,e){var n={idToken:t},r=[];return pt(ys,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),au(this,zs,n)},e.wb=function(t,e){return mt(t={requestType:"PASSWORD_RESET",email:t},e),au(this,Vs,t)},e.xb=function(t,e){return mt(t={requestType:"EMAIL_SIGNIN",email:t},e),au(this,js,t)},e.vb=function(t,e){return mt(t={requestType:"VERIFY_EMAIL",idToken:t},e),au(this,Us,t)},e.Fb=function(t,e,n){return mt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),au(this,qs,t)},e.gb=function(t){return au(this,nu,t)},e.ob=function(t,e){return au(this,Ws,{oobCode:t,newPassword:e})},e.Sa=function(t){return au(this,As,{oobCode:t})},e.kb=function(t){return au(this,ks,{oobCode:t})};var ks={endpoint:"setAccountInfo",A:Cs,Z:"email",B:!0},As={endpoint:"resetPassword",A:Cs,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new C("internal-error")},B:!0},Ns={endpoint:"signupNewUser",A:function(t){if(ds(t),!t.password)throw new C("weak-password")},G:gs,V:!0,B:!0},Rs={endpoint:"createAuthUri",B:!0},xs={endpoint:"deleteAccount",O:["idToken"]},Ps={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new C("internal-error")}},Ds={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ds,G:gs,V:!0,B:!0},Os={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ds,G:gs,V:!0},Ls={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:_s,G:gs,B:!0,Na:!0},Ms={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:_s,G:gs,B:!0,Na:!0},Fs={endpoint:"getAccountInfo"},js={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new C("internal-error");ds(t)},Z:"email",B:!0},Us={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},qs={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new C("internal-error")},Z:"email",B:!0},Vs={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new C("internal-error");ds(t)},Z:"email",B:!0},Bs={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Ks={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new C("internal-error")}},Ws={endpoint:"resetPassword",A:Cs,Z:"email",B:!0},Hs={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},zs={endpoint:"setAccountInfo",O:["idToken"],A:vs,V:!0},Gs={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(vs(t),!t.password)throw new C("weak-password")},G:gs,V:!0},Qs={endpoint:"signupNewUser",G:gs,V:!0,B:!0},$s={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new C("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new C("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Ys={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new C("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new C("internal-error")},B:!0,Na:!0},Xs={endpoint:"verifyAssertion",A:bs,Za:ws,G:Is,V:!0,B:!0},Js={endpoint:"verifyAssertion",A:bs,Za:ws,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new C("user-not-found");if(t.errorMessage)throw su(t.errorMessage);gs(t)},V:!0,B:!0},Zs={endpoint:"verifyAssertion",A:function(t){if(bs(t),!t.idToken)throw new C("internal-error")},Za:ws,G:Is,V:!0},tu={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new C("invalid-custom-token")},G:gs,V:!0,B:!0},eu={endpoint:"verifyPassword",A:function(t){if(ds(t),!t.password)throw new C("wrong-password")},G:gs,V:!0,B:!0},nu={endpoint:"verifyPhoneNumber",A:ms,G:gs,B:!0},ru={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new C("internal-error");ms(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Yo(t);gs(t)}},iu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:ms,G:gs,B:!0},ou={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[es]^!!t.refreshToken)throw new C("internal-error")},B:!0,Na:!0};function au(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Ne(new C("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ae(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),ps(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new C("internal-error");return r[e.Z]}))}function su(t){return uu({error:{errors:[{message:t}],code:400,message:t}})}function uu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new C(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",mt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new C(r[i],e);return!e&&t&&(e=jr(t)),new C("internal-error",e)}function cu(t){this.b=t,this.a=null,this.sb=function(t){return(pu||(pu=new we((function(t,e){function n(){Kr(),Pr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Kr(),e(Error("Network Error"))},timeout:hu.get()})}if(Pr("gapi.iframes.Iframe"))t();else if(Pr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();s[r]=function(){Pr("gapi.load")?n():e(Error("Network Error"))},Ae(za(r=kt(lu,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw pu=null,t})))).then((function(){return new we((function(e,n){Pr("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),fu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var lu=new _t(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),hu=new Wr(3e4,6e4),fu=new Wr(5e3,15e3),pu=null;function du(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,this.g?t=Bn((t=Vn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):t=Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Un(this.a,"apiKey",this.h),Un(this.a,"appName",this.i),this.b=null,this.c=[]}function vu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function gu(t){try{return Oe.app(t).auth().Ga()}catch(t){return[]}}function mu(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function yu(t){var e=fr();return function(t){return au(t,Bs,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=Vn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],a=n,s=r;if(0==o.indexOf("chrome-extension://")?a=Vn(o).a==a&&"chrome-extension"==s:"http"!=s&&"https"!=s?a=!1:yr.test(o)?a=a==o:(o=o.split(".").join("\\."),a=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(a)),a){t=!0;break t}}t=!1}if(!t)throw new Qo(fr())}))}function _u(t){return t.m||(t.m=br().then((function(){if(!t.u){var e=t.c,n=t.i,r=gu(t.b),i=new du(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=J(r||[]),t.u=i.toString()}t.v=new cu(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Wo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ae(n)}return n.status="ERROR",Ae(n)}))}(t)}))),t.m}function bu(t){return t.l||(t.C=t.c?Rr(t.c,gu(t.b)):null,t.l=new Za(t.g,P(t.i),t.C),t.f&&ss(t.l,t.f)),t.l}function wu(t,e,n,r,i,o,a,s,u,c,l,h){return(t=new vu(t,e,n,r,i,h)).l=o,t.g=a,t.i=s,t.b=vt(u||null),t.f=c,t.zb(l).toString()}function Iu(t){if(this.a=t||Oe.INTERNAL.reactNative&&Oe.INTERNAL.reactNative.AsyncStorage,!this.a)throw new C("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function Tu(t){this.b=t,this.a={},this.f=w(this.c,this)}du.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):tr(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):tr(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):tr(this.a.b,"fw"),this.a.toString()},vu.prototype.zb=function(t){return this.h=t,this},vu.prototype.toString=function(){if(this.v){var t=Vn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Un(t,"apiKey",this.s),Un(t,"appName",this.c),Un(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=Oe.app(this.c).auth().la()}catch(t){n=null}for(var r in e.pb=n,Un(t,"providerId",this.a.providerId),e=Ur((n=this.a).Jb))e[r]=e[r].toString();r=n.Qc,e=vt(e);for(var i=0;i<r.length;i++){var o=r[i];o in e&&delete e[o]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),dt(e)||Un(t,"customParameters",jr(e))}if("function"==typeof this.a.Rb&&((n=this.a.Rb()).length&&Un(t,"scopes",n.join(","))),this.l?Un(t,"redirectUrl",this.l):tr(t.b,"redirectUrl"),this.g?Un(t,"eventId",this.g):tr(t.b,"eventId"),this.i?Un(t,"v",this.i):tr(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!qn(t,a)&&Un(t,a,this.b[a]);return this.h?Un(t,"tid",this.h):tr(t.b,"tid"),this.f?Un(t,"eid",this.f):tr(t.b,"eid"),(a=gu(this.c)).length&&Un(t,"fw",a.join(",")),t.toString()},(e=mu.prototype).Pb=function(t,e,n){var r=new C("popup-closed-by-user"),i=new C("web-storage-unsupported"),o=this,a=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return _u(t).then((function(){return function(t,e){return t.sb.then((function(){return new we((function(n){t.a.send(e.type,e,n,Pr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&gr(t),e(i),a=!0)}))})).o((function(){})).then((function(){if(!a)return function(t){return new we((function(e){return function n(){An(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!a)return An(n).then((function(){e(r)}))}))},e.Yb=function(){var t=xr();return!Fr(t)&&!Br(t)},e.Ub=function(){return!1},e.Nb=function(t,e,n,r,i,o,a,s){if(!t)return Ne(new C("popup-blocked"));if(a&&!Fr())return this.ma().o((function(e){gr(t),i(e)})),r(),Ae();this.a||(this.a=yu(bu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw gr(t),i(e),e}));return r(),e})).then((function(){(Bo(n),a)||pr(wu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,s,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},e.Ob=function(t,e,n,r){this.a||(this.a=yu(bu(this)));var i=this;return this.a.then((function(){Bo(e),pr(wu(i.s,i.g,i.b,t,e,fr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},e.ma=function(){var t=this;return _u(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new C("network-request-failed")}))},e.ac=function(){return!0},e.Ea=function(t){this.h.push(t)},e.Ta=function(t){Y(this.h,(function(e){return e==t}))},(e=Iu.prototype).get=function(t){return Ae(this.a.getItem(t)).then((function(t){return t&&qr(t)}))},e.set=function(t,e){return Ae(this.a.setItem(t,jr(e)))},e.U=function(t){return Ae(this.a.removeItem(t))},e.ca=function(){},e.ia=function(){};var Eu,Su=[];function Cu(t,e,n){dt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function ku(t){this.a=t}function Au(t){this.c=t,this.b=!1,this.a=[]}function Nu(t,e,n,r){var i,o,a,s,u=n||{},c=null;if(t.b)return Ne(Error("connection_unavailable"));var l=r?800:50,h="undefined"!=typeof MessageChannel?new MessageChannel:null;return new we((function(n,r){h?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),h.port1.start(),a=setTimeout((function(){r(Error("unsupported_event"))}),l),c={messageChannel:h,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(a),s=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(s),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(a),clearTimeout(s),r(Error("invalid_response"))))}},t.a.push(c),h.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[h.port2])):r(Error("connection_unavailable"))})).then((function(e){return Ru(t,c),e})).o((function(e){throw Ru(t,c),e}))}function Ru(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),Y(t.a,(function(t){return t==e}))}}function xu(){if(!Lu())throw new C("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=s.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Tr()&&self?(this.v=function(){var t=Tr()?self:null;if(W(Su,(function(n){n.b==t&&(e=n)})),!e){var e=new Tu(t);Su.push(e)}return e}(),Cu(this.v,"keyChanged",(function(e,n){return qu(t).then((function(e){return 0<e.length&&W(t.a,(function(t){t(e)})),{keyProcessed:Q(e,n.key)}}))})),Cu(this.v,"ping",(function(){return Ae(["keyChanged"])}))):function(){var t=s.navigator;return t&&t.serviceWorker?Ae().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ae(null)}().then((function(e){(t.h=e)&&(t.g=new Au(new ku(e)),Nu(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&Q(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Pu(t){return new we((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new we((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Pu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Du(t){return t.i||(t.i=Pu(t)),t.i}function Ou(t,e){var n=0;return new we((function r(i,o){Du(t).then(e).then(i).o((function(e){if(!(3<++n))return Du(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Lu(){try{return!!s.indexedDB}catch(t){return!1}}function Mu(t){return t.objectStore("firebaseLocalStorage")}function Fu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function ju(t){return new we((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Uu(t,e){return t.g&&t.h&&function(){var t=s.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Nu(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ae()}function qu(t){return Du(t).then((function(t){var e=Mu(Fu(t,!1));return e.getAll?ju(e.getAll()):new we((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function Vu(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Bu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ae().then((function(){if(Lu()){var t=Vr(),r="__sak"+t;return Eu||(Eu=new xu),(n=Eu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){W(e.a,(function(e){e(t)}))})),t}))}function Ku(){this.a={},this.type="inMemory"}function Wu(){if(!function(){var t="Node"==Er();if(!(t=Hu()||t&&Oe.INTERNAL.node&&Oe.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new C("internal-error","The LocalStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Hu()||Oe.INTERNAL.node.localStorage,this.type="localStorage"}function Hu(){try{var t=s.localStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function zu(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Er();if(!(t=Qu()||t&&Oe.INTERNAL.node&&Oe.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Er())throw new C("internal-error","The SessionStorage compatibility library was not found.");throw new C("web-storage-unsupported")}this.a=Qu()||Oe.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Qu(){try{var t=s.sessionStorage,e=Vr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function $u(){var t={};t.Browser=Ju,t.Node=Zu,t.ReactNative=tc,t.Worker=ec,this.a=t[Er()]}Tu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];W(r,(function(e){i.push(Ae().then((function(){return e(t.origin,t.data.data)})))})),xe(i).then((function(r){var i=[];W(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),W(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},ku.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Au.prototype.close=function(){for(;0<this.a.length;)Ru(this,this.a[0]);this.b=!0},(e=xu.prototype).set=function(t,e){var n=this,r=!1;return Ou(this,(function(e){return ju((e=Mu(Fu(e,!0))).get(t))})).then((function(i){return Ou(n,(function(o){if(o=Mu(Fu(o,!0)),i)return i.value=e,ju(o.put(i));n.b++,r=!0;var a={};return a.fbase_key=t,a.value=e,ju(o.add(a))}))})).then((function(){return n.c[t]=e,Uu(n,t)})).oa((function(){r&&n.b--}))},e.get=function(t){return Ou(this,(function(e){return ju(Mu(Fu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},e.U=function(t){var e=this,n=!1;return Ou(this,(function(r){return n=!0,e.b++,ju(Mu(Fu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Uu(e,t)})).oa((function(){n&&e.b--}))},e.ca=function(t){0==this.a.length&&function(t){function e(){t.f=setTimeout((function(){t.l=qu(t).then((function(e){0<e.length&&W(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}Vu(t),e()}(this),this.a.push(t)},e.ia=function(t){Y(this.a,(function(e){return e==t})),0==this.a.length&&Vu(this)},(e=Bu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},e.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},e.U=function(t){return this.b.then((function(e){return e.U(t)}))},e.ca=function(t){this.a.push(t)},e.ia=function(t){Y(this.a,(function(e){return e==t}))},(e=Ku.prototype).get=function(t){return Ae(this.a[t])},e.set=function(t,e){return this.a[t]=e,Ae()},e.U=function(t){return delete this.a[t],Ae()},e.ca=function(){},e.ia=function(){},(e=Wu.prototype).get=function(t){var e=this;return Ae().then((function(){return qr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return Ae().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},e.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},e.ca=function(t){s.window&&hn(s.window,"storage",t)},e.ia=function(t){s.window&&dn(s.window,"storage",t)},(e=zu.prototype).get=function(){return Ae(null)},e.set=function(){return Ae()},e.U=function(){return Ae()},e.ca=function(){},e.ia=function(){},(e=Gu.prototype).get=function(t){var e=this;return Ae().then((function(){return qr(e.a.getItem(t))}))},e.set=function(t,e){var n=this;return Ae().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},e.U=function(t){var e=this;return Ae().then((function(){e.a.removeItem(t)}))},e.ca=function(){},e.ia=function(){};var Yu,Xu,Ju={F:Wu,cb:Gu},Zu={F:Wu,cb:Gu},tc={F:Iu,cb:zu},ec={F:Wu,cb:zu},nc={rd:"local",NONE:"none",td:"session"};function rc(){var t=!(Br(xr())||!Ir()),e=Fr(),n=Dr();this.m=t,this.h=e,this.l=n,this.a={},Yu||(Yu=new $u),t=Yu;try{this.g=!hr()&&Gr()||!s.indexedDB?new t.a.F:new Bu(Tr()?new Ku:new t.a.F)}catch(t){this.g=new Ku,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Ku}this.v=new Ku,this.f=w(this.Zb,this),this.b={}}function ic(){return Xu||(Xu=new rc),Xu}function oc(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function ac(t,e){return"firebase:"+t.name+(e?":"+e:"")}function sc(t,e,n){return n=ac(e,n),"local"==e.F&&(t.b[n]=null),oc(t,e.F).U(n)}function uc(t){t.c&&(clearInterval(t.c),t.c=null)}function cc(t){this.a=t,this.b=ic()}(e=rc.prototype).get=function(t,e){return oc(this,t.F).get(ac(t,e))},e.set=function(t,e,n){var r=ac(t,n),i=this,o=oc(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},e.addListener=function(t,e,n){t=ac(t,e),this.l&&(this.b[t]=s.localStorage.getItem(t)),dt(this.a)&&(oc(this,"local").ca(this.f),this.h||(hr()||!Gr())&&s.indexedDB||!this.l||function(t){uc(t),t.c=setInterval((function(){for(var e in t.a){var n=s.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ze({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},e.removeListener=function(t,e,n){t=ac(t,e),this.a[t]&&(Y(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),dt(this.a)&&(oc(this,"local").ia(this.f),uc(this))},e.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=s.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?oc(this,"local").ia(this.f):uc(this),this.m)if(n=s.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?s.localStorage.setItem(e,r):s.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===s.localStorage.getItem(e)||(o.b[e]=s.localStorage.getItem(e),o.nb(e))},Qt&&se&&10==se&&s.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else W(t,w(this.nb,this))},e.nb=function(t){this.a[t]&&W(this.a[t],(function(t){t()}))};var lc,hc={name:"authEvent",F:"local"};function fc(){this.a=ic()}function pc(t,e){this.b=dc,this.f=s.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=s.Int32Array?new Int32Array(64):Array(64),void 0===lc&&(lc=s.Int32Array?new Int32Array(wc):wc),this.reset()}E(pc,(function(){this.b=-1}));for(var dc=64,vc=dc-1,gc=[],mc=0;mc<vc;mc++)gc[mc]=0;var yc=X(128,gc);function _c(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,a=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+a|0}r=0|t.a[0],i=0|t.a[1];var s=0|t.a[2],u=0|t.a[3],c=0|t.a[4],l=0|t.a[5],h=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&s^i&s)|0;a=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((a=(a=c&l^~c&h)+(0|lc[e])|0)+(0|n[e])|0)|0,o=h,h=l,l=c,c=u+a|0,u=s,s=i,i=r,r=a+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+s|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+l|0,t.a[6]=t.a[6]+h|0,t.a[7]=t.a[7]+o|0}function bc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(_c(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(_c(t),i=0)}}t.c=i,t.g+=n}pc.prototype.reset=function(){this.g=this.c=0,this.a=s.Int32Array?new Int32Array(this.h):J(this.h)};var wc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ic(){pc.call(this,8,Tc)}E(Ic,pc);var Tc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function Ec(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new fc,this.g=new cc(this.h),this.f=null,this.b=[],this.a=this.c=null}function Sc(t){return new C("invalid-cordova-configuration",t)}function Cc(t){var e=new Ic;bc(e,t),t=[];var n=8*e.g;56>e.c?bc(e,yc,56-e.c):bc(e,yc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(_c(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}function kc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Ac(t){return t.f||(t.f=t.ma().then((function(){return new we((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Nc(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=so(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=qr(qn(o=Vn(i),"firebaseError")||null))?k(o):null)?new Ko(r.c,r.b,null,null,o,null,r.T()):new Ko(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}kc(t,i)}))}var n=new Ko("unknown",null,null,null,new C("no-auth-event")),r=!1,i=An(500).then((function(){return Nc(t).then((function(){r||kc(t,n)}))})),o=s.handleOpenURL;s.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Pr("BuildInfo.packageName",s).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Go||(Go=new Ho),function(t){var e=Go;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Pr("universalLinks.subscribe",s))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Nc(t){var e=null;return function(t){return t.b.get(hc,t.a).then((function(t){return Wo(t)}))}(t.g).then((function(n){return e=n,sc((n=t.g).b,hc,n.a)})).then((function(){return e}))}function Rc(t){this.a=t,this.b=ic()}(e=Ec.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?br().then((function(){return new we((function(t,e){var n=s.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ne(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Pr("universalLinks.subscribe",s))throw Sc("cordova-universal-links-plugin-fix is not installed");if(void 0===Pr("BuildInfo.packageName",s))throw Sc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Pr("cordova.plugins.browsertab.openUrl",s))throw Sc("cordova-plugin-browsertab is not installed");if("function"!=typeof Pr("cordova.InAppBrowser.open",s))throw Sc("cordova-plugin-inappbrowser is not installed")}),(function(){throw new C("cordova-not-ready")}))},e.Pb=function(t,e){return e(new C("operation-not-supported-in-this-environment")),Ae()},e.Nb=function(){return Ne(new C("operation-not-supported-in-this-environment"))},e.ac=function(){return!1},e.Yb=function(){return!0},e.Ub=function(){return!0},e.Ob=function(t,e,n,r){if(this.c)return Ne(new C("redirect-operation-pending"));var i=this,o=s.document,a=null,u=null,c=null,l=null;return this.c=Ae().then((function(){return Bo(e),Ac(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),a=new Ko(e,r,null,o,new C("no-auth-event"),null,i),u=Pr("BuildInfo.packageName",s);if("string"!=typeof u)throw new C("invalid-cordova-configuration");var c=Pr("BuildInfo.displayName",s),l={};if(xr().toLowerCase().match(/iphone|ipad|ipod/))l.ibi=u;else{if(!xr().toLowerCase().match(/android/))return Ne(new C("operation-not-supported-in-this-environment"));l.apn=u}c&&(l.appDisplayName=c),o=Cc(o),l.sessionId=o;var h=wu(t.v,t.i,t.l,e,n,null,r,t.m,l,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(hc,a.w(),e)})).then((function(){var e=Pr("cordova.plugins.browsertab.isAvailable",s);if("function"!=typeof e)throw new C("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Pr("cordova.plugins.browsertab.openUrl",s)))throw new C("invalid-cordova-configuration");n(h)}else{if("function"!=typeof(n=Pr("cordova.InAppBrowser.open",s)))throw new C("invalid-cordova-configuration");e=xr(),t.a=n(h,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new we((function(t,e){u=function(){var e=Pr("cordova.plugins.browsertab.close",s);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){a||(a=An(2e3).then((function(){e(new C("redirect-cancelled-by-user"))})))},l=function(){Hr()&&c()},o.addEventListener("resume",c,!1),xr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",l,!1)})).o((function(t){return Nc(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),l&&o.removeEventListener("visibilitychange",l,!1),a&&a.cancel(),u&&i.Ta(u),i.c=null}))},e.Ea=function(t){this.b.push(t),Ac(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Ko("unknown",null,null,null,new C("no-auth-event")),t(e))}))},e.Ta=function(t){Y(this.b,(function(e){return e==t}))};var xc={name:"pendingRedirect",F:"session"};function Pc(t){return sc(t.b,xc,t.a)}function Dc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=w(this.s,this),this.b=new Qc,this.C=new Zc,this.g=new Rc(zc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Oc(this.D,this.v,this.m,A,this.J)}function Oc(t,e,n,r,i){var o=Oe.SDK_VERSION||null;return wr()?new Ec(t,e,n,o,r,i):new mu(t,e,n,o,r,i)}function Lc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Mc(t){t.a.Yb()&&Lc(t).o((function(e){var n=new Ko("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Bc(e)&&t.s(n)})),t.a.Ub()||$c(t.b)}function Fc(t,e){Q(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(xc,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?Pc(t.g).then((function(){Lc(t).o((function(e){var n=new Ko("unknown",null,null,null,new C("operation-not-supported-in-this-environment"));Bc(e)&&t.s(n)}))})):Mc(t)})).o((function(){Mc(t)}))}function jc(t,e){Y(t.h,(function(t){return t==e}))}Dc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Oc(this.D,this.v,this.m,null,this.J),this.i={}},Dc.prototype.s=function(t){if(!t)throw new C("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return $c(this.b),e};var Uc=new Wr(2e3,1e4),qc=new Wr(3e4,6e4);function Vc(t,e,n,r,i,o,a){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,a)}function Bc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Kc(t,e,n,r,i){var o;return function(t){return t.b.set(xc,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(Bc(e))throw new C("operation-not-supported-in-this-environment");return o=e,Pc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new we((function(){})):Pc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Wc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Uc.get())}Dc.prototype.ra=function(){return this.b.ra()};var Hc={};function zc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Gc(t,e,n,r){var i=zc(e,n,r);return Hc[i]||(Hc[i]=new Dc(t,e,n,r)),Hc[i]}function Qc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function $c(t){t.g||(t.g=!0,Jc(t,!1,null,null))}function Yc(t){t.g&&!t.i&&Jc(t,!1,null,null)}function Xc(t,e){if(t.b=function(){return Ae(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Jc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ne(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Xc(t,n):Xc(t,{user:null}),t.f=[],t.c=[]}function Zc(){}function tl(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function el(t,e){this.a=e,Jr(this,"verificationId",t)}function nl(t,e,n,r){return new Uo(t).gb(e,n).then((function(t){return new el(t,r)}))}function rl(t){var e=Gi(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new C("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Zr(this,{token:t,expirationTime:zr(1e3*e.exp),authTime:zr(1e3*e.auth_time),issuedAtTime:zr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function il(t,e,n){var r=e&&e[al];if(!r)throw new C("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=vt(e),this.g=n,this.c=new uo(null,r),this.b=[];var i=this;W(e[ol]||[],(function(t){(t=ri(t))&&i.b.push(t)})),Jr(this,"auth",this.a),Jr(this,"session",this.c),Jr(this,"hints",this.b)}Qc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Qc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Jc(this,!0,null,t.a),Ae()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,a=e.T(),s=!!e.c.match(/Redirect$/);n(r,i,a,o).then((function(e){Jc(t,s,e,null)})).o((function(e){Jc(t,s,null,e)}))}(this,t,e):Ne(new C("invalid-auth-event")):(Jc(this,!1,null,null),Ae())}else Ne(new C("invalid-auth-event"))},Qc.prototype.ra=function(){var t=this;return new we((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new C("timeout");t.a&&t.a.cancel(),t.a=An(qc.get()).then((function(){t.b||(t.g=!0,Jc(t,!0,null,e))}))}(t))}))},Zc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ae()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ne(new C("invalid-auth-event"))}else Ne(new C("invalid-auth-event"))},el.prototype.confirm=function(t){return t=qo(this.verificationId,t),this.a(t)};var ol="mfaInfo",al="mfaPendingCredential";function sl(t,e,n,r){C.call(this,"multi-factor-auth-required",r,e),this.b=new il(t,e,n),Jr(this,"resolver",this.b)}function ul(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new sl(e,t.serverResponse,n,t.message)}catch(t){}return null}function cl(){}function ll(t){Jr(this,"factorId",t.fa),this.a=t}function hl(t){if(ll.call(this,t),this.a.fa!=Uo.PROVIDER_ID)throw new C("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function fl(t,e){for(var n in Je.call(this,t),e)this[n]=e[n]}function pl(t,e){this.a=t,this.b=[],this.c=w(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&W(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[ai]=t.uid),t.displayName&&(r[ii]=t.displayName),t.enrollmentTime&&(r[oi]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ui(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),dl(this,n)}function dl(t,e){t.b=e,Jr(t,"enrolledFactors",e)}function vl(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function gl(t,e){t.stop(),t.b=An(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=s.document,e=null;return Hr()||!t?Ae():new we((function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){gl(t,!0)})).o((function(e){t.i(e)&&gl(t,!1)}))}function ml(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function yl(t,e){void 0===e&&(t.b?e=(e=t.b).a-e.g:e=0),t.c=Date.now()+1e3*e}function _l(t,e){t.b=zi(e[es]||""),t.a=e.refreshToken,yl(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function bl(t,e){return function(t,e){return new we((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?ls(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(uu(t)):t.access_token&&t.refresh_token?n(t):r(new C("internal-error")):r(new C("network-request-failed"))}),"POST",Zn(e).toString(),t.g,t.m.get()):r(new C("internal-error"))}))}(t.f,e).then((function(e){return t.b=zi(e.access_token),t.a=e.refresh_token,yl(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}function wl(t,e){this.a=t||null,this.b=e||null,Zr(this,{lastSignInTime:zr(e||null),creationTime:zr(t||null)})}function Il(t,e,n,r,i,o){Zr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function Tl(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var r=Oe.SDK_VERSION?Rr(Oe.SDK_VERSION):null;this.a=new Za(this.l,P(A),r),(this.u=t.emulatorConfig||null)&&ss(this.a,this.u),this.h=new ml(this.a),Pl(this,e[es]),_l(this.h,e),Jr(this,"refreshToken",this.h.a),Ll(this,n||{}),Tn.call(this),this.P=!1,this.s&&Or()&&(this.b=Gc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new vl((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=w(this.ib,this);var i=this;this.za=null,this.Pa=function(t){i.xa(t.h)},this.qa=null,this.Ba=function(t){El(i,t.c)},this.$=null,this.aa=[],this.Oa=function(t){kl(i,t.f)},this.ja=null,this.S=new pl(this,n),Jr(this,"multiFactor",this.S)}function El(t,e){t.u=e,ss(t.a,e),t.b&&(e=t.b,t.b=Gc(t.s,t.l,t.m,t.u),t.P&&(jc(e,t),Fc(t.b,t)))}function Sl(t,e){t.qa&&dn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&hn(e,"languageCodeChanged",t.Pa)}function Cl(t,e){t.$&&dn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&hn(e,"emulatorConfigChanged",t.Ba)}function kl(t,e){t.aa=e,cs(t.a,Oe.SDK_VERSION?Rr(Oe.SDK_VERSION,t.aa):null)}function Al(t,e){t.ja&&dn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&hn(e,"frameworkChanged",t.Oa)}function Nl(t){try{return Oe.app(t.m).auth()}catch(e){throw new C("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Rl(t){t.J||t.D.b||(t.D.start(),dn(t,"tokenChanged",t.ba),hn(t,"tokenChanged",t.ba))}function xl(t){dn(t,"tokenChanged",t.ba),t.D.stop()}function Pl(t,e){t.Aa=e,Jr(t,"_lat",e)}function Dl(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return xe(e).then((function(){return t}))}function Ol(t){t.b&&!t.P&&(t.P=!0,Fc(t.b,t))}function Ll(t,e){Zr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new wl(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Ml(){}function Fl(t){return Ae().then((function(){if(t.J)throw new C("app-deleted")}))}function jl(t){return z(t.providerData,(function(t){return t.providerId}))}function Ul(t,e){e&&(ql(t,e.providerId),t.providerData.push(e))}function ql(t,e){Y(t.providerData,(function(t){return t.providerId==e}))}function Vl(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Jr(t,e,n)}function Bl(t,e){t!=e&&(Zr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Jr(t,"metadata",function(t){return new wl(t.a,t.b)}(e.metadata)):Jr(t,"metadata",new wl),W(e.providerData,(function(e){Ul(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Jr(t,"refreshToken",t.h.a),dl(t.S,e.S.b))}function Kl(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return au(t.a,Fs,{idToken:e}).then(w(t.Kc,t))}(t,e).then((function(){return n||Vl(t,"isAnonymous",!1),e}))}))}function Wl(t,e){e[es]&&t.Aa!=e[es]&&(_l(t.h,e),t.dispatchEvent(new fl("tokenChanged")),Pl(t,e[es]),Vl(t,"refreshToken",t.h.a))}function Hl(t,e){return Kl(t).then((function(){if(Q(jl(t),e))return Dl(t).then((function(){throw new C("provider-already-linked")}))}))}function zl(t,e,n){return ti({user:t,credential:Vo(e),additionalUserInfo:e=Ji(e),operationType:n})}function Gl(t,e){return Wl(t,e),t.reload().then((function(){return t}))}function Ql(t,e,n,r,i){if(!Or())return Ne(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ne(t.i);var o=Xi(n.providerId),a=Vr(t.uid+":::"),s=null;(!Fr()||Ir())&&t.s&&n.isOAuthProvider&&(s=wu(t.s,t.l,t.m,e,n,null,a,Oe.SDK_VERSION||null,null,null,t.tenantId,t.u));var u=mr(s,o&&o.va,o&&o.ua);return r=r().then((function(){if(Yl(t),!i)return t.I().then((function(){}))})).then((function(){return Vc(t.b,u,e,n,a,!!s,t.tenantId)})).then((function(){return new we((function(n,r){t.na(e,null,new C("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Wc(t.b,t,e,u,a)}))})).then((function(t){return u&&gr(u),t?ti(t):null})).o((function(t){throw u&&gr(u),t})),Xl(t,r,i)}function $l(t,e,n,r,i){if(!Or())return Ne(new C("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ne(t.i);var o=null,a=Vr(t.uid+":::");return r=r().then((function(){if(Yl(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=a,Dl(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(th,t.w(),e.a)),e})).then((function(){return Kc(t.b,e,n,a,t.tenantId)})).o((function(e){if(o=e,t.ha)return eh(t.ha);throw o})).then((function(){if(o)throw o})),Xl(t,r,i)}function Yl(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new C("internal-error");throw new C("auth-domain-config-required")}}function Xl(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ne(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new fl("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){$(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ul(e.w(),Nl(t),w(t.jc,t))),n||e}))}function Jl(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[es]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new Tl(e,n,t);return t.providerData&&W(t.providerData,(function(t){t&&Ul(i,ti(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Zl(t){this.a=t,this.b=ic()}il.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=vt(e.f);return delete n[ol],delete n[al],mt(n,t),e.g(n)}))},E(sl,C),cl.prototype.tb=function(t,e,n){return e.type==co?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),mt(n,{phoneVerificationInfo:jo(t.a)}),au(e,Ls,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return mt(n={mfaPendingCredential:n},{phoneVerificationInfo:jo(t.a)}),au(e,Ms,n)}))}(this,t,e)},E(ll,cl),E(hl,ll),E(fl,Je),(e=pl.prototype).yc=function(t){dl(this,function(t){var e=[];return W(t.mfaInfo||[],(function(t){(t=ri(t))&&e.push(t)})),e}(t.hd))},e.Sb=function(){return this.a.I().then((function(t){return new uo(t,null)}))},e.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Wl(n.a,t),n.a.reload()}))},e.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return au(r,ou,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=H(e.b,(function(t){return t.uid!=n}));return dl(e,r),Wl(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},e.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},vl.prototype.start=function(){this.a=this.c,gl(this,!0)},vl.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ml.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},ml.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ne(new C("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?bl(this,{grant_type:"refresh_token",refresh_token:this.a}):Ae(null):Ae({accessToken:this.b.toString(),refreshToken:this.a})},wl.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(Tl,Tn),Tl.prototype.xa=function(t){this.za=t,as(this.a,t)},Tl.prototype.la=function(){return this.za},Tl.prototype.Ga=function(){return J(this.aa)},Tl.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Jr(Tl.prototype,"providerId","firebase"),(e=Tl.prototype).reload=function(){var t=this;return Xl(this,Fl(this).then((function(){return Kl(t).then((function(){return Dl(t)})).then(Ml)})))},e.oc=function(t){return this.I(t).then((function(t){return new rl(t)}))},e.I=function(t){var e=this;return Xl(this,Fl(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new C("internal-error");return t.accessToken!=e.Aa&&(Pl(e,t.accessToken),e.dispatchEvent(new fl("tokenChanged"))),Vl(e,"refreshToken",t.refreshToken),t.accessToken})))},e.Kc=function(t){if(!(t=t.users)||!t.length)throw new C("internal-error");Ll(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new Il(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)Ul(this,e[n]);Vl(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new fl("userReloaded",{hd:t}))},e.Lc=function(t){return Yr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},e.ub=function(t){var e=this,n=null;return Xl(this,t.c(this.a,this.uid).then((function(t){return Wl(e,t),n=zl(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},e.Cc=function(t){return Yr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},e.rb=function(t){var e=this,n=null;return Xl(this,Hl(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=zl(e,t,"link"),Gl(e,t)})).then((function(){return n})))},e.Dc=function(t,e){var n=this;return Xl(this,Hl(this,"phone").then((function(){return nl(Nl(n),t,e,w(n.rb,n))})))},e.Mc=function(t,e){var n=this;return Xl(this,Ae().then((function(){return nl(Nl(n),t,e,w(n.ub,n))})),!0)},e.Cb=function(t){var e=this;return Xl(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Wl(e,t),e.reload()})))},e.ed=function(t){var e=this;return Xl(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Wl(e,t),e.reload()})))},e.Db=function(t){var e=this;return Xl(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Wl(e,t),e.reload()})))},e.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Fl(this);var e=this;return Xl(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Wl(e,t),Vl(e,"displayName",t.displayName||null),Vl(e,"photoURL",t.photoUrl||null),W(e.providerData,(function(t){"password"===t.providerId&&(Jr(t,"displayName",e.displayName),Jr(t,"photoURL",e.photoURL))})),Dl(e)})).then(Ml))},e.cd=function(t){var e=this;return Xl(this,Kl(this).then((function(n){return Q(jl(e),t)?function(t,e,n){return au(t,Ps,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return W(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),W(jl(e),(function(t){n[t]||ql(e,t)})),n[Uo.PROVIDER_ID]||Jr(e,"phoneNumber",null),Dl(e)})):Dl(e).then((function(){throw new C("no-such-provider")}))})))},e.delete=function(){var t=this;return Xl(this,this.I().then((function(e){return au(t.a,xs,{idToken:e})})).then((function(){t.dispatchEvent(new fl("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");Sl(t,null),Cl(t,null),Al(t,null),t.N=[],t.J=!0,xl(t),Jr(t,"refreshToken",null),t.b&&jc(t.b,t)}))},e.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},e.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?w(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?w(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?w(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?w(this.Mb,this):null},e.Ec=function(t){var e=this;return Ql(this,"linkViaPopup",t,(function(){return Hl(e,t.providerId).then((function(){return Dl(e)}))}),!1)},e.Nc=function(t){return Ql(this,"reauthViaPopup",t,(function(){return Ae()}),!0)},e.Fc=function(t){var e=this;return $l(this,"linkViaRedirect",t,(function(){return Hl(e,t.providerId)}),!1)},e.Oc=function(t){return $l(this,"reauthViaRedirect",t,(function(){return Ae()}),!0)},e.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Xl(this,this.I().then((function(n){return Es(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=zl(i,t,"link"),Gl(i,t)})).then((function(){return o})))},e.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Xl(this,Ae().then((function(){return fo(Ss(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=zl(i,t,"reauthenticate"),Wl(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},e.vb=function(t){var e=this,n=null;return Xl(this,this.I().then((function(e){return n=e,void 0===t||dt(t)?{}:Bi(new Pi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},e.Fb=function(t,e){var n=this,r=null;return Xl(this,this.I().then((function(t){return r=t,void 0===e||dt(e)?{}:Bi(new Pi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},e.jc=function(t){var e=null,n=this;return Xl(this,t=fo(Ae(t),n.uid).then((function(t){return e=zl(n,t,"reauthenticate"),Wl(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},e.toJSON=function(){return this.w()},e.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&mt(t,this.metadata.w()),W(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),mt(t,this.S.w()),t};var th={name:"redirectUser",F:"session"};function eh(t){return sc(t.b,th,t.a)}function nh(t){this.a=t,this.b=ic(),this.c=null,this.f=function(t){var e=oh("local"),n=oh("session"),r=oh("none");return function(t,e,n){var r=ac(e,n),i=oc(t,e.F);return t.get(e,n).then((function(o){var a=null;try{a=qr(s.localStorage.getItem(r))}catch(t){}if(a&&!o)return s.localStorage.removeItem(r),t.set(e,a,n);a&&o&&"localStorage"!=i.type&&s.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(ih,t.a).then((function(t){return t?oh(t):e}))}))}))})).then((function(e){return t.c=e,rh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(oh("local"),this.a,w(this.g,this))}function rh(t,e){var n,r=[];for(n in nc)nc[n]!==e&&r.push(sc(t.b,oh(nc[n]),t.a));return r.push(sc(t.b,ih,t.a)),function(t){return new we((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},a=function(t){n(t)},s=0;s<t.length;s++)Re(t[s],I(o,s),a);else e(i)}))}(r)}nh.prototype.g=function(){var t=this,e=oh("local");ch(this,(function(){return Ae().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return rh(t,"local").then((function(){t.c=e}))}))}))};var ih={name:"persistence",F:"session"};function oh(t){return{name:"authUser",F:t}}function ah(t,e){return ch(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function sh(t){return ch(t,(function(){return sc(t.b,t.c,t.a)}))}function uh(t,e,n){return ch(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Jl(t||{})}))}))}function ch(t,e){return t.f=t.f.then(e,e),t.f}function lh(t){if(this.l=!1,Jr(this,"settings",new tl),Jr(this,"app",t),!_h(this).options||!_h(this).options.apiKey)throw new C("invalid-api-key");t=Oe.SDK_VERSION?Rr(Oe.SDK_VERSION):null,this.a=new Za(_h(this).options&&_h(this).options.apiKey,P(A),t),this.P=[],this.s=[],this.N=[],this.Pa=Oe.INTERNAL.createSubscribe(w(this.zc,this)),this.W=void 0,this.ib=Oe.INTERNAL.createSubscribe(w(this.Ac,this)),mh(this,null),this.i=new nh(_h(this).options.apiKey+":"+_h(this).name),this.D=new Zl(_h(this).options.apiKey+":"+_h(this).name),this.$=Th(this,function(t){var e=_h(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(th,t.a).then((function(t){return t&&e&&(t.authDomain=e),Jl(t||{})}))}(t.D,_h(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),eh(t.D)}));return Th(t,e)}(t).then((function(){return uh(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return ah(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:sh(t.i)}))):null})).then((function(e){mh(t,e||null)}));return Th(t,n)}(this)),this.h=Th(this,function(t){return t.$.then((function(){return vh(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(oh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=w(this.Zc,this),this.Ba=w(this.da,this),this.qa=w(this.mc,this),this.za=w(this.wc,this),this.Aa=w(this.xc,this),this.b=null,function(t){var e=_h(t).options.authDomain,n=_h(t).options.apiKey;e&&Or()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Gc(e,n,_h(t).name,t.R),Fc(t.b,t),bh(t)&&Ol(bh(t)),t.m){Ol(t.m);var r=t.m;r.xa(t.la()),Sl(r,t),kl(r=t.m,t.J),Al(r,t),El(r=t.m,t.R),Cl(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=w(this.delete,this),this.INTERNAL.logFramework=w(this.Gc,this),this.u=0,Tn.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=Vn(this.R.url);t=ti({protocol:t.c,host:t.a,port:t.g,options:ti({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function hh(t){Je.call(this,"languageCodeChanged"),this.h=t}function fh(t){Je.call(this,"emulatorConfigChanged"),this.c=t}function ph(t){Je.call(this,"frameworkChanged"),this.f=t}function dh(t){return t.Oa||Ne(new C("auth-domain-config-required"))}function vh(t){if(!Or())return Ne(new C("operation-not-supported-in-this-environment"));var e=dh(t).then((function(){return t.b.ra()})).then((function(t){return t?ti(t):null}));return Th(t,e)}function gh(t,e){var n={};return n.apiKey=_h(t).options.apiKey,n.authDomain=_h(t).options.authDomain,n.appName=_h(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new Tl(t,e);return n&&(i.ha=n),r&&kl(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return bh(t)&&e.uid==bh(t).uid?(Bl(bh(t),e),t.da(e)):(mh(t,e),Ol(e),t.da(e))})).then((function(){Ih(t)}))}function mh(t,e){bh(t)&&(function(t,e){Y(t.W,(function(t){return t==e}))}(bh(t),t.Ba),dn(bh(t),"tokenChanged",t.qa),dn(bh(t),"userDeleted",t.za),dn(bh(t),"userInvalidated",t.Aa),xl(bh(t))),e&&(e.W.push(t.Ba),hn(e,"tokenChanged",t.qa),hn(e,"userDeleted",t.za),hn(e,"userInvalidated",t.Aa),0<t.u&&Rl(e)),Jr(t,"currentUser",e),e&&(e.xa(t.la()),Sl(e,t),kl(e,t.J),Al(e,t),El(e,t.R),Cl(e,t))}function yh(t,e){var n=null,r=null;return Th(t,e.then((function(e){return n=Vo(e),r=Ji(e),gh(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=ul(e.w(),t,w(t.kc,t))),n||e})).then((function(){return ti({user:bh(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function _h(t){return t.app}function bh(t){return t.currentUser}function wh(t){return bh(t)&&bh(t)._lat||null}function Ih(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](wh(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](wh(t))}}function Th(t,e){return t.P.push(e),e.oa((function(){$(t.P,e)})),e}function Eh(){}function Sh(){this.a={},this.b=1e12}nh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new C("invalid-persistence-type"),n=new C("unsupported-persistence-type");t:{for(r in nc)if(nc[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Er()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Lu()&&"none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),ch(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,rh(n,t)})).then((function(){if(n.c=oh(t),e)return n.b.set(n.c,e,n.a)})):Ae()}))},E(lh,Tn),E(hh,Je),E(fh,Je),E(ph,Je),(e=lh.prototype).yb=function(t){return Th(this,t=this.i.yb(t))},e.xa=function(t){this.aa===t||this.l||(this.aa=t,as(this.a,this.aa),this.dispatchEvent(new hh(this.la())))},e.la=function(){return this.aa},e.fd=function(){var t=s.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},e.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new C("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),s.document&&!t&&br().then((function(){var t=s.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),s.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ss(this.a,this.R),this.dispatchEvent(new fh(this.R))}},e.Gc=function(t){this.J.push(t),cs(this.a,Oe.SDK_VERSION?Rr(Oe.SDK_VERSION,this.J):null),this.dispatchEvent(new ph(this.J))},e.Ga=function(){return J(this.J)},e.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},e.T=function(){return this.S},e.toJSON=function(){return{apiKey:_h(this).options.apiKey,authDomain:_h(this).options.authDomain,appName:_h(this).name,currentUser:bh(this)&&bh(this).w()}},e.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},e.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},e.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?w(this.ic,this):null},e.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return yh(i,Ts(i.a,o))}))},e.Xc=function(t){if(!Or())return Ne(new C("operation-not-supported-in-this-environment"));var e=this,n=Xi(t.providerId),r=Vr(),i=null;(!Fr()||Ir())&&_h(this).options.authDomain&&t.isOAuthProvider&&(i=wu(_h(this).options.authDomain,_h(this).options.apiKey,_h(this).name,"signInViaPopup",t,null,r,Oe.SDK_VERSION||null,null,null,this.T(),this.R));var o=mr(i,n&&n.va,n&&n.ua);return Th(this,n=dh(this).then((function(n){return Vc(n,o,"signInViaPopup",t,r,!!i,e.T())})).then((function(){return new we((function(t,n){e.na("signInViaPopup",null,new C("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=r,e.c=Wc(e.b,e,"signInViaPopup",o,r)}))})).then((function(t){return o&&gr(o),t?ti(t):null})).o((function(t){throw o&&gr(o),t})))},e.Yc=function(t){if(!Or())return Ne(new C("operation-not-supported-in-this-environment"));var e=this,n=dh(this).then((function(){return function(t){return ch(t,(function(){return t.b.set(ih,t.c.F,t.a)}))}(e.i)})).then((function(){return Kc(e.b,"signInViaRedirect",t,void 0,e.T())}));return Th(this,n)},e.ra=function(){var t=this;return vh(this).then((function(e){return t.b&&Yc(t.b.b),e})).o((function(e){throw t.b&&Yc(t.b.b),e}))},e.dd=function(t){if(!t)return Ne(new C("null-user"));if(this.S!=t.tenantId)return Ne(new C("tenant-id-mismatch"));var e=this,n={};n.apiKey=_h(this).options.apiKey,n.authDomain=_h(this).options.authDomain,n.appName=_h(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[es]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new Tl(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&kl(e,r),Bl(e,t),e}(t,n,e.D,e.Ga());return Th(this,this.h.then((function(){if(_h(e).options.apiKey!=t.l)return r.reload()})).then((function(){return bh(e)&&t.uid==bh(e).uid?(Bl(bh(e),t),e.da(t)):(mh(e,r),Ol(r),e.da(r))})).then((function(){Ih(e)})))},e.Bb=function(){var t=this;return Th(this,this.h.then((function(){return t.b&&Yc(t.b.b),bh(t)?(mh(t,null),sh(t.i).then((function(){Ih(t)}))):Ae()})))},e.Zc=function(){var t=this;return uh(this.i,_h(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=bh(t)&&e){n=bh(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Bl(bh(t),e),bh(t).I();(bh(t)||e)&&(mh(t,e),e&&(Ol(e),e.ha=t.D),t.b&&Fc(t.b,t),Ih(t))}}))},e.da=function(t){return ah(this.i,t)},e.mc=function(){Ih(this),this.da(bh(this))},e.wc=function(){this.Bb()},e.xc=function(){this.Bb()},e.kc=function(t){var e=this;return this.h.then((function(){return yh(e,Ae(t))}))},e.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(bh(e))}))},e.Ac=function(t){var e=this;!function(t,e){t.N.push(e),Th(t,t.h.then((function(){!t.l&&Q(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(wh(t)))})))}(this,(function(){t.next(bh(e))}))},e.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(bh(r)):"function"==typeof t.next&&t.next(bh(r))})),this.Pa(t,e,n)},e.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(bh(r)):"function"==typeof t.next&&t.next(bh(r))})),this.ib(t,e,n)},e.nc=function(t){var e=this;return Th(this,this.h.then((function(){return bh(e)?bh(e).I(t).then((function(t){return{accessToken:t}})):null})))},e.Tc=function(t){var e=this;return this.h.then((function(){return yh(e,au(e.a,tu,{token:t}))})).then((function(t){var n=t.user;return Vl(n,"isAnonymous",!1),e.da(n),t}))},e.Uc=function(t,e){var n=this;return this.h.then((function(){return yh(n,au(n.a,eu,{email:t,password:e}))}))},e.dc=function(t,e){var n=this;return this.h.then((function(){return yh(n,au(n.a,Ns,{email:t,password:e}))}))},e.ab=function(t){var e=this;return this.h.then((function(){return yh(e,t.ka(e.a))}))},e.Sc=function(t){return Yr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},e.Ab=function(){var t=this;return this.h.then((function(){var e=bh(t);if(e&&e.isAnonymous){var n=ti({providerId:null,isNewUser:!1});return ti({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return yh(t,t.a.Ab()).then((function(e){var n=e.user;return Vl(n,"isAnonymous",!0),t.da(n),e}))}))},e.getUid=function(){return bh(this)&&bh(this).uid||null},e.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&bh(this)&&Rl(bh(this))},e.Pc=function(t){var e=this;W(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&bh(this)&&xl(bh(this)),this.removeAuthTokenListener(t)},e.addAuthTokenListener=function(t){var e=this;this.s.push(t),Th(this,this.h.then((function(){e.l||Q(e.s,t)&&t(wh(e))})))},e.removeAuthTokenListener=function(t){Y(this.s,(function(e){return e==t}))},e.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(oh("local"),t.a,this.ja),this.b&&(jc(this.b,this),Yc(this.b.b)),Promise.resolve()},e.hc=function(t){return Th(this,function(t,e){return au(t,Rs,{identifier:e,continueUri:Lr()?fr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},e.Bc=function(t){return!!Lo(t)},e.xb=function(t,e){var n=this;return Th(this,Ae().then((function(){var t=new Pi(e);if(!t.c)throw new C("argument-error",Li+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},e.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},e.ob=function(t,e){return Th(this,this.a.ob(t,e).then((function(){})))},e.Sa=function(t){return Th(this,this.a.Sa(t).then((function(t){return new ci(t)})))},e.kb=function(t){return Th(this,this.a.kb(t).then((function(){})))},e.wb=function(t,e){var n=this;return Th(this,Ae().then((function(){return void 0===e||dt(e)?{}:Bi(new Pi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},e.Wc=function(t,e){return Th(this,nl(this,t,e,w(this.ab,this)))},e.Vc=function(t,e){var n=this;return Th(this,Ae().then((function(){var r=e||fr(),i=Oo(t,r);if(!(r=Lo(r)))throw new C("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new C("tenant-id-mismatch");return n.ab(i)})))},Eh.prototype.render=function(){},Eh.prototype.reset=function(){},Eh.prototype.getResponse=function(){},Eh.prototype.execute=function(){};var Ch=null;function kh(t,e){return(e=Ah(e))&&t.a[e]||null}function Ah(t){return(t=void 0===t?1e12:t)?t.toString():null}function Nh(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ce(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function Rh(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function xh(){}function Ph(){}Sh.prototype.render=function(t,e){return this.a[this.b.toString()]=new Nh(t,e),this.b++},Sh.prototype.reset=function(t){var e=kh(this,t);t=Ah(t),e&&t&&(e.delete(),delete this.a[t])},Sh.prototype.getResponse=function(t){return(t=kh(this,t))?t.getResponse():null},Sh.prototype.execute=function(t){(t=kh(this,t))&&t.execute()},Nh.prototype.getResponse=function(){return Rh(this),this.b},Nh.prototype.execute=function(){Rh(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Nh.prototype.delete=function(){Rh(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Jr(xh,"FACTOR_ID","phone"),Ph.prototype.g=function(){return Ch||(Ch=new Sh),Ae(Ch)},Ph.prototype.c=function(){};var Dh=null;function Oh(){this.b=s.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Lh=new _t(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Mh=new Wr(3e4,6e4);Oh.prototype.g=function(t){var e=this;return new we((function(n,r){var i=setTimeout((function(){r(new C("network-request-failed"))}),Mh.get());!s.grecaptcha||t!==e.f&&!e.b?(s[e.a]=function(){if(s.grecaptcha){e.f=t;var o=s.grecaptcha.render;s.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(s.grecaptcha)}else clearTimeout(i),r(new C("internal-error"));delete s[e.a]},Ae(za(kt(Lh,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new C("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(s.grecaptcha))}))},Oh.prototype.c=function(){this.b--};var Fh=null;function jh(t,e,n,r,i,o,a){if(Jr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,a?(Dh||(Dh=new Ph),a=Dh):(Fh||(Fh=new Oh),a=Fh),this.m=a,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Vh])throw new C("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Bh],!s.document)throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ce(e)||!this.i&&ce(e).hasChildNodes())throw new C("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Za(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Uh];this.a[Uh]=function(t){if(Kh(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Pr(c,s);"function"==typeof e&&e(t)}};var l=this.a[qh];this.a[qh]=function(){if(Kh(u,null),"function"==typeof l)l();else if("string"==typeof l){var t=Pr(l,s);"function"==typeof t&&t()}}}var Uh="callback",qh="expired-callback",Vh="sitekey",Bh="size";function Kh(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Wh(t,e){return t.h.push(e),e.oa((function(){$(t.h,e)})),e}function Hh(t){if(t.J)throw new C("internal-error","RecaptchaVerifier instance has been destroyed.")}function zh(t,e,n){var r=!1;try{this.b=n||Oe.app()}catch(t){throw new C("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new C("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Oe.SDK_VERSION?Rr(Oe.SDK_VERSION,o):null,jh.call(this,n,t,e,(function(){try{var t=i.b.auth().la()}catch(e){t=null}return t}),o,P(A),r)}function Gh(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,a=0;a<e.length;a++)if(e[a].optional)o=!0;else{if(o)throw new C("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Qh.length)throw new C("internal-error","Argument validator received an unsupported number of arguments.");n=Qh[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new C("argument-error",t+" failed: "+r)}(e=jh.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=Wh(this,Ae().then((function(){if(Lr()&&!Tr())return br();throw new C("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,au(t.s,Ks,{})})).then((function(e){t.a[Vh]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},e.render=function(){Hh(this);var t=this;return Wh(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ce(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),a=r[1];if(!ue&&a&&(a.name||a.type)){if(o=["<",o],a.name&&o.push(' name="',Wt(a.name),'"'),a.type){o.push(' type="',Wt(a.type),'"');var s={};mt(s,a),delete s.type,a=s}o.push(">"),o=o.join("")}return o=ve(i,o),a&&("string"==typeof a?o.className=a:Array.isArray(a)?o.className=a.join(" "):le(o,a)),2<r.length&&de(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},e.verify=function(){Hh(this);var t=this;return Wh(this,this.render().then((function(e){return new we((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){Y(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},e.reset=function(){Hh(this),null!==this.c&&this.g.reset(this.c)},e.clear=function(){Hh(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ce(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(zh,jh);var Qh="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function $h(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Yh(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Xh(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:v}}function Jh(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function Zh(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function tf(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function ef(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function nf(t){return v(t)&&"string"==typeof t.uid}function rf(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function of(t,e){for(var n in e){var r=e[n].name;t[r]=uf(r,t[n],e[n].j)}}function af(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){Gh(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function sf(t,e,n,r){t[e]=uf(e,n,r)}function uf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Gh(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}of(lh.prototype,{kb:{name:"applyActionCode",j:[$h("code")]},Sa:{name:"checkActionCode",j:[$h("code")]},ob:{name:"confirmPasswordReset",j:[$h("code"),$h("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[$h("email"),$h("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[$h("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[$h("emailLink")]},Hc:{name:"onAuthStateChanged",j:[rf(Xh(),Jh(),"nextOrObserver"),Jh("opt_error",!0),Jh("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[rf(Xh(),Jh(),"nextOrObserver"),Jh("opt_error",!0),Jh("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[$h("email"),rf(Xh("opt_actionCodeSettings",!0),Zh(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[$h("email"),Xh("actionCodeSettings")]},yb:{name:"setPersistence",j:[$h("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[tf()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[tf()]},Tc:{name:"signInWithCustomToken",j:[$h("token")]},Uc:{name:"signInWithEmailAndPassword",j:[$h("email"),$h("password")]},Vc:{name:"signInWithEmailLink",j:[$h("email"),$h("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[$h("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[rf({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof Tl)}},Zh(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[$h(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[$h("url"),Xh("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[$h("code")]}}),af(lh.prototype,{lc:{name:"languageCode",lb:rf($h(),Zh(),"languageCode")},ti:{name:"tenantId",lb:rf($h(),Zh(),"tenantId")}}),lh.Persistence=nc,lh.Persistence.LOCAL="local",lh.Persistence.SESSION="session",lh.Persistence.NONE="none",of(Tl.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Yh("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Yh("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[tf()]},rb:{name:"linkWithCredential",j:[tf()]},Dc:{name:"linkWithPhoneNumber",j:[$h("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[tf()]},ub:{name:"reauthenticateWithCredential",j:[tf()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[$h("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[rf(Xh("opt_actionCodeSettings",!0),Zh(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[$h(null,!0)]},cd:{name:"unlink",j:[$h("provider")]},Cb:{name:"updateEmail",j:[$h("email")]},Db:{name:"updatePassword",j:[$h("password")]},ed:{name:"updatePhoneNumber",j:[tf("phone")]},Eb:{name:"updateProfile",j:[Xh("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[$h("email"),rf(Xh("opt_actionCodeSettings",!0),Zh(null,!0),"opt_actionCodeSettings",!0)]}}),of(Sh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(Eh.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),of(we.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),af(tl.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Yh("appVerificationDisabledForTesting")}}),of(el.prototype,{confirm:{name:"confirm",j:[$h("verificationCode")]}}),sf(ho,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[_o,Po,Fo,go],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[rf($h(),Xh(),"json")]),sf(Do,"credential",(function(t,e){return new xo(t,e)}),[$h("email"),$h("password")]),of(xo.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),of(To.prototype,{Ca:{name:"addScope",j:[$h("scope")]},Ka:{name:"setCustomParameters",j:[Xh("customOAuthParameters")]}}),sf(To,"credential",Eo,[rf($h(),Xh(),"token")]),sf(Do,"credentialWithLink",Oo,[$h("email"),$h("emailLink")]),of(So.prototype,{Ca:{name:"addScope",j:[$h("scope")]},Ka:{name:"setCustomParameters",j:[Xh("customOAuthParameters")]}}),sf(So,"credential",Co,[rf($h(),Xh(),"token")]),of(ko.prototype,{Ca:{name:"addScope",j:[$h("scope")]},Ka:{name:"setCustomParameters",j:[Xh("customOAuthParameters")]}}),sf(ko,"credential",Ao,[rf($h(),rf(Xh(),Zh()),"idToken"),rf($h(),Zh(),"accessToken",!0)]),of(No.prototype,{Ka:{name:"setCustomParameters",j:[Xh("customOAuthParameters")]}}),sf(No,"credential",Ro,[rf($h(),Xh(),"token"),$h("secret",!0)]),of(Io.prototype,{Ca:{name:"addScope",j:[$h("scope")]},credential:{name:"credential",j:[rf($h(),rf(Xh(),Zh()),"optionsOrIdToken"),rf($h(),Zh(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Xh("customOAuthParameters")]}}),of(mo.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),of(po.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),sf(Uo,"credential",qo,[$h("verificationId"),$h("verificationCode")]),of(Uo.prototype,{gb:{name:"verifyPhoneNumber",j:[rf($h(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?ef(t.session,co)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?ef(t.session,lo)&&nf(t.multiFactorHint):t.session&&t.multiFactorUid?ef(t.session,lo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),of(Mo.prototype,{w:{name:"toJSON",j:[$h(null,!0)]}}),of(C.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),of($o.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),of(Qo.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),of(sl.prototype,{toJSON:{name:"toJSON",j:[$h(null,!0)]}}),of(il.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),of(pl.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},$h("displayName",!0)]},bd:{name:"unenroll",j:[rf({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:nf},$h(),"multiFactorInfoIdentifier")]}}),of(zh.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),sf(Ti,"parseLink",xi,[$h("link")]),sf(xh,"assertion",(function(t){return new hl(t)}),[tf("phone")]),function(){if(void 0===Oe||!Oe.INTERNAL||!Oe.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:li,VERIFY_AND_CHANGE_EMAIL:fi,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:lh,AuthCredential:ho,Error:C};sf(t,"EmailAuthProvider",Do,[]),sf(t,"FacebookAuthProvider",To,[]),sf(t,"GithubAuthProvider",So,[]),sf(t,"GoogleAuthProvider",ko,[]),sf(t,"TwitterAuthProvider",No,[]),sf(t,"OAuthProvider",Io,[$h("providerId")]),sf(t,"SAMLAuthProvider",wo,[$h("providerId")]),sf(t,"PhoneAuthProvider",Uo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof lh)}}]),sf(t,"RecaptchaVerifier",zh,[rf($h(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Xh("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof Oe.app.App)}}]),sf(t,"ActionCodeURL",Ti,[]),sf(t,"PhoneMultiFactorGenerator",xh,[]),Oe.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new lh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),Oe.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:w((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:w(t.nc,t),addAuthTokenListener:w(t.cc,t),removeAuthTokenListener:w(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Oe.registerVersion("@firebase/auth","0.16.8"),Oe.INTERNAL.extendNamespace({User:Tl})}()}).apply(void 0!==t?t:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Le,Me,Fe,je=Le={};function Ue(){throw new Error("setTimeout has not been defined")}function qe(){throw new Error("clearTimeout has not been defined")}function Ve(t){if(Me===setTimeout)return setTimeout(t,0);if((Me===Ue||!Me)&&setTimeout)return Me=setTimeout,setTimeout(t,0);try{return Me(t,0)}catch(e){try{return Me.call(null,t,0)}catch(e){return Me.call(this,t,0)}}}!function(){try{Me="function"==typeof setTimeout?setTimeout:Ue}catch(t){Me=Ue}try{Fe="function"==typeof clearTimeout?clearTimeout:qe}catch(t){Fe=qe}}();var Be,Ke=[],We=!1,He=-1;function ze(){We&&Be&&(We=!1,Be.length?Ke=Be.concat(Ke):He=-1,Ke.length&&Ge())}function Ge(){if(!We){var t=Ve(ze);We=!0;for(var e=Ke.length;e;){for(Be=Ke,Ke=[];++He<e;)Be&&Be[He].run();He=-1,e=Ke.length}Be=null,We=!1,function(t){if(Fe===clearTimeout)return clearTimeout(t);if((Fe===qe||!Fe)&&clearTimeout)return Fe=clearTimeout,clearTimeout(t);try{Fe(t)}catch(e){try{return Fe.call(null,t)}catch(e){return Fe.call(this,t)}}}(t)}}function Qe(t,e){this.fun=t,this.array=e}function $e(){}je.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];Ke.push(new Qe(t,e)),1!==Ke.length||We||Ve(Ge)},Qe.prototype.run=function(){this.fun.apply(null,this.array)},je.title="browser",je.browser=!0,je.env={},je.argv=[],je.version="",je.versions={},je.on=$e,je.addListener=$e,je.once=$e,je.off=$e,je.removeListener=$e,je.removeAllListeners=$e,je.emit=$e,je.prependListener=$e,je.prependOnceListener=$e,je.listeners=function(t){return[]},je.binding=function(t){throw new Error("process.binding is not supported")},je.cwd=function(){return"/"},je.chdir=function(t){throw new Error("process.chdir is not supported")},je.umask=function(){return 0};var Ye="";function Xe(t){Ye=t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Je,Ze=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Ht(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Wt(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),tn=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Gt(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),en=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ze(e)}}catch(t){}return new tn},nn=en("localStorage"),rn=en("sessionStorage"),on=new be("@firebase/database"),an=(Je=1,function(){return Je++}),sn=function(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(i>=55296&&i<=56319){var o=i-55296;r++,It(r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e}(t),n=new Xt;n.update(e);var r=n.digest();return St.encodeByteArray(r)},un=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=un.apply(null,i):n+="object"==typeof i?Ht(i):i,n+=" "}return n},cn=null,ln=!0,hn=function(t,e){It(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(on.logLevel=pe.VERBOSE,cn=on.log.bind(on),e&&rn.set("logging_enabled",!0)):"function"==typeof t?cn=t:(cn=null,rn.remove("logging_enabled"))},fn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===ln&&(ln=!1,null===cn&&!0===rn.get("logging_enabled")&&hn(!0)),cn){var n=un.apply(null,t);cn(n)}},pn=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];fn.apply(void 0,yt([t],mt(e)))}},dn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+un.apply(void 0,yt([],mt(t)));on.error(n)},vn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+un.apply(void 0,yt([],mt(t)));throw on.error(n),new Error(n)},gn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+un.apply(void 0,yt([],mt(t)));on.warn(n)},mn=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},yn=function(t,e){if(t===e)return 0;if("[MIN_NAME]"===t||"[MAX_NAME]"===e)return-1;if("[MIN_NAME]"===e||"[MAX_NAME]"===t)return 1;var n=Cn(t),r=Cn(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},_n=function(t,e){return t===e?0:t<e?-1:1},bn=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Ht(e))},wn=function(t){if("object"!=typeof t||null===t)return Ht(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=Ht(e[i]),r+=":",r+=wn(t[e[i]]);return r+="}"},In=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var En=function(t){It(!mn(t),"Invalid JSON number");var e,n,r,i,o,a=1023;0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),a))+a,r=Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;o-=1)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var u=s.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(u.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Sn=new RegExp("^-?(0*)\\d{1,10}$"),Cn=function(t){if(Sn.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},kn=function(t){try{t()}catch(t){setTimeout((function(){var e=t.stack||"";throw gn("Exception was thrown by user callback.",e),t}),Math.floor(0))}},An=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},Nn=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then((function(t){return n.appCheck=t}))}return t.prototype.getToken=function(t){var e=this;return this.appCheck?this.appCheck.getToken(t):new Promise((function(n,r){setTimeout((function(){e.appCheck?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then((function(e){return e.addTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){gn('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),Rn=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit((function(t){return r.auth_=t}))}return t.prototype.getToken=function(t){var e=this;return this.auth_?this.auth_.getToken(t).catch((function(t){return t&&"auth/token-not-initialized"===t.code?(fn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)})):new Promise((function(n,r){setTimeout((function(){e.auth_?e.getToken(t).then(n,r):n(null)}),0)}))},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then((function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then((function(e){return e.removeAuthTokenListener(t)}))},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',gn(t)},t}(),xn=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),Pn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Dn=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===a&&(a=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nn.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&nn.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){var t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?"?ns="+this.namespace:"";return""+t+this.host+"/"+e},t}();function On(t,e,n){var r;if(It("string"==typeof e,"typeof type must == string"),It("object"==typeof n,"typeof params must == object"),"websocket"===e)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if("long_polling"!==e)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var i=[];return Tn(n,(function(t,e){i.push(t+"="+e)})),r+i.join("&")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ln=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Gt(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return kt(this.counters_)},t}(),Mn={},Fn={};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t){var e=t.toString();return Mn[e]||(Mn[e]=new Ln),Mn[e]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Un=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&kn((function(){n.onMessage_(t[e])}))},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},t}(),qn=function(){function t(t,e,n,r,i,o,a){var s=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=pn(t),this.stats_=jn(e),this.urlFn=function(t){return s.appCheckToken&&(t.ac=s.appCheckToken),On(e,"long_polling",t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Un(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(t){if(Mt()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new Vn((function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=mt(t,5),i=r[0],o=r[1],a=r[2];if(r[3],r[4],n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=mt(t,2),i=r[0],o=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)}),(function(){n.onClosed_()}),n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&Pn.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,(function(){}))}}))},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!Mt()&&(!!t.forceAllow_||!(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Ht(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n,r=(n=Et(e),St.encodeByteArray(n,!0)),i=In(r,1840),o=0;o<i.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Mt()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Ht(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),Vn=function(){function t(e,n,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Mt())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=an(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var o="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11))o='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(t){fn("frame writing exception"),t.stack&&fn(t.stack),fn(t)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||fn("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)}),Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,(function(){clearTimeout(i),r()}))},t.prototype.addTag=function(t,e){var n=this;Mt()?this.doNodeLongPoll(t,e):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){fn("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(t){}}),Math.floor(1))},t}(),Bn=null;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */"undefined"!=typeof MozWebSocket?Bn=MozWebSocket:"undefined"!=typeof WebSocket&&(Bn=WebSocket);var Kn=function(){function t(e,n,r,i,o,a,s){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=pn(this.connId),this.stats_=jn(n),this.connURL=t.connectionURL_(n,a,s,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var i={v:"5"};return!Mt()&&"undefined"!=typeof location&&location.hostname&&Pn.test(location.hostname)&&(i.r="f"),e&&(i.s=e),n&&(i.ls=n),r&&(i.ac=r),On(t,"websocket",i)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nn.set("previous_websocket_failure",!0);try{if(Mt()){var r=this.nodeAdmin?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+Ye+"/"+Le.platform+"/"+r,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(i.headers.Authorization=this.authToken),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);var o={},a=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(i.proxy={origin:a}),this.mySock=new Bn(this.connURL,[],i)}else{i={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}};this.mySock=new Bn(this.connURL,[],i)}}catch(t){this.log_("Error instantiating WebSocket.");var s=t.message||t.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Bn&&!t.forceDisallow_},t.previouslyFailed=function(){return nn.isInMemoryStorage||!0===nn.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){nn.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Wt(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(It(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Ht(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=In(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()}),Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),Wn=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[qn,Kn]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=Kn&&Kn.isAvailable(),o=i&&!Kn.previouslyFailed();if(e.webSocketOnly&&(i||gn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),o=!0),o)this.transports_=[Kn];else{var a=this.transports_=[];try{for(var s=gt(t.ALL_TRANSPORTS),u=s.next();!u.done;u=s.next()){var c=u.value;c&&c.isAvailable()&&a.push(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),Hn=function(){function t(t,e,n,r,i,o,a,s,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=s,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=pn("c:"+this.id+":"),this.transportManager_=new Wn(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){t.conn_&&t.conn_.open(n,r)}),Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=An((function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))}),Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=bn("t",t),n=bn("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=bn("t",t),n=bn("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=bn("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?dn("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dn("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&gn("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),An((function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())}),Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):An((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),zn=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),Gn=function(){function t(t){this.allowedEvents_=t,this.listeners_={},It(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=yt([],mt(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){It(this.allowedEvents_.find((function(e){return e===t})),"Unknown event: "+t)},t}(),Qn=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Pt()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return ft(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return It("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(Gn),$n=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yn(){return new $n("")}function Xn(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Jn(t){return t.pieces_.length-t.pieceNum_}function Zn(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new $n(t.pieces_,e)}function tr(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function er(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function nr(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new $n(e,0)}function rr(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof $n)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new $n(n,0)}function ir(t){return t.pieceNum_>=t.pieces_.length}function or(t,e){var n=Xn(t),r=Xn(e);if(null===n)return e;if(n===r)return or(Zn(t),Zn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function ar(t,e){for(var n=er(t,0),r=er(e,0),i=0;i<n.length&&i<r.length;i++){var o=yn(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function sr(t,e){if(Jn(t)!==Jn(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function ur(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(Jn(t)>Jn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var cr=function(t,e){this.errorPrefix_=e,this.parts_=er(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=oe(this.parts_[n]);lr(this)};function lr(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+hr(t))}function hr(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fr,pr,dr=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,(function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))}),!1),r}return ft(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return It("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(Gn),vr=function(t){function e(n,r,i,o,a,s,u,c){var l=t.call(this)||this;if(l.repoInfo_=n,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=s,l.appCheckTokenProvider_=u,l.authOverride_=c,l.id=e.nextPersistentConnectionId_++,l.log_=pn("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=1e3,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!Mt())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return dr.getInstance().on("visible",l.onVisible_,l),-1===n.host.indexOf("fblocal")&&Qn.getInstance().on("online",l.onOnline_,l),l}return ft(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(Ht(i)),It(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this;this.initConnection_();var n=new Nt,r={p:t._path.toString(),q:t._queryObject},i={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout((function(){var t=e.outstandingGets_[o];void 0!==t&&i===t&&(delete e.outstandingGets_[o],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))}),3e3),this.connected_&&this.sendGet_(o),n.promise},e.prototype.listen=function(t,e,n,r){this.initConnection_();var i=t._queryIdentifier,o=t._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),It(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),It(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,(function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};t.tag&&(a.q=r._queryObject,a.t=t.tag),a.h=t.hashFn(),this.sendRequest("q",a,(function(a){var s=a.d,u=a.s;e.warnOnListenWarnings_(s,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",a),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,s))}))},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Gt(t,"w")){var n=Qt(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',i=e._path.toString();gn("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){var e;(t&&40===t.length||"object"==typeof(e=zt(t).claims)&&!0===e.admin)&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))},e.prototype.tryAuth=function(){var t,e=this;if(this.connected_&&this.authToken_){var n=this.authToken_,r=(t=zt(n).claims)&&"object"==typeof t&&t.hasOwnProperty("iat")?"auth":"gauth",i={cred:n};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,(function(t){var r=t.s,i=t.d||"error";e.authToken_===n&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)}))},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),It(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,(function(t){r&&setTimeout((function(){r(t.s,t.d)}),Math.floor(0))}))},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){this.initConnection_();var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var a=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(a):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,(function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)}))},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,(function(t){if("ok"!==t.s){var n=t.d;e.log_("reportStats","Error sending stats: "+n)}}))}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Ht(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):dn("Unrecognized action received from server: "+Ht(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;It(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){e.establishConnectionTimer_=null,e.establishConnection_()}),Math.floor(t))},e.prototype.initConnection_=function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return dt(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,u,c,l,h,f,p,d,v=this;return vt(this,(function(g){switch(g.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId,a=!1,s=null,u=function(){s?s.close():(a=!0,r())},c=function(t){It(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(t)},this.realtime_={close:u,sendRequest:c},l=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,g.label=1;case 1:return g.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(l),this.appCheckTokenProvider_.getToken(l)])];case 2:return h=mt.apply(void 0,[g.sent(),2]),f=h[0],p=h[1],a?fn("getToken() completed but was canceled"):(fn("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,s=new Hn(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,(function(t){gn(t+" ("+v.repoInfo_.toString()+")"),v.interrupt("server_kill")}),o)),[3,4];case 3:return d=g.sent(),this.log_("Failed to get token: "+d),a||(this.repoInfo_.nodeAdmin&&gn(d),u()),[3,4];case 4:return[2]}}))}))},e.prototype.interrupt=function(t){fn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){fn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],$t(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map((function(t){return wn(t)})).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new $n(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){fn("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){fn("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=gt(this.listens.values()),o=i.next();!o.done;o=i.next()){var a=o.value;try{for(var s=(n=void 0,gt(a.values())),u=s.next();!u.done;u=s.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}}catch(e){t={error:e}}finally{try{o&&!o.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Mt()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+Ye.replace(/\./g,"-")]=1,Pt()?t["framework.cordova"]=1:Lt()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=Qn.getInstance().currentlyOnline();return $t(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(zn),gr=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),mr=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new gr("[MIN_NAME]",t),r=new gr("[MIN_NAME]",e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return gr.MIN},t}(),yr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return fr},set:function(t){fr=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return yn(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Tt("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return gr.MIN},e.prototype.maxPost=function(){return new gr("[MAX_NAME]",fr)},e.prototype.makePost=function(t,e){return It("string"==typeof t,"KeyIndex indexValue must always be a string."),new gr(t,fr)},e.prototype.toString=function(){return".key"},e}(mr),_r=new yr,br=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),wr=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Tr.EMPTY_NODE,this.right=null!=o?o:Tr.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Tr.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Tr.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ir=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new wr(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Tr=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,wr.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wr.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new br(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new br(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new br(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new br(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ir,t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Er(t,e){return yn(t.name,e.name)}function Sr(t,e){return yn(t,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cr,kr,Ar,Nr=function(t){return"number"==typeof t?"number:"+En(t):"string:"+t},Rr=function(t){if(t.isLeafNode()){var e=t.val();It("string"==typeof e||"number"==typeof e||"object"==typeof e&&Gt(e,".sv"),"Priority must be a string or number.")}else It(t===pr||t.isEmpty(),"priority of unexpected type.");It(t===pr||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},xr=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,It(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Rr(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return Cr},set:function(t){Cr=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return ir(e)?this:".priority"===Xn(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=Xn(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(It(".priority"!==r||1===Jn(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zn(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Nr(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?En(this.value_):this.value_,this.lazyHash_=sn(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(It(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,i=t.VALUE_TYPE_ORDER.indexOf(n),o=t.VALUE_TYPE_ORDER.indexOf(r);return It(i>=0,"Unknown leaf type: "+n),It(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-i},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode()){var e=t;return this.value_===e.value_&&this.priorityNode_.equals(e.priorityNode_)}return!1},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}();var Pr,Dr,Or=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?yn(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return gr.MIN},e.prototype.maxPost=function(){return new gr("[MAX_NAME]",new xr("[PRIORITY-POST]",Ar))},e.prototype.makePost=function(t,e){var n=kr(t);return new gr(e,new xr("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(mr),Lr=new Or,Mr=Math.log(2),Fr=function(){function t(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Mr,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),jr=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,a,s=r-e;if(0===s)return null;if(1===s)return o=t[e],a=n?n(o):o,new wr(a,o.node,wr.BLACK,null,null);var u=parseInt(s/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],a=n?n(o):o,new wr(a,o.node,wr.BLACK,c,l)},o=function(e){for(var r=null,o=null,a=t.length,s=function(e,r){var o=a-e,s=a;a-=e;var c=i(o+1,s),l=t[o],h=n?n(l):l;u(new wr(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?s(h,wr.BLACK):(s(h,wr.BLACK),s(h,wr.RED))}return o}(new Fr(t.length));return new Tr(r||e,o)},Ur={},qr=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return It(Ur&&Lr,"ChildrenNode.ts has not been loaded"),Pr=Pr||new t({".priority":Ur},{".priority":Lr})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Qt(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Tr?e:null},t.prototype.hasIndex=function(t){return Gt(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){It(e!==_r,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(gr.Wrap),s=a.getNext();s;)o=o||e.isDefinedOn(s.node),i.push(s),s=a.getNext();r=o?jr(i,e.getCompare()):Ur;var u=e.toString(),c=pt({},this.indexSet_);c[u]=e;var l=pt({},this.indexes_);return l[u]=r,new t(l,c)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Yt(this.indexes_,(function(t,i){var o=Qt(r.indexSet_,i);if(It(o,"Missing index implementation for "+i),t===Ur){if(o.isDefinedOn(e.node)){for(var a=[],s=n.getIterator(gr.Wrap),u=s.getNext();u;)u.name!==e.name&&a.push(u),u=s.getNext();return a.push(e),jr(a,o.getCompare())}return Ur}var c=n.get(e.name),l=t;return c&&(l=l.remove(new gr(e.name,c))),l.insert(e,e.node)})),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Yt(this.indexes_,(function(t){if(t===Ur)return t;var r=n.get(e.name);return r?t.remove(new gr(e.name,r)):t})),this.indexSet_)},t}(),Vr=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Rr(this.priorityNode_),this.children_.isEmpty()&&It(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Dr||(Dr=new t(new Tr(Sr),null,qr.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Dr},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Dr:e},t.prototype.getChild=function(t){var e=Xn(t);return null===e?this:this.getImmediateChild(e).getChild(Zn(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(It(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new gr(e,n),i=void 0,o=void 0;n.isEmpty()?(i=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));var a=i.isEmpty()?Dr:this.priorityNode_;return new t(i,a,o)},t.prototype.updateChild=function(t,e){var n=Xn(t);if(null===n)return e;It(".priority"!==Xn(t)||1===Jn(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Zn(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Lr,(function(a,s){n[a]=s.val(e),r++,o&&t.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1})),!e&&o&&i<2*r){var a=[];for(var s in n)a[s]=n[s];return a}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+Nr(this.getPriority().val())+":"),this.forEachChild(Lr,(function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)})),this.lazyHash_=""===t?"":sn(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new gr(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new gr(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new gr(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal((function(t){return e(t.name,t.node)})):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getIteratorFrom(t.name,gr.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,(function(t){return t}));for(var r=this.children_.getReverseIteratorFrom(t.name,gr.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Br?-1:0},t.prototype.withIndex=function(e){if(e===_r||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===_r||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Lr),r=e.getIterator(Lr),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===_r?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),Br=new(function(t){function e(){return t.call(this,new Tr(Sr),Vr.EMPTY_NODE,qr.Default)||this}return ft(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return Vr.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(Vr));Object.defineProperties(gr,{MIN:{value:new gr("[MIN_NAME]",Vr.EMPTY_NODE)},MAX:{value:new gr("[MAX_NAME]",Br)}}),yr.__EMPTY_NODE=Vr.EMPTY_NODE,xr.__childrenNodeConstructor=Vr,pr=Br,function(t){Ar=t}(Br);function Kr(t,e){if(void 0===e&&(e=null),null===t)return Vr.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),It(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new xr(t,Kr(e));if(t instanceof Array){var n=Vr.EMPTY_NODE;return Tn(t,(function(e,r){if(Gt(t,e)&&"."!==e.substring(0,1)){var i=Kr(r);!i.isLeafNode()&&i.isEmpty()||(n=n.updateImmediateChild(e,i))}})),n.updatePriority(Kr(e))}var r=[],i=!1;if(Tn(t,(function(t,e){if("."!==t.substring(0,1)){var n=Kr(e);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new gr(t,n)))}})),0===r.length)return Vr.EMPTY_NODE;var o=jr(r,Er,(function(t){return t.name}),Sr);if(i){var a=jr(r,Lr.getCompare());return new Vr(o,Kr(e),new qr({".priority":a},{".priority":Lr}))}return new Vr(o,Kr(e),qr.Default)}!function(t){kr=t}(Kr);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Wr,Hr,zr=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,It(!ir(e)&&".priority"!==Xn(e),"Can't create PathIndex with empty path or .priority key"),n}return ft(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?yn(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=Kr(t),r=Vr.EMPTY_NODE.updateChild(this.indexPath_,n);return new gr(e,r)},e.prototype.maxPost=function(){var t=Vr.EMPTY_NODE.updateChild(this.indexPath_,Br);return new gr("[MAX_NAME]",t)},e.prototype.toString=function(){return er(this.indexPath_,0).join("/")},e}(mr),Gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?yn(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return gr.MIN},e.prototype.maxPost=function(){return gr.MAX},e.prototype.makePost=function(t,e){var n=Kr(t);return new gr(e,n)},e.prototype.toString=function(){return".value"},e}(mr),Qr=new Gr,$r="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Yr=(Wr=0,Hr=[],function(t){var e,n=t===Wr;Wr=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=$r.charAt(t%64),t=Math.floor(t/64);It(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;e>=0&&63===Hr[e];e--)Hr[e]=0;Hr[e]++}else for(e=0;e<12;e++)Hr[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=$r.charAt(Hr[e]);return It(20===i.length,"nextPushId: Length should be 20."),i}),Xr=function(t){if("2147483647"===t)return"-";var e=Cn(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return"[MAX_NAME]";var o=n[i],a=$r.charAt($r.indexOf(o)+1);return n[i]=a,n.slice(0,i+1).join("")},Jr=function(t){if("-2147483648"===t)return"[MIN_NAME]";var e=Cn(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=$r.charAt($r.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Zr(t){return{type:"value",snapshotNode:t}}function ti(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ei(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function ni(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ri=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,i,o){It(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(ei(e,a)):It(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ti(e,n)):o.trackChildChange(ni(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Lr,(function(t,r){e.hasChild(t)||n.trackChildChange(ei(t,r))})),e.isLeafNode()||e.forEachChild(Lr,(function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(ni(e,r,i))}else n.trackChildChange(ti(e,r))}))),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?Vr.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ii=function(){function t(e){this.indexedFilter_=new ri(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new gr(e,n))||(n=Vr.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=Vr.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(Vr.EMPTY_NODE);var i=this;return e.forEachChild(Lr,(function(t,e){i.matches(new gr(t,e))||(r=r.updateImmediateChild(t,Vr.EMPTY_NODE))})),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),oi=function(){function t(t){this.rangedFilter_=new ii(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new gr(e,n))||(n=Vr.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=Vr.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=Vr.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var a=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),a)<=0:this.index_.compare(a,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(a.name,a.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(Vr.EMPTY_NODE);var s=void 0,u=void 0,c=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),s=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),s=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();){a=i.getNext();!h&&c(s,a)<=0&&(h=!0),h&&o<this.limit_&&c(a,u)<=0?o++:r=r.updateImmediateChild(a.name,Vr.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var a=this.index_.getCompare();o=function(t,e){return a(e,t)}}else o=this.index_.getCompare();var s=t;It(s.numChildren()===this.limit_,"");var u=new gr(e,n),c=this.reverse_?s.getFirstChild(this.index_):s.getLastChild(this.index_),l=this.rangedFilter_.matches(u);if(s.hasChild(e)){for(var h=s.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||s.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(l&&!n.isEmpty()&&p>=0)return null!=i&&i.trackChildChange(ni(e,n,h)),s.updateImmediateChild(e,n);null!=i&&i.trackChildChange(ei(e,h));var d=s.updateImmediateChild(e,Vr.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(ti(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:l&&o(c,u)>=0?(null!=i&&(i.trackChildChange(ei(c.name,c.node)),i.trackChildChange(ti(e,n))),s.updateImmediateChild(e,n).updateImmediateChild(c.name,Vr.EMPTY_NODE)):t},t}(),ai=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Lr}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return It(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return It(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:"[MIN_NAME]"},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return It(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return It(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:"[MAX_NAME]"},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return It(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Lr},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function si(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function ui(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function ci(t,e){var n=t.copy();return n.index_=e,n}function li(t){var e,n={};return t.isDefault()||(t.index_===Lr?e="$priority":t.index_===Qr?e="$value":t.index_===_r?e="$key":(It(t.index_ instanceof zr,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Ht(e),t.startSet_&&(n.startAt=Ht(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Ht(t.indexStartName_))),t.endSet_&&(n.endAt=Ht(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Ht(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function hi(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Lr&&(e.i=t.index_.toString()),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fi=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=pn("p:rest:"),o.listens_={},o}return ft(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(It(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,i){var o=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var s=e.getListenId_(t,r),u={};this.listens_[s]=u;var c=li(t._queryParams);this.restRequest_(a+".json",c,(function(t,e){var n=e;(404===t&&(n=null,t=null),null===t&&o.onDataUpdate_(a,n,!1,r),Qt(o.listens_,s)===u)&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)}))},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=li(t._queryParams),r=t._path.toString(),i=new Nt;return this.restRequest_(r+".json",n,(function(t,n){var o=n;404===t&&(o=null,t=null),null===t?(e.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))})),i.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var o=mt(i,2),a=o[0],s=o[1];a&&a.accessToken&&(e.auth=a.accessToken),s&&s.token&&(e.ac=s.token);var u=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+function(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach((function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))})):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}(e);r.log_("Sending REST request for "+u);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(n&&4===c.readyState){r.log_("REST Response for "+u+" received. status:",c.status,"response:",c.responseText);var t=null;if(c.status>=200&&c.status<300){try{t=Wt(c.responseText)}catch(t){gn("Failed to parse JSON response for "+u+": "+c.responseText)}n(null,t)}else 401!==c.status&&404!==c.status&&gn("Got unsuccessful REST response for "+u+" Status: "+c.status),n(c.status);n=null}},c.open("GET",u,!0),c.send()}))},e}(zn),pi=function(){function t(){this.rootNode_=Vr.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function di(){return{value:null,children:new Map}}function vi(t,e,n){if(ir(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=Xn(e);t.children.has(r)||t.children.set(r,di()),vi(t.children.get(r),e=Zn(e),n)}}function gi(t,e){if(ir(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Lr,(function(e,n){vi(t,new $n(e),n)})),gi(t,e)}if(t.children.size>0){var r=Xn(e);if(e=Zn(e),t.children.has(r))gi(t.children.get(r),e)&&t.children.delete(r);return 0===t.children.size}return!0}function mi(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach((function(t,n){e(n,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,(function(t,r){mi(r,new $n(e.toString()+"/"+t),n)}))}var yi,_i,bi=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=pt({},t);return this.last_&&Tn(this.last_,(function(t,n){e[t]=e[t]-n})),this.last_=t,e},t}(),wi=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new bi(t);var n=1e4+2e4*Math.random();An(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;Tn(e,(function(e,i){i>0&&Gt(t.statsToReport_,e)&&(n[e]=i,r=!0)})),r&&this.server_.reportStats(n),An(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ii(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(_i=yi||(yi={}))[_i.OVERWRITE=0]="OVERWRITE",_i[_i.MERGE=1]="MERGE",_i[_i.ACK_USER_WRITE=2]="ACK_USER_WRITE",_i[_i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Ti,Ei=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=yi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(ir(this.path)){if(null!=this.affectedTree.value)return It(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new $n(e));return new t(Yn(),n,this.revert)}return It(Xn(this.path)===e,"operationForChild called for unrelated child."),new t(Zn(this.path),this.affectedTree,this.revert)},t}(),Si=function(){function t(t,e){this.source=t,this.path=e,this.type=yi.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return ir(this.path)?new t(this.source,Yn()):new t(this.source,Zn(this.path))},t}(),Ci=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=yi.OVERWRITE}return t.prototype.operationForChild=function(e){return ir(this.path)?new t(this.source,Yn(),this.snap.getImmediateChild(e)):new t(this.source,Zn(this.path),this.snap)},t}(),ki=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=yi.MERGE}return t.prototype.operationForChild=function(e){if(ir(this.path)){var n=this.children.subtree(new $n(e));return n.isEmpty()?null:n.value?new Ci(this.source,Yn(),n.value):new t(this.source,Yn(),n)}return It(Xn(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,Zn(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Ai=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(ir(t))return this.isFullyInitialized()&&!this.filtered_;var e=Xn(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),Ni=function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t,e,n,r,i,o){var a=r.filter((function(t){return t.type===n}));a.sort((function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Tt("Should only compare child_ events.");var r=new gr(e.childName,e.snapshotNode),i=new gr(n.childName,n.snapshotNode);return t.index_.compare(r,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,n)})),a.forEach((function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,o);i.forEach((function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))}))}))}function xi(t,e){return{eventCache:t,serverCache:e}}function Pi(t,e,n,r){return xi(new Ai(e,n,r),t.serverCache)}function Di(t,e,n,r){return xi(t.eventCache,new Ai(e,n,r))}function Oi(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Li(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mi=function(){function t(t,e){void 0===e&&(Ti||(Ti=new Tr(_n)),e=Ti),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return Tn(e,(function(t,e){n=n.set(new $n(t),e)})),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:Yn(),value:this.value};if(ir(t))return null;var n=Xn(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Zn(t),e);return null!=i?{path:rr(new $n(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,(function(){return!0}))},t.prototype.subtree=function(e){if(ir(e))return this;var n=Xn(e),r=this.children.get(n);return null!==r?r.subtree(Zn(e)):new t(null)},t.prototype.set=function(e,n){if(ir(e))return new t(n,this.children);var r=Xn(e),i=(this.children.get(r)||new t(null)).set(Zn(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(ir(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=Xn(e),r=this.children.get(n);if(r){var i=r.remove(Zn(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(ir(t))return this.value;var e=Xn(t),n=this.children.get(e);return n?n.get(Zn(t)):null},t.prototype.setTree=function(e,n){if(ir(e))return n;var r=Xn(e),i=(this.children.get(r)||new t(null)).setTree(Zn(e),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new t(this.value,o)},t.prototype.fold=function(t){return this.fold_(Yn(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(rr(t,r),e)})),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,Yn(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(ir(t))return null;var i=Xn(t),o=this.children.get(i);return o?o.findOnPath_(Zn(t),rr(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,Yn(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(ir(e))return this;this.value&&r(n,this.value);var i=Xn(e),o=this.children.get(i);return o?o.foreachOnPath_(Zn(e),rr(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(Yn(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal((function(n,r){r.foreach_(rr(t,n),e)})),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal((function(e,n){n.value&&t(e,n.value)}))},t}(),Fi=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Mi(null))},t}();function ji(t,e,n){if(ir(e))return new Fi(new Mi(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,a=or(i,e);return o=o.updateChild(a,n),new Fi(t.writeTree_.set(i,o))}var s=new Mi(n),u=t.writeTree_.setTree(e,s);return new Fi(u)}function Ui(t,e,n){var r=t;return Tn(n,(function(t,n){r=ji(r,rr(e,t),n)})),r}function qi(t,e){if(ir(e))return Fi.empty();var n=t.writeTree_.setTree(e,new Mi(null));return new Fi(n)}function Vi(t,e){return null!=Bi(t,e)}function Bi(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(or(n.path,e)):null}function Ki(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Lr,(function(t,n){e.push(new gr(t,n))})):t.writeTree_.children.inorderTraversal((function(t,n){null!=n.value&&e.push(new gr(t,n.value))})),e}function Wi(t,e){if(ir(e))return t;var n=Bi(t,e);return new Fi(null!=n?new Mi(n):t.writeTree_.subtree(e))}function Hi(t){return t.writeTree_.isEmpty()}function zi(t,e){return Gi(Yn(),t.writeTree_,e)}function Gi(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal((function(e,i){".priority"===e?(It(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=Gi(rr(t,e),i,n)})),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(rr(t,".priority"),r)),n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){return so(e,t)}function $i(t,e){var n=t.allWrites.findIndex((function(t){return t.writeId===e}));It(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=t.allWrites.length-1;i&&a>=0;){var s=t.allWrites[a];s.visible&&(a>=n&&Yi(s,r.path)?i=!1:ur(r.path,s.path)&&(o=!0)),a--}if(i){if(o)return function(t){t.visibleWrites=Ji(t.allWrites,Xi,Yn()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}(t),!0;r.snap?t.visibleWrites=qi(t.visibleWrites,r.path):Tn(r.children,(function(e){t.visibleWrites=qi(t.visibleWrites,rr(r.path,e))}));return!0}return!1}function Yi(t,e){if(t.snap)return ur(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&ur(rr(t.path,n),e))return!0;return!1}function Xi(t){return t.visible}function Ji(t,e,n){for(var r=Fi.empty(),i=0;i<t.length;++i){var o=t[i];if(e(o)){var a=o.path,s=void 0;if(o.snap)ur(n,a)?r=ji(r,s=or(n,a),o.snap):ur(a,n)&&(s=or(a,n),r=ji(r,Yn(),o.snap.getChild(s)));else{if(!o.children)throw Tt("WriteRecord should have .snap or .children");if(ur(n,a))r=Ui(r,s=or(n,a),o.children);else if(ur(a,n))if(ir(s=or(a,n)))r=Ui(r,Yn(),o.children);else{var u=Qt(o.children,Xn(s));if(u){var c=u.getChild(Zn(s));r=ji(r,Yn(),c)}}}}}return r}function Zi(t,e,n,r,i){if(r||i){var o=Wi(t.visibleWrites,e);if(!i&&Hi(o))return n;if(i||null!=n||Vi(o,Yn())){return zi(Ji(t.allWrites,(function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(ur(t.path,e)||ur(e,t.path))}),e),n||Vr.EMPTY_NODE)}return null}var a=Bi(t.visibleWrites,e);if(null!=a)return a;var s=Wi(t.visibleWrites,e);return Hi(s)?n:null!=n||Vi(s,Yn())?zi(s,n||Vr.EMPTY_NODE):null}function to(t,e,n,r){return Zi(t.writeTree,t.treePath,e,n,r)}function eo(t,e){return function(t,e,n){var r=Vr.EMPTY_NODE,i=Bi(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Lr,(function(t,e){r=r.updateImmediateChild(t,e)})),r;if(n){var o=Wi(t.visibleWrites,e);return n.forEachChild(Lr,(function(t,e){var n=zi(Wi(o,new $n(t)),e);r=r.updateImmediateChild(t,n)})),Ki(o).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}return Ki(Wi(t.visibleWrites,e)).forEach((function(t){r=r.updateImmediateChild(t.name,t.node)})),r}(t.writeTree,t.treePath,e)}function no(t,e,n,r){return function(t,e,n,r,i){It(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=rr(e,n);if(Vi(t.visibleWrites,o))return null;var a=Wi(t.visibleWrites,o);return Hi(a)?i.getChild(n):zi(a,i.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function ro(t,e){return function(t,e){return Bi(t.visibleWrites,e)}(t.writeTree,rr(t.treePath,e))}function io(t,e,n,r,i,o){return function(t,e,n,r,i,o,a){var s,u=Wi(t.visibleWrites,e),c=Bi(u,Yn());if(null!=c)s=c;else{if(null==n)return[];s=zi(u,n)}if((s=s.withIndex(a)).isEmpty()||s.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?s.getReverseIteratorFrom(r,a):s.getIteratorFrom(r,a),p=f.getNext();p&&l.length<i;)0!==h(p,r)&&l.push(p),p=f.getNext();return l}(t.writeTree,t.treePath,e,n,r,i,o)}function oo(t,e,n){return function(t,e,n,r){var i=rr(e,n),o=Bi(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?zi(Wi(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function ao(t,e){return so(rr(t.treePath,e),t.writeTree)}function so(t,e){return{treePath:t,writeTree:e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uo=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;It("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),It(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===e&&"child_removed"===i)this.changeMap.set(n,ni(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===i)this.changeMap.set(n,ei(n,r.oldSnap));else if("child_changed"===e&&"child_added"===i)this.changeMap.set(n,ti(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==i)throw Tt("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,ni(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),co=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),lo=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Ai(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return oo(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Li(this.viewCache_),i=io(this.writes_,r,e,1,n,t);return 0===i.length?null:i[0]},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ho(t,e,n,r,i){var o,a,s=new uo;if(n.type===yi.OVERWRITE){var u=n;u.source.fromUser?o=vo(t,e,u.path,u.snap,r,i,s):(It(u.source.fromServer,"Unknown source."),a=u.source.tagged||e.serverCache.isFiltered()&&!ir(u.path),o=po(t,e,u.path,u.snap,r,i,a,s))}else if(n.type===yi.MERGE){var c=n;c.source.fromUser?o=function(t,e,n,r,i,o,a){var s=e;return r.foreach((function(r,u){var c=rr(n,r);go(e,Xn(c))&&(s=vo(t,s,c,u,i,o,a))})),r.foreach((function(r,u){var c=rr(n,r);go(e,Xn(c))||(s=vo(t,s,c,u,i,o,a))})),s}(t,e,c.path,c.children,r,i,s):(It(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered(),o=yo(t,e,c.path,c.children,r,i,a,s))}else if(n.type===yi.ACK_USER_WRITE){var l=n;o=l.revert?function(t,e,n,r,i,o){var a;if(null!=ro(r,n))return e;var s=new lo(r,e,i),u=e.eventCache.getNode(),c=void 0;if(ir(n)||".priority"===Xn(n)){var l=void 0;if(e.serverCache.isFullyInitialized())l=to(r,Li(e));else{var h=e.serverCache.getNode();It(h instanceof Vr,"serverChildren would be complete if leaf node"),l=eo(r,h)}c=t.filter.updateFullNode(u,l,o)}else{var f=Xn(n),p=oo(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=u.getImmediateChild(f)),(c=null!=p?t.filter.updateChild(u,f,p,Zn(n),s,o):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(u,f,Vr.EMPTY_NODE,Zn(n),s,o):u).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=to(r,Li(e))).isLeafNode()&&(c=t.filter.updateFullNode(c,a,o))}return a=e.serverCache.isFullyInitialized()||null!=ro(r,Yn()),Pi(e,c,a,t.filter.filtersNodes())}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,l.path,r,i,s):function(t,e,n,r,i,o,a){if(null!=ro(i,n))return e;var s=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(ir(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return po(t,e,n,u.getNode().getChild(n),i,o,s,a);if(ir(n)){var c=new Mi(null);return u.getNode().forEachChild(_r,(function(t,e){c=c.set(new $n(t),e)})),yo(t,e,n,c,i,o,s,a)}return e}var l=new Mi(null);return r.foreach((function(t,e){var r=rr(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))})),yo(t,e,n,l,i,o,s,a)}(t,e,l.path,l.affectedTree,r,i,s)}else{if(n.type!==yi.LISTEN_COMPLETE)throw Tt("Unknown operation type: "+n.type);o=function(t,e,n,r,i){var o=e.serverCache,a=Di(e,o.getNode(),o.isFullyInitialized()||ir(n),o.isFiltered());return fo(t,a,n,r,co,i)}(t,e,n.path,r,s)}var h=s.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=Oi(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Zr(Oi(e)))}}(e,o,h),{viewCache:o,changes:h}}function fo(t,e,n,r,i,o){var a=e.eventCache;if(null!=ro(r,n))return e;var s=void 0,u=void 0;if(ir(n))if(It(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var c=Li(e),l=eo(r,c instanceof Vr?c:Vr.EMPTY_NODE);s=t.filter.updateFullNode(e.eventCache.getNode(),l,o)}else{var h=to(r,Li(e));s=t.filter.updateFullNode(e.eventCache.getNode(),h,o)}else{var f=Xn(n);if(".priority"===f){It(1===Jn(n),"Can't have a priority with additional path components");var p=a.getNode(),d=no(r,n,p,u=e.serverCache.getNode());s=null!=d?t.filter.updatePriority(p,d):a.getNode()}else{var v=Zn(n),g=void 0;if(a.isCompleteForChild(f)){u=e.serverCache.getNode();var m=no(r,n,a.getNode(),u);g=null!=m?a.getNode().getImmediateChild(f).updateChild(v,m):a.getNode().getImmediateChild(f)}else g=oo(r,f,e.serverCache);s=null!=g?t.filter.updateChild(a.getNode(),f,g,v,i,o):a.getNode()}}return Pi(e,s,a.isFullyInitialized()||ir(n),t.filter.filtersNodes())}function po(t,e,n,r,i,o,a,s){var u,c=e.serverCache,l=a?t.filter:t.filter.getIndexedFilter();if(ir(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var f=Xn(n);if(!c.isCompleteForPath(n)&&Jn(n)>1)return e;var p=Zn(n),d=c.getNode().getImmediateChild(f).updateChild(p,r);u=".priority"===f?l.updatePriority(c.getNode(),d):l.updateChild(c.getNode(),f,d,p,co,null)}var v=Di(e,u,c.isFullyInitialized()||ir(n),l.filtersNodes());return fo(t,v,n,i,new lo(i,v,o),s)}function vo(t,e,n,r,i,o,a){var s,u,c=e.eventCache,l=new lo(i,e,o);if(ir(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,a),s=Pi(e,u,!0,t.filter.filtersNodes());else{var h=Xn(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),s=Pi(e,u,c.isFullyInitialized(),c.isFiltered());else{var f=Zn(n),p=c.getNode().getImmediateChild(h),d=void 0;if(ir(f))d=r;else{var v=l.getCompleteChild(h);d=null!=v?".priority"===tr(f)&&v.getChild(nr(f)).isEmpty()?v:v.updateChild(f,r):Vr.EMPTY_NODE}if(p.equals(d))s=e;else s=Pi(e,t.filter.updateChild(c.getNode(),h,d,f,l,a),c.isFullyInitialized(),t.filter.filtersNodes())}}return s}function go(t,e){return t.eventCache.isCompleteForChild(e)}function mo(t,e,n){return n.foreach((function(t,n){e=e.updateChild(t,n)})),e}function yo(t,e,n,r,i,o,a,s){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=ir(n)?r:new Mi(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var u=mo(0,e.serverCache.getNode().getImmediateChild(n),r);c=po(t,c,new $n(n),u,i,o,a,s)}})),u.children.inorderTraversal((function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=mo(0,e.serverCache.getNode().getImmediateChild(n),r);c=po(t,c,new $n(n),h,i,o,a,s)}})),c}var _o,bo=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ri(r.getIndex()),o=(n=r).loadsAllData()?new ri(n.getIndex()):n.hasLimit()?new oi(n):new ii(n);this.processor_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t){return{filter:t}}(o);var a=e.serverCache,s=e.eventCache,u=i.updateFullNode(Vr.EMPTY_NODE,a.getNode(),null),c=o.updateFullNode(Vr.EMPTY_NODE,s.getNode(),null),l=new Ai(u,a.isFullyInitialized(),i.filtersNodes()),h=new Ai(c,s.isFullyInitialized(),o.filtersNodes());this.viewCache_=xi(h,l),this.eventGenerator_=new Ni(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function wo(t,e){var n=Li(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!ir(e)&&!n.getImmediateChild(Xn(e)).isEmpty())?n.getChild(e):null}function Io(t){return 0===t.eventRegistrations_.length}function To(t,e,n){var r=[];if(n){It(null==e,"A cancel should cancel all event registrations.");var i=t.query._path;t.eventRegistrations_.forEach((function(t){var e=t.createCancelEvent(n,i);e&&r.push(e)}))}if(e){for(var o=[],a=0;a<t.eventRegistrations_.length;++a){var s=t.eventRegistrations_[a];if(s.matches(e)){if(e.hasAnyCallback()){o=o.concat(t.eventRegistrations_.slice(a+1));break}}else o.push(s)}t.eventRegistrations_=o}else t.eventRegistrations_=[];return r}function Eo(t,e,n,r){e.type===yi.MERGE&&null!==e.source.queryId&&(It(Li(t.viewCache_),"We should always have a full cache before handling merges"),It(Oi(t.viewCache_),"Missing event cache, even though we have a server cache"));var i,o,a=t.viewCache_,s=ho(t.processor_,a,e,n,r);return i=t.processor_,o=s.viewCache,It(o.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),It(o.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),It(s.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,So(t,s.changes,s.viewCache.eventCache.getNode(),null)}function So(t,e,n,r){var i=r?[r]:t.eventRegistrations_;return function(t,e,n,r){var i=[],o=[];return e.forEach((function(e){var n;"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push((n=e.childName,{type:"child_moved",snapshotNode:e.snapshotNode,childName:n}))})),Ri(t,i,"child_removed",e,r,n),Ri(t,i,"child_added",e,r,n),Ri(t,i,"child_moved",o,r,n),Ri(t,i,"child_changed",e,r,n),Ri(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,i)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Co,ko=function(){this.views=new Map};function Ao(t,e,n,r){var i,o,a=e.source.queryId;if(null!==a){var s=t.views.get(a);return It(null!=s,"SyncTree gave us an op for an invalid query."),Eo(s,e,n,r)}var u=[];try{for(var c=gt(t.views.values()),l=c.next();!l.done;l=c.next()){s=l.value;u=u.concat(Eo(s,e,n,r))}}catch(t){i={error:t}}finally{try{l&&!l.done&&(o=c.return)&&o.call(c)}finally{if(i)throw i.error}}return u}function No(t,e,n,r,i){var o=e._queryIdentifier,a=t.views.get(o);if(!a){var s=to(n,i?r:null),u=!1;s?u=!0:r instanceof Vr?(s=eo(n,r),u=!1):(s=Vr.EMPTY_NODE,u=!1);var c=xi(new Ai(s,u,!1),new Ai(r,i,!1));return new bo(e,c)}return a}function Ro(t,e,n,r,i,o){var a=No(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,a),function(t,e){t.eventRegistrations_.push(e)}(a,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Lr,(function(t,e){r.push(ti(t,e))})),n.isFullyInitialized()&&r.push(Zr(n.getNode())),So(t,r,n.getNode(),e)}(a,n)}function xo(t,e,n,r){var i,o,a=e._queryIdentifier,s=[],u=[],c=Mo(t);if("default"===a)try{for(var l=gt(t.views.entries()),h=l.next();!h.done;h=l.next()){var f=mt(h.value,2),p=f[0],d=f[1];u=u.concat(To(d,n,r)),Io(d)&&(t.views.delete(p),d.query._queryParams.loadsAllData()||s.push(d.query))}}catch(t){i={error:t}}finally{try{h&&!h.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}else(d=t.views.get(a))&&(u=u.concat(To(d,n,r)),Io(d)&&(t.views.delete(a),d.query._queryParams.loadsAllData()||s.push(d.query)));return c&&!Mo(t)&&s.push(new(It(_o,"Reference.ts has not been loaded"),_o)(e._repo,e._path)),{removed:s,events:u}}function Po(t){var e,n,r=[];try{for(var i=gt(t.views.values()),o=i.next();!o.done;o=i.next()){var a=o.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Do(t,e){var n,r,i=null;try{for(var o=gt(t.views.values()),a=o.next();!a.done;a=o.next()){var s=a.value;i=i||wo(s,e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i}function Oo(t,e){if(e._queryParams.loadsAllData())return Fo(t);var n=e._queryIdentifier;return t.views.get(n)}function Lo(t,e){return null!=Oo(t,e)}function Mo(t){return null!=Fo(t)}function Fo(t){var e,n;try{for(var r=gt(t.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;if(o.query._queryParams.loadsAllData())return o}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jo=1,Uo=function(t){this.listenProvider_=t,this.syncPointTree_=new Mi(null),this.pendingWriteTree_={visibleWrites:Fi.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function qo(t,e,n,r,i){return function(t,e,n,r,i){It(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=ji(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,i),i?Qo(t,new Ci({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Vo(t,e,n,r){!function(t,e,n,r){It(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ui(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var i=Mi.fromObject(n);return Qo(t,new ki({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}function Bo(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if($i(t.pendingWriteTree_,e)){var i=new Mi(null);return null!=r.snap?i=i.set(Yn(),!0):Tn(r.children,(function(t){i=i.set(new $n(t),!0)})),Qo(t,new Ei(r.path,i,n))}return[]}function Ko(t,e,n){return Qo(t,new Ci({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Wo(t,e,n,r){var i=e._path,o=t.syncPointTree_.get(i),a=[];if(o&&("default"===e._queryIdentifier||Lo(o,e))){var s=xo(o,e,n,r);0===o.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(i));var u=s.removed;a=s.events;var c=-1!==u.findIndex((function(t){return t._queryParams.loadsAllData()})),l=t.syncPointTree_.findOnPath(i,(function(t,e){return Mo(e)}));if(c&&!l){var h=t.syncPointTree_.subtree(i);if(!h.isEmpty())for(var f=function(t){return t.fold((function(t,e,n){if(e&&Mo(e))return[Fo(e)];var r=[];return e&&(r=Po(e)),Tn(n,(function(t,e){r=r.concat(e)})),r}))}(h),p=0;p<f.length;++p){var d=f[p],v=d.query,g=Xo(t,d);t.listenProvider_.startListening(ra(v),Jo(t,v),g.hashFn,g.onComplete)}}if(!l&&u.length>0&&!r)if(c){t.listenProvider_.stopListening(ra(e),null)}else u.forEach((function(e){var n=t.queryToTagMap.get(Zo(e));t.listenProvider_.stopListening(ra(e),n)}));!function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=Zo(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,u)}return a}function Ho(t,e,n){var r=e._path,i=null,o=!1;t.syncPointTree_.foreachOnPath(r,(function(t,e){var n=or(t,r);i=i||Do(e,n),o=o||Mo(e)}));var a,s=t.syncPointTree_.get(r);(s?(o=o||Mo(s),i=i||Do(s,Yn())):(s=new ko,t.syncPointTree_=t.syncPointTree_.set(r,s)),null!=i)?a=!0:(a=!1,i=Vr.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild((function(t,e){var n=Do(e,Yn());n&&(i=i.updateImmediateChild(t,n))})));var u=Lo(s,e);if(!u&&!e._queryParams.loadsAllData()){var c=Zo(e);It(!t.queryToTagMap.has(c),"View does not exist, but we have a tag");var l=jo++;t.queryToTagMap.set(c,l),t.tagToQueryMap.set(l,c)}var h=Ro(s,e,n,Qi(t.pendingWriteTree_,r),i,a);if(!u&&!o){var f=Oo(s,e);h=h.concat(function(t,e,n){var r=e._path,i=Jo(t,e),o=Xo(t,n),a=t.listenProvider_.startListening(ra(e),i,o.hashFn,o.onComplete),s=t.syncPointTree_.subtree(r);if(i)It(!Mo(s.value),"If we're adding a query, it shouldn't be shadowed");else for(var u=s.fold((function(t,e,n){if(!ir(t)&&e&&Mo(e))return[Fo(e).query];var r=[];return e&&(r=r.concat(Po(e).map((function(t){return t.query})))),Tn(n,(function(t,e){r=r.concat(e)})),r})),c=0;c<u.length;++c){var l=u[c];t.listenProvider_.stopListening(ra(l),Jo(t,l))}return a}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e,f))}return h}function zo(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,(function(t,n){var r=Do(n,or(t,e));if(r)return r}));return Zi(r,e,i,n,!0)}function Go(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,(function(t,e){var i=or(t,n);r=r||Do(e,i)}));var i=t.syncPointTree_.get(n);i?r=r||Do(i,Yn()):(i=new ko,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,a=o?new Ai(r,!0,!1):null;return function(t){return Oi(t.viewCache_)}(No(i,e,Qi(t.pendingWriteTree_,e._path),o?a.getNode():Vr.EMPTY_NODE,o))}function Qo(t,e){return $o(e,t.syncPointTree_,null,Qi(t.pendingWriteTree_,Yn()))}function $o(t,e,n,r){if(ir(t.path))return Yo(t,e,n,r);var i=e.get(Yn());null==n&&null!=i&&(n=Do(i,Yn()));var o=[],a=Xn(t.path),s=t.operationForChild(a),u=e.children.get(a);if(u&&s){var c=n?n.getImmediateChild(a):null,l=ao(r,a);o=o.concat($o(s,u,c,l))}return i&&(o=o.concat(Ao(i,t,r,n))),o}function Yo(t,e,n,r){var i=e.get(Yn());null==n&&null!=i&&(n=Do(i,Yn()));var o=[];return e.children.inorderTraversal((function(e,i){var a=n?n.getImmediateChild(e):null,s=ao(r,e),u=t.operationForChild(e);u&&(o=o.concat(Yo(u,i,a,s)))})),i&&(o=o.concat(Ao(i,t,r,n))),o}function Xo(t,e){var n=e.query,r=Jo(t,n);return{hashFn:function(){var t=function(t){return t.viewCache_.serverCache.getNode()}(e)||Vr.EMPTY_NODE;return t.hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ta(t,n);if(r){var i=ea(r),o=i.path,a=i.queryId,s=or(o,e);return na(t,o,new Si(Ii(a),s))}return[]}(t,n._path,r):function(t,e){return Qo(t,new Si({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Wo(t,n,null,i)}}}function Jo(t,e){var n=Zo(e);return t.queryToTagMap.get(n)}function Zo(t){return t._path.toString()+"$"+t._queryIdentifier}function ta(t,e){return t.tagToQueryMap.get(e)}function ea(t){var e=t.indexOf("$");return It(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new $n(t.substr(0,e))}}function na(t,e,n){var r=t.syncPointTree_.get(e);return It(r,"Missing sync point for query tag that we're tracking"),Ao(r,n,Qi(t.pendingWriteTree_,e),null)}function ra(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(It(Co,"Reference.ts has not been loaded"),Co)(t._repo,t._path):t}var ia=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),oa=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=rr(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return zo(this.syncTree_,this.path_)},t}(),aa=function(t,e,n){return t&&"object"==typeof t?(It(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?sa(t[".sv"],e,n):"object"==typeof t[".sv"]?ua(t[".sv"],e):void It(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},sa=function(t,e,n){if("timestamp"===t)return n.timestamp;It(!1,"Unexpected server value: "+t)},ua=function(t,e,n){t.hasOwnProperty("increment")||It(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&It(!1,"Unexpected increment value: "+r);var i=e.node();if(It(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r},ca=function(t,e,n,r){return ha(e,new oa(n,t),r)},la=function(t,e,n){return ha(t,new ia(e),n)};function ha(t,e,n){var r,i=t.getPriority().val(),o=aa(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var a=t,s=aa(a.getValue(),e,n);return s!==a.getValue()||o!==a.getPriority().val()?new xr(s,Kr(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new xr(o))),u.forEachChild(Lr,(function(t,i){var o=ha(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))})),r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fa=function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n};function pa(t,e){for(var n=e instanceof $n?e:new $n(e),r=t,i=Xn(n);null!==i;){var o=Qt(r.node.children,i)||{children:{},childCount:0};r=new fa(i,r,o),i=Xn(n=Zn(n))}return r}function da(t){return t.node.value}function va(t,e){t.node.value=e,ba(t)}function ga(t){return t.node.childCount>0}function ma(t,e){Tn(t.node.children,(function(n,r){e(new fa(n,t,r))}))}function ya(t,e,n,r){n&&!r&&e(t),ma(t,(function(t){ya(t,e,!0,r)})),n&&r&&e(t)}function _a(t){return new $n(null===t.parent?t.name:_a(t.parent)+"/"+t.name)}function ba(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===da(t)&&!ga(t)}(n),i=Gt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,ba(t)):r||i||(t.node.children[e]=n.node,t.node.childCount++,ba(t))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.parent,t.name,t)}var wa=/[\[\].#$\/\u0000-\u001F\u007F]/,Ia=/[\[\].#$\u0000-\u001F\u007F]/,Ta=function(t){return"string"==typeof t&&0!==t.length&&!wa.test(t)},Ea=function(t){return"string"==typeof t&&0!==t.length&&!Ia.test(t)},Sa=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!mn(t)||t&&"object"==typeof t&&Gt(t,".sv")},Ca=function(t,e,n,r){r&&void 0===e||ka(ne(t,"value"),e,n)},ka=function(t,e,n){var r=n instanceof $n?new cr(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+hr(r));if("function"==typeof e)throw new Error(t+"contains a function "+hr(r)+" with contents = "+e.toString());if(mn(e))throw new Error(t+"contains "+e.toString()+" "+hr(r));if("string"==typeof e&&e.length>10485760/3&&oe(e)>10485760)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+hr(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var i=!1,o=!1;if(Tn(e,(function(e,n){if(".value"===e)i=!0;else if(".priority"!==e&&".sv"!==e&&(o=!0,!Ta(e)))throw new Error(t+" contains an invalid key ("+e+") "+hr(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,s;s=e,(a=r).parts_.length>0&&(a.byteLength_+=1),a.parts_.push(s),a.byteLength_+=oe(s),lr(a),ka(t,n,r),function(t){var e=t.parts_.pop();t.byteLength_-=oe(e),t.parts_.length>0&&(t.byteLength_-=1)}(r)})),i&&o)throw new Error(t+' contains ".value" child '+hr(r)+" in addition to actual children.")}},Aa=function(t,e,n,r){if(!r||void 0!==e){var i=ne(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");var o=[];Tn(e,(function(t,e){var r=new $n(t);if(ka(i,e,rr(n,r)),".priority"===tr(r)&&!Sa(e))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)})),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=er(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!Ta(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(ar);var a=null;for(n=0;n<e.length;n++){if(r=e[n],null!==a&&ur(a,r))throw new Error(t+"contains a path "+a.toString()+" that is ancestor of another path "+r.toString());a=r}}(i,o)}},Na=function(t,e,n){if(!n||void 0!==e){if(mn(e))throw new Error(ne(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Sa(e))throw new Error(ne(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ra=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ne(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},xa=function(t,e,n,r){if(!(r&&void 0===n||Ta(n)))throw new Error(ne(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Pa=function(t,e,n,r){if(!(r&&void 0===n||Ea(n)))throw new Error(ne(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Da=function(t,e){if(".info"===Xn(e))throw new Error(t+" failed = Can't modify data under /.info/")},Oa=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!Ta(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Ea(t)}(n))throw new Error(ne(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},La=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(ne(t,e)+"must be a boolean.")},Ma=function(){this.eventLists_=[],this.recursionDepth_=0};function Fa(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||sr(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function ja(t,e,n){Fa(t,n),qa(t,(function(t){return sr(t,e)}))}function Ua(t,e,n){Fa(t,n),qa(t,(function(t){return ur(t,e)||ur(e,t)}))}function qa(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];if(i)e(i.path)?(Va(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}n&&(t.eventLists_=[]),t.recursionDepth_--}function Va(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();cn&&fn("event: "+n.toString()),kn(r)}}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ba=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Ma,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=di(),this.transactionQueueTree_=new fa,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Ka(t,e,n){if(t.stats_=jn(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new fi(t.repoInfo_,(function(e,n,r,i){za(t,e,n,r,i)}),t.authTokenProvider_,t.appCheckProvider_),setTimeout((function(){return Ga(t,!0)}),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Ht(n)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}t.persistentConnection_=new vr(t.repoInfo_,e,(function(e,n,r,i){za(t,e,n,r,i)}),(function(e){Ga(t,e)}),(function(e){!function(t,e){Tn(e,(function(e,n){Qa(t,e,n)}))}(t,e)}),t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,i,o;t.authTokenProvider_.addTokenChangeListener((function(e){t.server_.refreshAuthToken(e)})),t.appCheckProvider_.addTokenChangeListener((function(e){t.server_.refreshAppCheckToken(e.token)})),t.statsReporter_=(r=t.repoInfo_,i=function(){return new wi(t.stats_,t.server_)},o=r.toString(),Fn[o]||(Fn[o]=i()),Fn[o]),t.infoData_=new pi,t.infoSyncTree_=new Uo({startListening:function(e,n,r,i){var o=[],a=t.infoData_.getNode(e._path);return a.isEmpty()||(o=Ko(t.infoSyncTree_,e._path,a),setTimeout((function(){i("ok")}),0)),o},stopListening:function(){}}),Qa(t,"connected",!1),t.serverSyncTree_=new Uo({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,(function(n,r){var o=i(n,r);Ua(t.eventQueue_,e._path,o)})),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}function Wa(t){var e=t.infoData_.getNode(new $n(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Ha(t){return(e=(e={timestamp:Wa(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function za(t,e,n,r,i){t.dataUpdateCount++;var o=new $n(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(i)if(r){var s=Yt(n,(function(t){return Kr(t)}));a=function(t,e,n,r){var i=ta(t,r);if(i){var o=ea(i),a=o.path,s=o.queryId,u=or(a,e),c=Mi.fromObject(n);return na(t,a,new ki(Ii(s),u,c))}return[]}(t.serverSyncTree_,o,s,i)}else{var u=Kr(n);a=function(t,e,n,r){var i=ta(t,r);if(null!=i){var o=ea(i),a=o.path,s=o.queryId,u=or(a,e);return na(t,a,new Ci(Ii(s),u,n))}return[]}(t.serverSyncTree_,o,u,i)}else if(r){var c=Yt(n,(function(t){return Kr(t)}));a=function(t,e,n){var r=Mi.fromObject(n);return Qo(t,new ki({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,o,c)}else{var l=Kr(n);a=Ko(t.serverSyncTree_,o,l)}var h=o;a.length>0&&(h=os(t,o)),Ua(t.eventQueue_,h,a)}function Ga(t,e){Qa(t,"connected",e),!1===e&&function(t){es(t,"onDisconnectEvents");var e=Ha(t),n=di();mi(t.onDisconnect_,Yn(),(function(r,i){var o=ca(r,i,t.serverSyncTree_,e);vi(n,r,o)}));var r=[];mi(n,Yn(),(function(e,n){r=r.concat(Ko(t.serverSyncTree_,e,n));var i=ls(t,e);os(t,i)})),t.onDisconnect_=di(),Ua(t.eventQueue_,Yn(),r)}(t)}function Qa(t,e,n){var r=new $n("/.info/"+e),i=Kr(n);t.infoData_.updateSnapshot(r,i);var o=Ko(t.infoSyncTree_,r,i);Ua(t.eventQueue_,r,o)}function $a(t){return t.nextWriteId_++}function Ya(t,e,n,r,i){es(t,"set",{path:e.toString(),value:n,priority:r});var o=Ha(t),a=Kr(n,r),s=zo(t.serverSyncTree_,e),u=la(a,s,o),c=$a(t),l=qo(t.serverSyncTree_,e,u,c,!0);Fa(t.eventQueue_,l),t.server_.put(e.toString(),a.val(!0),(function(n,r){var o="ok"===n;o||gn("set at "+e+" failed: "+n);var a=Bo(t.serverSyncTree_,c,!o);Ua(t.eventQueue_,e,a),ns(t,i,n,r)}));var h=ls(t,e);os(t,h),Ua(t.eventQueue_,h,[])}function Xa(t,e,n){t.server_.onDisconnectCancel(e.toString(),(function(r,i){"ok"===r&&gi(t.onDisconnect_,e),ns(t,n,r,i)}))}function Ja(t,e,n,r){var i=Kr(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),(function(n,o){"ok"===n&&vi(t.onDisconnect_,e,i),ns(t,r,n,o)}))}function Za(t,e,n){var r;r=".info"===Xn(e._path)?Wo(t.infoSyncTree_,e,n):Wo(t.serverSyncTree_,e,n),ja(t.eventQueue_,e._path,r)}function ts(t){t.persistentConnection_&&t.persistentConnection_.interrupt("repo_interrupt")}function es(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),fn.apply(void 0,yt([r],mt(e)))}function ns(t,e,n,r){e&&kn((function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}}))}function rs(t,e,n){return zo(t.serverSyncTree_,e,n)||Vr.EMPTY_NODE}function is(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||cs(t,e),da(e)){var n=ss(t,e);It(n.length>0,"Sending zero length transaction queue"),n.every((function(t){return 0===t.status}))&&function(t,e,n){for(var r=n.map((function(t){return t.currentWriteId})),i=rs(t,e,r),o=i,a=i.hash(),s=0;s<n.length;s++){var u=n[s];It(0===u.status,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=1,u.retryCount++;var c=or(e,u.path);o=o.updateChild(c,u.currentOutputSnapshotRaw)}var l=o.val(!0),h=e;t.server_.put(h.toString(),l,(function(r){es(t,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(e){n[e].status=2,i=i.concat(Bo(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push((function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)})),n[e].unwatcher()},s=0;s<n.length;s++)a(s);cs(t,pa(t.transactionQueueTree_,e)),is(t,t.transactionQueueTree_),Ua(t.eventQueue_,e,i);for(s=0;s<o.length;s++)kn(o[s])}else{if("datastale"===r)for(s=0;s<n.length;s++)3===n[s].status?n[s].status=4:n[s].status=0;else{gn("transaction at "+h.toString()+" failed: "+r);for(s=0;s<n.length;s++)n[s].status=4,n[s].abortReason=r}os(t,e)}}),a)}(t,_a(e),n)}else ga(e)&&ma(e,(function(e){is(t,e)}))}function os(t,e){var n=as(t,e),r=_a(n);return function(t,e,n){if(0===e.length)return;for(var r=[],i=[],o=e.filter((function(t){return 0===t.status})).map((function(t){return t.currentWriteId})),a=function(a){var s,u,c=e[a],l=or(n,c.path),h=!1;if(It(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,s=c.abortReason,i=i.concat(Bo(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,s="maxretry",i=i.concat(Bo(t.serverSyncTree_,c.currentWriteId,!0));else{var f=rs(t,c.path,o);c.currentInputSnapshot=f;var p=e[a].update(f.val());if(void 0!==p){ka("transaction failed: Data returned ",p,c.path);var d=Kr(p);"object"==typeof p&&null!=p&&Gt(p,".priority")||(d=d.updatePriority(f.getPriority()));var v=c.currentWriteId,g=Ha(t),m=la(d,f,g);c.currentOutputSnapshotRaw=d,c.currentOutputSnapshotResolved=m,c.currentWriteId=$a(t),o.splice(o.indexOf(v),1),i=(i=i.concat(qo(t.serverSyncTree_,c.path,m,c.currentWriteId,c.applyLocally))).concat(Bo(t.serverSyncTree_,v,!0))}else h=!0,s="nodata",i=i.concat(Bo(t.serverSyncTree_,c.currentWriteId,!0))}Ua(t.eventQueue_,n,i),i=[],h&&(e[a].status=2,u=e[a].unwatcher,setTimeout(u,Math.floor(0)),e[a].onComplete&&("nodata"===s?r.push((function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)})):r.push((function(){return e[a].onComplete(new Error(s),!1,null)}))))},s=0;s<e.length;s++)a(s);cs(t,t.transactionQueueTree_);for(s=0;s<r.length;s++)kn(r[s]);is(t,t.transactionQueueTree_)}(t,ss(t,n),r),r}function as(t,e){var n,r=t.transactionQueueTree_;for(n=Xn(e);null!==n&&void 0===da(r);)r=pa(r,n),n=Xn(e=Zn(e));return r}function ss(t,e){var n=[];return us(t,e,n),n.sort((function(t,e){return t.order-e.order})),n}function us(t,e,n){var r=da(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);ma(e,(function(e){us(t,e,n)}))}function cs(t,e){var n=da(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,va(e,n.length>0?n:void 0)}ma(e,(function(e){cs(t,e)}))}function ls(t,e){var n=_a(as(t,e)),r=pa(t.transactionQueueTree_,e);return function(t,e,n){for(var r=n?t:t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,(function(e){hs(t,e)})),hs(t,r),ya(r,(function(e){hs(t,e)})),n}function hs(t,e){var n=da(e);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(It(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):(It(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(Bo(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?va(e,void 0):n.length=o+1,Ua(t.eventQueue_,_a(e),i);for(a=0;a<r.length;a++)kn(r[a])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fs=function(t,e){var n=ps(t),r=n.namespace;"firebase.com"===n.domain&&vn(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||vn("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&gn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new Dn(n.host,n.secure,r,e,i,"",r!==n.subdomain),path:new $n(n.pathString)}},ps=function(t){var e="",n="",r="",i="",o="",a=!0,s="https",u=443;if("string"==typeof t){var c=t.indexOf("//");c>=0&&(s=t.substring(0,c-1),t=t.substring(c+2));var l=t.indexOf("/");-1===l&&(l=t.length);var h=t.indexOf("?");-1===h&&(h=t.length),e=t.substring(0,Math.min(l,h)),l<h&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(l,h)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=gt(t.split("&")),o=i.next();!o.done;o=i.next()){var a=o.value;if(0!==a.length){var s=a.split("=");2===s.length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):gn("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,h)));(c=e.indexOf(":"))>=0?(a="https"===s||"wss"===s,u=parseInt(e.substring(c+1),10)):c=e.length;var p=e.slice(0,c);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var d=e.indexOf(".");r=e.substring(0,d).toLowerCase(),n=e.substring(d+1),o=r}"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:a,scheme:s,pathString:i,namespace:o}},ds=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Ht(this.snapshot.exportVal())},t}(),vs=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),gs=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return It(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),ms=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new Nt;return Xa(this._repo,this._path,t.wrapCallback((function(){}))),t.promise},t.prototype.remove=function(){Da("OnDisconnect.remove",this._path);var t=new Nt;return Ja(this._repo,this._path,null,t.wrapCallback((function(){}))),t.promise},t.prototype.set=function(t){Da("OnDisconnect.set",this._path),Ca("OnDisconnect.set",t,this._path,!1);var e=new Nt;return Ja(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t.prototype.setWithPriority=function(t,e){Da("OnDisconnect.setWithPriority",this._path),Ca("OnDisconnect.setWithPriority",t,this._path,!1),Na("OnDisconnect.setWithPriority",e,!1);var n=new Nt;return function(t,e,n,r,i){var o=Kr(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),(function(n,r){"ok"===n&&vi(t.onDisconnect_,e,o),ns(0,i,n,r)}))}(this._repo,this._path,t,e,n.wrapCallback((function(){}))),n.promise},t.prototype.update=function(t){Da("OnDisconnect.update",this._path),Aa("OnDisconnect.update",t,this._path,!1);var e=new Nt;return function(t,e,n,r){if($t(n))return fn("onDisconnect().update() called with empty data.  Don't do anything."),void ns(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,(function(i,o){"ok"===i&&Tn(n,(function(n,r){var i=Kr(r);vi(t.onDisconnect_,rr(e,n),i)})),ns(0,r,i,o)}))}(this._repo,this._path,t,e.wrapCallback((function(){}))),e.promise},t}(),ys=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return ir(this._path)?null:tr(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Is(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=hi(this._queryParams),e=wn(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return hi(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=se(e))instanceof t))return!1;var n=this._repo===e._repo,r=sr(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function _s(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function bs(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===_r){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if("[MIN_NAME]"!==t.getIndexStartName())throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if("[MAX_NAME]"!==t.getIndexEndName())throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Lr){if(null!=e&&!Sa(e)||null!=n&&!Sa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(It(t.getIndex()instanceof zr||t.getIndex()===Qr,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ws(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Is=function(t){function e(e,n){return t.call(this,e,n,new ai,!1)||this}return ft(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=nr(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(ys),Ts=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new $n(e),r=Cs(this.ref,e);return new t(this._node.getChild(n),r,Lr)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(function(r,i){return e(new t(i,Cs(n.ref,r),Lr))}))},t.prototype.hasChild=function(t){var e=new $n(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Es(t,e){return(t=se(t))._checkNotDeleted("ref"),void 0!==e?Cs(t._root,e):t._root}function Ss(t,e){(t=se(t))._checkNotDeleted("refFromURL");var n=fs(e,t._repo.repoInfo_.nodeAdmin);Oa("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||vn("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Es(t,n.path.toString())}function Cs(t,e){var n,r,i,o;return null===Xn((t=se(t))._path)?(n="child",r="path",o=!1,(i=e)&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),Pa(n,r,i,o)):Pa("child","path",e,!1),new Is(t._repo,rr(t._path,e))}function ks(t,e){t=se(t),Da("push",t._path),Ca("push",e,t._path,!0);var n,r=Wa(t._repo),i=Yr(r),o=Cs(t,i),a=Cs(t,i);return n=null!=e?Ns(a,e).then((function(){return a})):Promise.resolve(a),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),o}function As(t){return Da("remove",t._path),Ns(t,null)}function Ns(t,e){t=se(t),Da("set",t._path),Ca("set",e,t._path,!1);var n=new Nt;return Ya(t._repo,t._path,e,null,n.wrapCallback((function(){}))),n.promise}function Rs(t,e){t=se(t),Da("setPriority",t._path),Na("setPriority",e,!1);var n=new Nt;return Ya(t._repo,rr(t._path,".priority"),e,null,n.wrapCallback((function(){}))),n.promise}function xs(t,e,n){if(Da("setWithPriority",t._path),Ca("setWithPriority",e,t._path,!1),Na("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new Nt;return Ya(t._repo,t._path,e,n,r.wrapCallback((function(){}))),r.promise}function Ps(t,e){Aa("update",e,t._path,!1);var n=new Nt;return function(t,e,n,r){es(t,"update",{path:e.toString(),value:n});var i=!0,o=Ha(t),a={};if(Tn(n,(function(n,r){i=!1,a[n]=ca(rr(e,n),Kr(r),t.serverSyncTree_,o)})),i)fn("update() called with empty data.  Don't do anything."),ns(0,r,"ok",void 0);else{var s=$a(t),u=Vo(t.serverSyncTree_,e,a,s);Fa(t.eventQueue_,u),t.server_.merge(e.toString(),n,(function(n,i){var o="ok"===n;o||gn("update at "+e+" failed: "+n);var a=Bo(t.serverSyncTree_,s,!o),u=a.length>0?os(t,e):e;Ua(t.eventQueue_,u,a),ns(0,r,n,i)})),Tn(n,(function(n){var r=ls(t,rr(e,n));os(t,r)})),Ua(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback((function(){}))),n.promise}function Ds(t){return function(t,e){var n=Go(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then((function(n){var r=Kr(n).withIndex(e._queryParams.getIndex()),i=Ko(t.serverSyncTree_,e._path,r);return ja(t.eventQueue_,e._path,i),Promise.resolve(r)}),(function(n){return es(t,"get for query "+Ht(e)+" failed: "+n),Promise.reject(new Error(n))}))}((t=se(t))._repo,t).then((function(e){return new Ts(e,new Is(t._repo,t._path),t._queryParams.getIndex())}))}var Os=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new ds("value",this,new Ts(t.snapshotNode,new Is(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new vs(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Ls=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,this.eventType===e},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new vs(this,t,e):null},t.prototype.createEvent=function(t,e){It(null!=t.childName,"Child events should have a childName.");var n=Cs(new Is(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new ds(t.type,this,new Ts(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&(this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function Ms(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var a=n,s=function(e,n){Za(t._repo,t,c),a(e,n)};s.userCallback=n.userCallback,s.context=n.context,n=s}var u=new gs(n,o||void 0),c="value"===e?new Os(u):new Ls(e,u);return function(t,e,n){var r;r=".info"===Xn(e._path)?Ho(t.infoSyncTree_,e,n):Ho(t.serverSyncTree_,e,n),ja(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return Za(t._repo,t,c)}}function Fs(t,e,n,r){return Ms(t,"value",e,n,r)}function js(t,e,n,r){return Ms(t,"child_added",e,n,r)}function Us(t,e,n,r){return Ms(t,"child_changed",e,n,r)}function qs(t,e,n,r){return Ms(t,"child_moved",e,n,r)}function Vs(t,e,n,r){return Ms(t,"child_removed",e,n,r)}function Bs(t,e,n){var r=null,i=n?new gs(n):null;"value"===e?r=new Os(i):e&&(r=new Ls(e,i)),Za(t._repo,t,r)}var Ks=function(){},Ws=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ft(e,t),e.prototype._apply=function(t){Ca("endAt",this._value,t._path,!0);var e=ui(t._queryParams,this._value,this._key);if(ws(e),bs(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ys(t._repo,t._path,e,t._orderByCalled)},e}(Ks);function Hs(t,e){return xa("endAt","key",e,!0),new Ws(t,e)}var zs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ft(e,t),e.prototype._apply=function(t){Ca("endBefore",this._value,t._path,!1);var e,n,r,i,o=(e=t._queryParams,n=this._value,r=this._key,e.index_===_r?("string"==typeof n&&(n=Jr(n)),i=ui(e,n,r)):i=ui(e,n,null==r?"[MIN_NAME]":Jr(r)),i.endBeforeSet_=!0,i);if(ws(o),bs(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new ys(t._repo,t._path,o,t._orderByCalled)},e}(Ks);function Gs(t,e){return xa("endBefore","key",e,!0),new zs(t,e)}var Qs=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ft(e,t),e.prototype._apply=function(t){Ca("startAt",this._value,t._path,!0);var e=si(t._queryParams,this._value,this._key);if(ws(e),bs(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new ys(t._repo,t._path,e,t._orderByCalled)},e}(Ks);function $s(t,e){return void 0===t&&(t=null),xa("startAt","key",e,!0),new Qs(t,e)}var Ys=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ft(e,t),e.prototype._apply=function(t){Ca("startAfter",this._value,t._path,!1);var e=function(t,e,n){var r;t.index_===_r?("string"==typeof e&&(e=Xr(e)),r=si(t,e,n)):r=si(t,e,null==n?"[MAX_NAME]":Xr(n));return r.startAfterSet_=!0,r}(t._queryParams,this._value,this._key);if(ws(e),bs(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new ys(t._repo,t._path,e,t._orderByCalled)},e}(Ks);function Xs(t,e){return xa("startAfter","key",e,!0),new Ys(t,e)}var Js=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return ft(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new ys(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="l",r),t._orderByCalled);var e,n,r},e}(Ks);function Zs(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Js(t)}var tu=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return ft(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new ys(t._repo,t._path,(e=t._queryParams,n=this._limit,(r=e.copy()).limitSet_=!0,r.limit_=n,r.viewFrom_="r",r),t._orderByCalled);var e,n,r},e}(Ks);function eu(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new tu(t)}var nu=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return ft(e,t),e.prototype._apply=function(t){_s(t,"orderByChild");var e=new $n(this._path);if(ir(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new zr(e),r=ci(t._queryParams,n);return bs(r),new ys(t._repo,t._path,r,!0)},e}(Ks);function ru(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Pa("orderByChild","path",t,!1),new nu(t)}var iu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype._apply=function(t){_s(t,"orderByKey");var e=ci(t._queryParams,_r);return bs(e),new ys(t._repo,t._path,e,!0)},e}(Ks);function ou(){return new iu}var au=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype._apply=function(t){_s(t,"orderByPriority");var e=ci(t._queryParams,Lr);return bs(e),new ys(t._repo,t._path,e,!0)},e}(Ks);function su(){return new au}var uu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype._apply=function(t){_s(t,"orderByValue");var e=ci(t._queryParams,Qr);return bs(e),new ys(t._repo,t._path,e,!0)},e}(Ks);function cu(){return new uu}var lu=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return ft(e,t),e.prototype._apply=function(t){if(Ca("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ws(this._value,this._key)._apply(new Qs(this._value,this._key)._apply(t))},e}(Ks);function hu(t,e){return xa("equalTo","key",e,!0),new lu(t,e)}function fu(t){for(var e,n,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var o=se(t);try{for(var a=gt(r),s=a.next();!s.done;s=a.next()){var u=s.value;o=u._apply(o)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}return o}!function(t){It(!_o,"__referenceConstructor has already been defined"),_o=t}(Is),function(t){It(!Co,"__referenceConstructor has already been defined"),Co=t}(Is);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pu={},du=!1;function vu(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||vn("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fn("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var a,s=fs(o,i),u=s.repoInfo,c=void 0;void 0!==Le&&(c=Le.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(a=!0,o="http://"+c+"?ns="+u.namespace,u=(s=fs(o,i)).repoInfo):a=!s.repoInfo.secure;var l=i&&a?new xn(xn.OWNER):new Rn(t.name,t.options,e);Oa("Invalid Firebase Database URL",s),ir(s.path)||vn("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=pu[e.name];i||(i={},pu[e.name]=i);var o=i[t.toURLString()];o&&vn("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return o=new Ba(t,du,n,r),i[t.toURLString()]=o,o}(u,t,l,new Nn(t.name,n));return new gu(h,t)}var gu=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(Ka(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Is(this._repo,Yn())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,e=this.app.name,(n=pu[e])&&n[t.key]===t||vn("Database "+e+"("+t.repoInfo_+") has already been deleted."),ts(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&vn("Cannot call "+t+" on a deleted database.")},t}();function mu(t,e,n,r){void 0===r&&(r={}),(t=se(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&vn("Cannot call useEmulator() after instance has already been initialized.");var i=t._repoInternal,o=void 0;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&vn('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new xn(xn.OWNER);else if(r.mockUserToken){var a=Rt(r.mockUserToken,t.app.options.projectId);o=new xn(a)}!function(t,e,n,r){t.repoInfo_=new Dn(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(i,e,n,o)}function yu(t){(t=se(t))._checkNotDeleted("goOffline"),ts(t._repo)}function _u(t){var e;(t=se(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume("repo_interrupt")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var bu={".sv":"timestamp"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var wu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function Iu(t,e,n){var r;if(t=se(t),Da("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new Nt,a=Fs(t,(function(){}));return function(t,e,n,r,i,o){es(t,"transaction on "+e);var a={path:e,update:n,onComplete:r,status:null,order:an(),applyLocally:o,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},s=rs(t,e,void 0);a.currentInputSnapshot=s;var u=a.update(s.val());if(void 0===u)a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete&&a.onComplete(null,!1,a.currentInputSnapshot);else{ka("transaction failed: Data returned ",u,a.path),a.status=0;var c=pa(t.transactionQueueTree_,e),l=da(c)||[];l.push(a),va(c,l);var h=void 0;"object"==typeof u&&null!==u&&Gt(u,".priority")?(h=Qt(u,".priority"),It(Sa(h),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):h=(zo(t.serverSyncTree_,e)||Vr.EMPTY_NODE).getPriority().val();var f=Ha(t),p=Kr(u,h),d=la(p,s,f);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=d,a.currentWriteId=$a(t);var v=qo(t.serverSyncTree_,e,d,a.currentWriteId,a.applyLocally);Ua(t.eventQueue_,e,v),is(t,t.transactionQueueTree_)}}(t._repo,t._path,e,(function(e,n,r){var i=null;e?o.reject(e):(i=new Ts(r,new Is(t._repo,t._path),Lr),o.resolve(new wu(n,i)))}),a,i),o.promise}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Tu=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){ee("OnDisconnect.cancel",0,1,arguments.length),re("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.remove=function(t){ee("OnDisconnect.remove",0,1,arguments.length),re("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},t.prototype.set=function(t,e){ee("OnDisconnect.set",1,2,arguments.length),re("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},t.prototype.setWithPriority=function(t,e,n){ee("OnDisconnect.setWithPriority",2,3,arguments.length),re("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},t.prototype.update=function(t,e){if(ee("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,gn("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}re("OnDisconnect.update","onComplete",e,!0);var i=this._delegate.update(t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},t}(),Eu=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return ee("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),Su=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return ee("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return ee("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return ee("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return ee("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return ee("DataSnapshot.child",0,1,arguments.length),e=String(e),Pa("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return ee("DataSnapshot.hasChild",1,1,arguments.length),Pa("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return ee("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return ee("DataSnapshot.forEach",1,1,arguments.length),re("DataSnapshot.forEach","action",e,!1),this._delegate.forEach((function(r){return e(new t(n._database,r))}))},t.prototype.hasChildren=function(){return ee("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return ee("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return ee("DataSnapshot.ref",0,0,arguments.length),new ku(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),Cu=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,i){var o,a=this;ee("Query.on",2,4,arguments.length),re("Query.on","callback",n,!1);var s=t.getCancelAndContextArgs_("Query.on",r,i),u=function(t,e){n.call(s.context,new Su(a.database,t),e)};u.userCallback=n,u.context=s.context;var c=null===(o=s.cancel)||void 0===o?void 0:o.bind(s.context);switch(e){case"value":return Fs(this._delegate,u,c),n;case"child_added":return js(this._delegate,u,c),n;case"child_removed":return Vs(this._delegate,u,c),n;case"child_changed":return Us(this._delegate,u,c),n;case"child_moved":return qs(this._delegate,u,c),n;default:throw new Error(ne("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(ee("Query.off",0,3,arguments.length),Ra("Query.off",t,!0),re("Query.off","callback",e,!0),ie("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Bs(this._delegate,t,r)}else Bs(this._delegate,t)},t.prototype.get=function(){var t=this;return Ds(this._delegate).then((function(e){return new Su(t.database,e)}))},t.prototype.once=function(e,n,r,i){var o=this;ee("Query.once",1,4,arguments.length),re("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.once",r,i),s=new Nt,u=function(t,e){var r=new Su(o.database,t);n&&n.call(a.context,r,e),s.resolve(r)};u.userCallback=n,u.context=a.context;var c=function(t){a.cancel&&a.cancel.call(a.context,t),s.reject(t)};switch(e){case"value":Fs(this._delegate,u,c,{onlyOnce:!0});break;case"child_added":js(this._delegate,u,c,{onlyOnce:!0});break;case"child_removed":Vs(this._delegate,u,c,{onlyOnce:!0});break;case"child_changed":Us(this._delegate,u,c,{onlyOnce:!0});break;case"child_moved":qs(this._delegate,u,c,{onlyOnce:!0});break;default:throw new Error(ne("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise},t.prototype.limitToFirst=function(e){return ee("Query.limitToFirst",1,1,arguments.length),new t(this.database,fu(this._delegate,Zs(e)))},t.prototype.limitToLast=function(e){return ee("Query.limitToLast",1,1,arguments.length),new t(this.database,fu(this._delegate,eu(e)))},t.prototype.orderByChild=function(e){return ee("Query.orderByChild",1,1,arguments.length),new t(this.database,fu(this._delegate,ru(e)))},t.prototype.orderByKey=function(){return ee("Query.orderByKey",0,0,arguments.length),new t(this.database,fu(this._delegate,ou()))},t.prototype.orderByPriority=function(){return ee("Query.orderByPriority",0,0,arguments.length),new t(this.database,fu(this._delegate,su()))},t.prototype.orderByValue=function(){return ee("Query.orderByValue",0,0,arguments.length),new t(this.database,fu(this._delegate,cu()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),ee("Query.startAt",0,2,arguments.length),new t(this.database,fu(this._delegate,$s(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),ee("Query.startAfter",0,2,arguments.length),new t(this.database,fu(this._delegate,Xs(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),ee("Query.endAt",0,2,arguments.length),new t(this.database,fu(this._delegate,Hs(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),ee("Query.endBefore",0,2,arguments.length),new t(this.database,fu(this._delegate,Gs(e,n)))},t.prototype.equalTo=function(e,n){return ee("Query.equalTo",1,2,arguments.length),new t(this.database,fu(this._delegate,hu(e,n)))},t.prototype.toString=function(){return ee("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return ee("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(ee("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,re(t,"cancel",r.cancel,!0),r.context=n,ie(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(ne(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new ku(this.database,new Is(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),ku=function(t){function e(e,n){var r=t.call(this,e,new ys(n._repo,n._path,new ai,!1))||this;return r.database=e,r._delegate=n,r}return ft(e,t),e.prototype.getKey=function(){return ee("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return ee("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Cs(this._delegate,t))},e.prototype.getParent=function(){ee("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return ee("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){ee("Reference.set",1,2,arguments.length),re("Reference.set","onComplete",e,!0);var n=Ns(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.update=function(t,e){if(ee("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,gn("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Da("Reference.update",this._delegate._path),re("Reference.update","onComplete",e,!0);var i=Ps(this._delegate,t);return e&&i.then((function(){return e(null)}),(function(t){return e(t)})),i},e.prototype.setWithPriority=function(t,e,n){ee("Reference.setWithPriority",2,3,arguments.length),re("Reference.setWithPriority","onComplete",n,!0);var r=xs(this._delegate,t,e);return n&&r.then((function(){return n(null)}),(function(t){return n(t)})),r},e.prototype.remove=function(t){ee("Reference.remove",0,1,arguments.length),re("Reference.remove","onComplete",t,!0);var e=As(this._delegate);return t&&e.then((function(){return t(null)}),(function(e){return t(e)})),e},e.prototype.transaction=function(t,e,n){var r=this;ee("Reference.transaction",1,3,arguments.length),re("Reference.transaction","transactionUpdate",t,!1),re("Reference.transaction","onComplete",e,!0),La("Reference.transaction","applyLocally",n,!0);var i=Iu(this._delegate,t,{applyLocally:n}).then((function(t){return new Eu(t.committed,new Su(r.database,t.snapshot))}));return e&&i.then((function(t){return e(null,t.committed,t.snapshot)}),(function(t){return e(t,!1,null)})),i},e.prototype.setPriority=function(t,e){ee("Reference.setPriority",1,2,arguments.length),re("Reference.setPriority","onComplete",e,!0);var n=Rs(this._delegate,t);return e&&n.then((function(){return e(null)}),(function(t){return e(t)})),n},e.prototype.push=function(t,n){var r=this;ee("Reference.push",0,2,arguments.length),re("Reference.push","onComplete",n,!0);var i=ks(this._delegate,t),o=i.then((function(t){return new e(r.database,t)}));n&&o.then((function(){return n(null)}),(function(t){return n(t)}));var a=new e(this.database,i);return a.then=o.then.bind(o),a.catch=o.catch.bind(o,void 0),a},e.prototype.onDisconnect=function(){return Da("Reference.onDisconnect",this._delegate._path),new Tu(new ms(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(Cu),Au=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),mu(this._delegate,t,e,n)},t.prototype.ref=function(t){if(ee("database.ref",0,1,arguments.length),t instanceof ku){var e=Ss(this._delegate,t.toString());return new ku(this,e)}e=Es(this._delegate,t);return new ku(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";ee(e,1,1,arguments.length);var n=Ss(this._delegate,t);return new ku(this,n)},t.prototype.goOffline=function(){return ee("database.goOffline",0,0,arguments.length),yu(this._delegate)},t.prototype.goOnline=function(){return ee("database.goOnline",0,0,arguments.length),_u(this._delegate)},t.ServerValue={TIMESTAMP:bu,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nu=Object.freeze({__proto__:null,forceLongPolling:function(){Kn.forceDisallow(),qn.forceAllow()},forceWebSockets:function(){qn.forceDisallow()},isWebSocketsAvailable:function(){return Kn.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new bi(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce((function(t,e){return Math.max(e.length,t)}),0);Tn(n,(function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)}))}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){var n,r;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.stats_.incrementCounter(e),n=t.statsReporter_,r=e,n.statsToReport_[r]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,a=t.nodeAdmin,s=void 0!==a&&a;Xe(r);var u=new ce("auth-internal",new he("database-standalone"));return u.setComponent(new ue("auth-internal",(function(){return i}),"PRIVATE")),{instance:new Au(vu(e,u,void 0,n,s),e),namespace:o}}}),Ru=vr;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},vr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var xu=Hn,Pu=Dn,Du=Object.freeze({__proto__:null,DataConnection:Ru,RealTimeConnection:xu,hijackHash:function(t){var e=vr.prototype.put;return vr.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){vr.prototype.put=e}},ConnectionTarget:Pu,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){du=t}(t)}}),Ou=Au.ServerValue;!function(t){Xe(t.SDK_VERSION);var e=t.INTERNAL.registerComponent(new ue("database",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Au(vu(r,i,o,n),r)}),"PUBLIC").setServiceProps({Reference:ku,Query:Cu,Database:Au,DataSnapshot:Su,enableLogging:hn,INTERNAL:Nu,ServerValue:Ou,TEST_ACCESS:Du}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.10.7"),Mt()&&e}(Oe);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var Lu=function(t,e){return(Lu=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Mu(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Fu,ju="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},Uu=Uu||{},qu=ju||self;function Vu(){}function Bu(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ku(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Wu="closure_uid_"+(1e9*Math.random()>>>0),Hu=0;function zu(t,e,n){return t.call.apply(t.bind,arguments)}function Gu(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Qu(t,e,n){return(Qu=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zu:Gu).apply(null,arguments)}function $u(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Yu(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function Xu(){this.s=this.s,this.o=this.o}var Ju={};Xu.prototype.s=!1,Xu.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,Wu)&&t[Wu]||(t[Wu]=++Hu)}(this);delete Ju[t]}},Xu.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Zu=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},tc=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function ec(t){return Array.prototype.concat.apply([],arguments)}function nc(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function rc(t){return/^[\s\xa0]*$/.test(t)}var ic,oc=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function ac(t,e){return-1!=t.indexOf(e)}function sc(t,e){return t<e?-1:t>e?1:0}t:{var uc=qu.navigator;if(uc){var cc=uc.userAgent;if(cc){ic=cc;break t}}ic=""}function lc(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function hc(t){var e={};for(var n in t)e[n]=t[n];return e}var fc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pc(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<fc.length;o++)n=fc[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function dc(t){return dc[" "](t),t}dc[" "]=Vu;var vc,gc=ac(ic,"Opera"),mc=ac(ic,"Trident")||ac(ic,"MSIE"),yc=ac(ic,"Edge"),_c=yc||mc,bc=ac(ic,"Gecko")&&!(ac(ic.toLowerCase(),"webkit")&&!ac(ic,"Edge"))&&!(ac(ic,"Trident")||ac(ic,"MSIE"))&&!ac(ic,"Edge"),wc=ac(ic.toLowerCase(),"webkit")&&!ac(ic,"Edge");function Ic(){var t=qu.document;return t?t.documentMode:void 0}t:{var Tc="",Ec=function(){var t=ic;return bc?/rv:([^\);]+)(\)|;)/.exec(t):yc?/Edge\/([\d\.]+)/.exec(t):mc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):wc?/WebKit\/(\S+)/.exec(t):gc?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(Ec&&(Tc=Ec?Ec[1]:""),mc){var Sc=Ic();if(null!=Sc&&Sc>parseFloat(Tc)){vc=String(Sc);break t}}vc=Tc}var Cc,kc={};function Ac(){return function(t){var e=kc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}((function(){for(var t=0,e=oc(String(vc)).split("."),n=oc("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;t=sc(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||sc(0==o[2].length,0==a[2].length)||sc(o[2],a[2]),o=o[3],a=a[3]}while(0==t)}return 0<=t}))}if(qu.document&&mc){var Nc=Ic();Cc=Nc||(parseInt(vc,10)||void 0)}else Cc=void 0;var Rc=Cc,xc=function(){if(!qu.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{qu.addEventListener("test",Vu,e),qu.removeEventListener("test",Vu,e)}catch(t){}return t}();function Pc(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function Dc(t,e){if(Pc.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(bc){t:{try{dc(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Oc[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Dc.Z.h.call(this)}}Pc.prototype.h=function(){this.defaultPrevented=!0},Yu(Dc,Pc);var Oc={2:"touch",3:"pen",4:"mouse"};Dc.prototype.h=function(){Dc.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Lc="closure_listenable_"+(1e6*Math.random()|0),Mc=0;function Fc(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++Mc,this.ca=this.fa=!1}function jc(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function Uc(t){this.src=t,this.g={},this.h=0}function qc(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=Zu(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(jc(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function Vc(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}Uc.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var a=Vc(t,e,r,i);return-1<a?(e=t[a],n||(e.fa=!1)):((e=new Fc(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var Bc="closure_lm_"+(1e6*Math.random()|0),Kc={};function Wc(t,e,n,r,i){if(r&&r.once)return zc(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Wc(t,e[o],n,r,i);return null}return n=Zc(n),t&&t[Lc]?t.N(e,n,Ku(r)?!!r.capture:!!r,i):Hc(t,e,n,!1,r,i)}function Hc(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var a=Ku(i)?!!i.capture:!!i,s=Xc(t);if(s||(t[Bc]=s=new Uc(t)),(n=s.add(e,n,r,a,o)).proxy)return n;if(r=function(){function t(n){return e.call(t.src,t.listener,n)}var e=Yc;return t}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)xc||(i=a),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent($c(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function zc(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)zc(t,e[o],n,r,i);return null}return n=Zc(n),t&&t[Lc]?t.O(e,n,Ku(r)?!!r.capture:!!r,i):Hc(t,e,n,!0,r,i)}function Gc(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Gc(t,e[o],n,r,i);else r=Ku(r)?!!r.capture:!!r,n=Zc(n),t&&t[Lc]?(t=t.i,(e=String(e).toString())in t.g&&(-1<(n=Vc(o=t.g[e],n,r,i))&&(jc(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--)))):t&&(t=Xc(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Vc(e,n,r,i)),(n=-1<t?e[t]:null)&&Qc(n))}function Qc(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[Lc])qc(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent($c(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Xc(e))?(qc(n,t),0==n.h&&(n.src=null,e[Bc]=null)):jc(t)}}}function $c(t){return t in Kc?Kc[t]:Kc[t]="on"+t}function Yc(t,e){if(t.ca)t=!0;else{e=new Dc(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&Qc(t),t=n.call(r,e)}return t}function Xc(t){return(t=t[Bc])instanceof Uc?t:null}var Jc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zc(t){return"function"==typeof t?t:(t[Jc]||(t[Jc]=function(e){return t.handleEvent(e)}),t[Jc])}function tl(){Xu.call(this),this.i=new Uc(this),this.P=this,this.I=null}function el(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new Pc(e,t);else if(e instanceof Pc)e.target=e.target||t;else{var i=e;pc(e=new Pc(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=e.g=n[o];i=nl(a,r,!0,e)&&i}if(i=nl(a=e.g=t,r,!0,e)&&i,i=nl(a,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=nl(a=e.g=n[o],r,!1,e)&&i}function nl(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var a=e[o];if(a&&!a.ca&&a.capture==n){var s=a.listener,u=a.ia||a.src;a.fa&&qc(t.i,a),i=!1!==s.call(u,r)&&i}}return i&&!r.defaultPrevented}Yu(tl,Xu),tl.prototype[Lc]=!0,tl.prototype.removeEventListener=function(t,e,n,r){Gc(this,t,e,n,r)},tl.prototype.M=function(){if(tl.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)jc(n[r]);delete e.g[t],e.h--}}this.I=null},tl.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},tl.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var rl=qu.JSON.stringify;function il(){var t=fl,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var ol,al=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=sl.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),sl=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new ul}),(function(t){return t.reset()})),ul=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function cl(t){qu.setTimeout((function(){throw t}),0)}function ll(t,e){ol||function(){var t=qu.Promise.resolve(void 0);ol=function(){t.then(pl)}}(),hl||(ol(),hl=!0),fl.add(t,e)}var hl=!1,fl=new al;function pl(){for(var t;t=il();){try{t.h.call(t.g)}catch(t){cl(t)}var e=sl;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}hl=!1}function dl(t,e){tl.call(this),this.h=t||1,this.g=e||qu,this.j=Qu(this.kb,this),this.l=Date.now()}function vl(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function gl(t,e,n){if("function"==typeof t)n&&(t=Qu(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Qu(t.handleEvent,t)}return 2147483647<Number(e)?-1:qu.setTimeout(t,e||0)}function ml(t){t.g=gl((function(){t.g=null,t.i&&(t.i=!1,ml(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}Yu(dl,tl),(Fu=dl.prototype).da=!1,Fu.S=null,Fu.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),el(this,"tick"),this.da&&(vl(this),this.start()))}},Fu.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Fu.M=function(){dl.Z.M.call(this),vl(this),delete this.g};var yl=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Lu(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:ml(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(qu.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(Xu);function _l(t){Xu.call(this),this.h=t,this.g={}}Yu(_l,Xu);var bl=[];function wl(t,e,n,r){Array.isArray(n)||(n&&(bl[0]=n.toString()),n=bl);for(var i=0;i<n.length;i++){var o=Wc(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Il(t){lc(t.g,(function(t,e){this.g.hasOwnProperty(e)&&Qc(t)}),t),t.g={}}function Tl(){this.g=!0}function El(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return rl(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}_l.prototype.M=function(){_l.Z.M.call(this),Il(this)},_l.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tl.prototype.Aa=function(){this.g=!1},Tl.prototype.info=function(){};var Sl={},Cl=null;function kl(){return Cl=Cl||new tl}function Al(t){Pc.call(this,Sl.Ma,t)}function Nl(t){var e=kl();el(e,new Al(e,t))}function Rl(t,e){Pc.call(this,Sl.STAT_EVENT,t),this.stat=e}function xl(t){var e=kl();el(e,new Rl(e,t))}function Pl(t,e){Pc.call(this,Sl.Na,t),this.size=e}function Dl(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return qu.setTimeout((function(){t()}),e)}Sl.Ma="serverreachability",Yu(Al,Pc),Sl.STAT_EVENT="statevent",Yu(Rl,Pc),Sl.Na="timingevent",Yu(Pl,Pc);var Ol={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Ll={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Ml(){}function Fl(t){return t.h||(t.h=t.i())}function jl(){}Ml.prototype.h=null;var Ul,ql={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Vl(){Pc.call(this,"d")}function Bl(){Pc.call(this,"c")}function Kl(){}function Wl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new _l(this),this.P=zl,t=_c?125:void 0,this.W=new dl(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Hl}function Hl(){this.i=null,this.g="",this.h=!1}Yu(Vl,Pc),Yu(Bl,Pc),Yu(Kl,Ml),Kl.prototype.g=function(){return new XMLHttpRequest},Kl.prototype.i=function(){return{}},Ul=new Kl;var zl=45e3,Gl={},Ql={};function $l(t,e,n){t.K=1,t.v=yh(fh(e)),t.s=n,t.U=!0,Yl(t,null)}function Yl(t,e){t.F=Date.now(),th(t),t.A=fh(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),xh(n.h,"t",r),t.C=0,n=t.l.H,t.h=new Hl,t.g=Df(t.l,n?e:null,!t.s),0<t.O&&(t.L=new yl(Qu(t.Ia,t,t.g),t.O)),wl(t.V,t.g,"readystatechange",t.gb),e=t.H?hc(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),Nl(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var a="",s=o.split("&"),u=0;u<s.length;u++){var c=s[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+a}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Xl(t){return!!t.g&&("GET"==t.u&&2!=t.K&&t.l.Ba)}function Jl(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Zl(t,n))==Ql){4==e&&(t.o=4,xl(14),i=!1),El(t.j,t.m,null,"[Incomplete Response]");break}if(r==Gl){t.o=4,xl(15),El(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}El(t.j,t.m,r,null),oh(t,r)}Xl(t)&&r!=Ql&&r!=Gl&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,xl(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Sf(e),e.L=!0,xl(11))):(El(t.j,t.m,n,"[Invalid Chunked Response]"),ih(t),rh(t))}function Zl(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?Ql:(n=Number(e.substring(n,r)),isNaN(n)?Gl:(r+=1)+n>e.length?Ql:(e=e.substr(r,n),t.C=r+n,e))}function th(t){t.Y=Date.now()+t.P,eh(t,t.P)}function eh(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=Dl(Qu(t.eb,t),e)}function nh(t){t.B&&(qu.clearTimeout(t.B),t.B=null)}function rh(t){0==t.l.G||t.I||Af(t.l,t)}function ih(t){nh(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,vl(t.W),Il(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function oh(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||jh(n.i,t)))if(n.I=t.N,!t.J&&jh(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;kf(n),gf(n)}Ef(n),xl(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Dl(Qu(n.ab,n),6e3));if(1>=Fh(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Rf(n,11)}else if((t.J||n.g==t)&&kf(n),!rc(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var s=o[4];null!=s&&(n.za=s,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ac(l,"spdy")||ac(l,"quic")||ac(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Uh(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,mh(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var p=t;if((r=n).oa=Pf(r,r.H?r.la:null,r.W),p.J){qh(r.i,p);var d=p,v=r.K;v&&d.setTimeout(v),d.B&&(nh(d),th(d)),r.g=p}else Tf(r);0<n.l.length&&_f(n)}else"stop"!=o[0]&&"close"!=o[0]||Rf(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Rf(n,7):vf(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Nl(4)}catch(o){}}function ah(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Bu(t)||"string"==typeof t)tc(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(Bu(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(Bu(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t),i=r.length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function sh(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof sh)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function uh(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];ch(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)ch(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function ch(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Fu=Wl.prototype).setTimeout=function(t){this.P=t},Fu.gb=function(t){t=t.target;var e=this.L;e&&3==lf(t)?e.l():this.Ia(t)},Fu.Ia=function(t){try{if(t==this.g)t:{var e=lf(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||_c||this.g&&(this.h.h||this.g.ga()||hf(this.g)))){this.I||4!=e||7==n||Nl(8==n||0>=r?3:2),nh(this);var i=this.g.ba();this.N=i;e:if(Xl(this)){var o=hf(this.g);t="";var a=o.length,s=4==lf(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){ih(this),rh(this);var u="";break e}this.h.i=new qu.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:s&&n==a-1});o.splice(0,a),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,a){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+a}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!rc(c)){var h=c;break e}}h=null}if(!(i=h)){this.i=!1,this.o=3,xl(12),ih(this),rh(this);break t}El(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,oh(this,i)}this.U?(Jl(this,e,u),_c&&this.i&&3==e&&(wl(this.V,this.W,"tick",this.fb),this.W.start())):(El(this.j,this.m,u,null),oh(this,u)),4==e&&ih(this),this.i&&!this.I&&(4==e?Af(this.l,this):(this.i=!1,th(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,xl(12)):(this.o=0,xl(13)),ih(this),rh(this)}}}catch(e){}},Fu.fb=function(){if(this.g){var t=lf(this.g),e=this.g.ga();this.C<e.length&&(nh(this),Jl(this,t,e),this.i&&4!=t&&th(this))}},Fu.cancel=function(){this.I=!0,ih(this)},Fu.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(Nl(3),xl(17)),ih(this),this.o=2,rh(this)):eh(this,this.Y-t)},(Fu=sh.prototype).R=function(){uh(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},Fu.T=function(){return uh(this),this.g.concat()},Fu.get=function(t,e){return ch(this.h,t)?this.h[t]:e},Fu.set=function(t,e){ch(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},Fu.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var lh=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function hh(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof hh){this.g=void 0!==e?e:t.g,ph(this,t.j),this.s=t.s,dh(this,t.i),vh(this,t.m),this.l=t.l,e=t.h;var n=new kh;n.i=e.i,e.g&&(n.g=new sh(e.g),n.h=e.h),gh(this,n),this.o=t.o}else t&&(n=String(t).match(lh))?(this.g=!!e,ph(this,n[1]||"",!0),this.s=_h(n[2]||""),dh(this,n[3]||"",!0),vh(this,n[4]),this.l=_h(n[5]||"",!0),gh(this,n[6]||"",!0),this.o=_h(n[7]||"")):(this.g=!!e,this.h=new kh(null,this.g))}function fh(t){return new hh(t)}function ph(t,e,n){t.j=n?_h(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function dh(t,e,n){t.i=n?_h(e,!0):e}function vh(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function gh(t,e,n){e instanceof kh?(t.h=e,function(t,e){e&&!t.j&&(Ah(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Nh(this,e),xh(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=bh(e,Sh)),t.h=new kh(e,t.g))}function mh(t,e,n){t.h.set(e,n)}function yh(t){return mh(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function _h(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function bh(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,wh),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function wh(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}hh.prototype.toString=function(){var t=[],e=this.j;e&&t.push(bh(e,Ih,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(bh(e,Ih,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(bh(n,"/"==n.charAt(0)?Eh:Th,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",bh(n,Ch)),t.join("")};var Ih=/[#\/\?@]/g,Th=/[#\?:]/g,Eh=/[#\?]/g,Sh=/[#\?@]/g,Ch=/#/g;function kh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ah(t){t.g||(t.g=new sh,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Nh(t,e){Ah(t),e=Ph(t,e),ch(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,ch((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&uh(t)))}function Rh(t,e){return Ah(t),e=Ph(t,e),ch(t.g.h,e)}function xh(t,e,n){Nh(t,e),0<n.length&&(t.i=null,t.g.set(Ph(t,e),nc(n)),t.h+=n.length)}function Ph(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(Fu=kh.prototype).add=function(t,e){Ah(this),this.i=null,t=Ph(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},Fu.forEach=function(t,e){Ah(this),this.g.forEach((function(n,r){tc(n,(function(n){t.call(e,n,r,this)}),this)}),this)},Fu.T=function(){Ah(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Fu.R=function(t){Ah(this);var e=[];if("string"==typeof t)Rh(this,t)&&(e=ec(e,this.g.get(Ph(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=ec(e,t[n])}return e},Fu.set=function(t,e){return Ah(this),this.i=null,Rh(this,t=Ph(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},Fu.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},Fu.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),t.push(a)}}return this.i=t.join("&")};var Dh=function(t,e){this.h=t,this.g=e};function Oh(t){this.l=t||Lh,qu.PerformanceNavigationTiming?t=0<(t=qu.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):t=!!(qu.g&&qu.g.Ea&&qu.g.Ea()&&qu.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Lh=10;function Mh(t){return!!t.h||!!t.g&&t.g.size>=t.j}function Fh(t){return t.h?1:t.g?t.g.size:0}function jh(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function Uh(t,e){t.g?t.g.add(e):t.h=e}function qh(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function Vh(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=Mu(t.g.values()),o=i.next();!o.done;o=i.next()){var a=o.value;r=r.concat(a.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return nc(t.i)}function Bh(){}function Kh(){this.g=new Bh}function Wh(t,e,n){var r=n||"";try{ah(t,(function(t,n){var i=t;Ku(t)&&(i=rl(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function Hh(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function zh(t){this.l=t.$b||null,this.j=t.ib||!1}function Gh(t,e){tl.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=Qh,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Oh.prototype.cancel=function(){var t,e;if(this.i=Vh(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=Mu(this.g.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},Bh.prototype.stringify=function(t){return qu.JSON.stringify(t,void 0)},Bh.prototype.parse=function(t){return qu.JSON.parse(t,void 0)},Yu(zh,Ml),zh.prototype.g=function(){return new Gh(this.l,this.j)},zh.prototype.i=function(t){return function(){return t}}({}),Yu(Gh,tl);var Qh=0;function $h(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Yh(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Xh(t)}function Xh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(Fu=Gh.prototype).open=function(t,e){if(this.readyState!=Qh)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Xh(this)},Fu.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||qu).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Fu.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Yh(this)),this.readyState=Qh},Fu.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Xh(this)),this.g&&(this.readyState=3,Xh(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==qu.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$h(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},Fu.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Yh(this):Xh(this),3==this.readyState&&$h(this)}},Fu.Ua=function(t){this.g&&(this.response=this.responseText=t,Yh(this))},Fu.Ta=function(t){this.g&&(this.response=t,Yh(this))},Fu.ha=function(){this.g&&Yh(this)},Fu.setRequestHeader=function(t,e){this.v.append(t,e)},Fu.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},Fu.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(Gh.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Jh=qu.JSON.parse;function Zh(t){tl.call(this),this.headers=new sh,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=tf,this.K=this.L=!1}Yu(Zh,tl);var tf="",ef=/^https?$/i,nf=["POST","PUT"];function rf(t){return"content-type"==t.toLowerCase()}function of(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,af(t),uf(t)}function af(t){t.D||(t.D=!0,el(t,"complete"),el(t,"error"))}function sf(t){if(t.h&&void 0!==Uu&&(!t.C[1]||4!=lf(t)||2!=t.ba()))if(t.v&&4==lf(t))gl(t.Fa,0,t);else if(el(t,"readystatechange"),4==lf(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(lh)[1]||null;if(!o&&qu.self&&qu.self.location){var a=qu.self.location.protocol;o=a.substr(0,a.length-1)}i=!ef.test(o?o.toLowerCase():"")}e=i}if(e)el(t,"complete"),el(t,"success");else{t.m=6;try{var s=2<lf(t)?t.g.statusText:""}catch(t){s=""}t.j=s+" ["+t.ba()+"]",af(t)}}finally{uf(t)}}}function uf(t,e){if(t.g){cf(t);var n=t.g,r=t.C[0]?Vu:null;t.g=null,t.C=null,e||el(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function cf(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(qu.clearTimeout(t.A),t.A=null)}function lf(t){return t.g?t.g.readyState:0}function hf(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case tf:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function ff(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return lc(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):mh(t,e,n))}function pf(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function df(t){this.za=0,this.l=[],this.h=new Tl,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=pf("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=pf("baseRetryDelayMs",5e3,t),this.$a=pf("retryDelaySeedMs",1e4,t),this.Ya=pf("forwardChannelMaxRetries",2,t),this.ra=pf("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new Oh(t&&t.concurrentRequestLimit),this.Ca=new Kh,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function vf(t){if(mf(t),3==t.G){var e=t.V++,n=fh(t.F);mh(n,"SID",t.J),mh(n,"RID",e),mh(n,"TYPE","terminate"),wf(t,n),(e=new Wl(t,t.h,e,void 0)).K=2,e.v=yh(fh(n)),n=!1,qu.navigator&&qu.navigator.sendBeacon&&(n=qu.navigator.sendBeacon(e.v.toString(),"")),!n&&qu.Image&&((new Image).src=e.v,n=!0),n||(e.g=Df(e.l,null),e.g.ea(e.v)),e.F=Date.now(),th(e)}xf(t)}function gf(t){t.g&&(Sf(t),t.g.cancel(),t.g=null)}function mf(t){gf(t),t.u&&(qu.clearTimeout(t.u),t.u=null),kf(t),t.i.cancel(),t.m&&("number"==typeof t.m&&qu.clearTimeout(t.m),t.m=null)}function yf(t,e){t.l.push(new Dh(t.Za++,e)),3==t.G&&_f(t)}function _f(t){Mh(t.i)||t.m||(t.m=!0,ll(t.Ha,t),t.C=0)}function bf(t,e){var n;n=e?e.m:t.V++;var r=fh(t.F);mh(r,"SID",t.J),mh(r,"RID",n),mh(r,"AID",t.U),wf(t,r),t.o&&t.s&&ff(r,t.o,t.s),n=new Wl(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=If(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),Uh(t.i,n),$l(n,r,e)}function wf(t,e){t.j&&ah({},(function(t,n){mh(e,n,t)}))}function If(t,e,n){n=Math.min(t.l.length,n);var r=t.j?Qu(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var s=!0,u=0;u<n;u++){var c=i[u].h,l=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),s=!1;else try{Wh(l,a,"req"+c+"_")}catch(t){r&&r(l)}}if(s){r=a.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function Tf(t){t.g||t.u||(t.Y=1,ll(t.Ga,t),t.A=0)}function Ef(t){return!(t.g||t.u||3<=t.A)&&(t.Y++,t.u=Dl(Qu(t.Ga,t),Nf(t,t.A)),t.A++,!0)}function Sf(t){null!=t.B&&(qu.clearTimeout(t.B),t.B=null)}function Cf(t){t.g=new Wl(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=fh(t.oa);mh(e,"RID","rpc"),mh(e,"SID",t.J),mh(e,"CI",t.N?"0":"1"),mh(e,"AID",t.U),wf(t,e),mh(e,"TYPE","xmlhttp"),t.o&&t.s&&ff(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=yh(fh(e)),n.s=null,n.U=!0,Yl(n,t)}function kf(t){null!=t.v&&(qu.clearTimeout(t.v),t.v=null)}function Af(t,e){var n=null;if(t.g==e){kf(t),Sf(t),t.g=null;var r=2}else{if(!jh(t.i,e))return;n=e.D,qh(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;el(r=kl(),new Pl(r,n,e,i)),_f(t)}else Tf(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Fh(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=Dl(Qu(t.Ha,t,e),Nf(t,t.C)),t.C++,0)))}(t,e)||2==r&&Ef(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Rf(t,5);break;case 4:Rf(t,10);break;case 3:Rf(t,6);break;default:Rf(t,2)}}function Nf(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function Rf(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=Qu(t.jb,t);n||(n=new hh("//www.google.com/images/cleardot.gif"),qu.location&&"http"==qu.location.protocol||ph(n,"https"),yh(n)),function(t,e){var n=new Tl;if(qu.Image){var r=new Image;r.onload=$u(Hh,n,r,"TestLoadImage: loaded",!0,e),r.onerror=$u(Hh,n,r,"TestLoadImage: error",!1,e),r.onabort=$u(Hh,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=$u(Hh,n,r,"TestLoadImage: timeout",!1,e),qu.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else xl(2);t.G=0,t.j&&t.j.va(e),xf(t),mf(t)}function xf(t){t.G=0,t.I=-1,t.j&&(0==Vh(t.i).length&&0==t.l.length||(t.i.i.length=0,nc(t.l),t.l.length=0),t.j.ua())}function Pf(t,e,n){var r=function(t){return t instanceof hh?fh(t):new hh(t,void 0)}(n);if(""!=r.i)e&&dh(r,e+"."+r.i),vh(r,r.m);else{var i=qu.location;r=function(t,e,n,r){var i=new hh(null,void 0);return t&&ph(i,t),e&&dh(i,e),n&&vh(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&lc(t.aa,(function(t,e){mh(r,e,t)})),e=t.D,n=t.sa,e&&n&&mh(r,e,n),mh(r,"VER",t.ma),wf(t,r),r}function Df(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new Zh(new zh({ib:!0})):new Zh(t.qa)).L=t.H,e}function Of(){}function Lf(){if(mc&&!(10<=Number(Rc)))throw Error("Environmental error: no available transport.")}function Mf(t,e){tl.call(this),this.g=new df(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!rc(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!rc(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&(e in(t=this.h)&&delete t[e])),this.j=new Uf(this)}function Ff(t){Vl.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function jf(){Bl.call(this),this.status=1}function Uf(t){this.g=t}(Fu=Zh.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ul.g(),this.C=this.u?Fl(this.u):Fl(Ul),this.g.onreadystatechange=Qu(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void of(this,t)}t=n||"";var i=new sh(this.headers);r&&ah(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=rf,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=qu.FormData&&t instanceof qu.FormData,!(0<=Zu(nf,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{cf(this),0<this.B&&((this.K=function(t){return mc&&Ac()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Qu(this.pa,this)):this.A=gl(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){of(this,t)}},Fu.pa=function(){void 0!==Uu&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,el(this,"timeout"),this.abort(8))},Fu.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,el(this,"complete"),el(this,"abort"),uf(this))},Fu.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uf(this,!0)),Zh.Z.M.call(this)},Fu.Fa=function(){this.s||(this.F||this.v||this.l?sf(this):this.cb())},Fu.cb=function(){sf(this)},Fu.ba=function(){try{return 2<lf(this)?this.g.status:-1}catch(t){return-1}},Fu.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},Fu.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Jh(e)}},Fu.Da=function(){return this.m},Fu.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Fu=df.prototype).ma=8,Fu.G=1,Fu.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},Fu.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new Wl(this,this.h,t,void 0),n=this.s;if(this.P&&(n?pc(n=hc(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=If(this,e,r),mh(i=fh(this.F),"RID",t),mh(i,"CVER",22),this.D&&mh(i,"X-HTTP-Session-Id",this.D),wf(this,i),this.o&&n&&ff(i,this.o,n),Uh(this.i,e),this.Ra&&mh(i,"TYPE","init"),this.ja?(mh(i,"$req",r),mh(i,"SID","null"),e.$=!0,$l(e,i,null)):$l(e,i,r),this.G=2}}else 3==this.G&&(t?bf(this,t):0==this.l.length||Mh(this.i)||bf(this))},Fu.Ga=function(){if(this.u=null,Cf(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=Dl(Qu(this.bb,this),t)}},Fu.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,xl(10),gf(this),Cf(this))},Fu.ab=function(){null!=this.v&&(this.v=null,gf(this),Ef(this),xl(19))},Fu.jb=function(t){t?(this.h.info("Successfully pinged google.com"),xl(2)):(this.h.info("Failed to ping google.com"),xl(1))},(Fu=Of.prototype).xa=function(){},Fu.wa=function(){},Fu.va=function(){},Fu.ua=function(){},Fu.Oa=function(){},Lf.prototype.g=function(t,e){return new Mf(t,e)},Yu(Mf,tl),Mf.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),ll(Qu(t.hb,t,e))),xl(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=Pf(t,null,t.W),_f(t)},Mf.prototype.close=function(){vf(this.g)},Mf.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,yf(this.g,e)}else this.v?((e={}).__data__=rl(t),yf(this.g,e)):yf(this.g,t)},Mf.prototype.M=function(){this.g.j=null,delete this.j,vf(this.g),delete this.g,Mf.Z.M.call(this)},Yu(Ff,Vl),Yu(jf,Bl),Yu(Uf,Of),Uf.prototype.xa=function(){el(this.g,"a")},Uf.prototype.wa=function(t){el(this.g,new Ff(t))},Uf.prototype.va=function(t){el(this.g,new jf(t))},Uf.prototype.ua=function(){el(this.g,"b")},Lf.prototype.createWebChannel=Lf.prototype.g,Mf.prototype.send=Mf.prototype.u,Mf.prototype.open=Mf.prototype.m,Mf.prototype.close=Mf.prototype.close,Ol.NO_ERROR=0,Ol.TIMEOUT=8,Ol.HTTP_ERROR=6,Ll.COMPLETE="complete",jl.EventType=ql,ql.OPEN="a",ql.CLOSE="b",ql.ERROR="c",ql.MESSAGE="d",tl.prototype.listen=tl.prototype.N,Zh.prototype.listenOnce=Zh.prototype.O,Zh.prototype.getLastError=Zh.prototype.La,Zh.prototype.getLastErrorCode=Zh.prototype.Da,Zh.prototype.getStatus=Zh.prototype.ba,Zh.prototype.getResponseJson=Zh.prototype.Qa,Zh.prototype.getResponseText=Zh.prototype.ga,Zh.prototype.send=Zh.prototype.ea;var qf=function(){return new Lf},Vf=function(){return kl()},Bf=Ol,Kf=Ll,Wf=Sl,Hf={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},zf=zh,Gf=jl,Qf=Zh,$f=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();$f.o=-1;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Yf={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Xf=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return ft(e,t),e}(Error),Jf=new be("@firebase/firestore");function Zf(){return Jf.logLevel}function tp(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Jf.logLevel<=pe.DEBUG){var r=e.map(rp);Jf.debug.apply(Jf,yt(["Firestore (8.7.0): "+t],r))}}function ep(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Jf.logLevel<=pe.ERROR){var r=e.map(rp);Jf.error.apply(Jf,yt(["Firestore (8.7.0): "+t],r))}}function np(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Jf.logLevel<=pe.WARN){var r=e.map(rp);Jf.warn.apply(Jf,yt(["Firestore (8.7.0): "+t],r))}}function rp(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.7.0) INTERNAL ASSERTION FAILED: "+t;throw ep(e),new Error(e)}function op(t,e){t||ip()}function ap(t,e){return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var up=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=sp(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function cp(t,e){return t<e?-1:t>e?1:0}function lp(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function hp(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fp=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Xf(Yf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Xf(Yf.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Xf(Yf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Xf(Yf.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?cp(this.nanoseconds,t.nanoseconds):cp(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),pp=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new fp(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function vp(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function gp(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mp=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&ip(),void 0===n?n=t.length-e:n>t.length-e&&ip(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),yp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var a=o[i];if(a.indexOf("//")>=0)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid segment ("+a+"). Paths must not contain // in them.");r.push.apply(r,a.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(mp),_p=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bp=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return _p.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},a=!1;i<t.length;){var s=t[i];if("\\"===s){if(i+1===t.length)throw new Xf(Yf.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Xf(Yf.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===s?(a=!a,i++):"."!==s||a?(r+=s,i++):(o(),i++)}if(o(),a)throw new Xf(Yf.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(mp),wp=function(){function t(t){this.fields=t,t.sort(bp.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return lp(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Ip=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){var t;return t=this.binaryString,btoa(t)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return cp(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Ip.EMPTY_BYTE_STRING=new Ip("");var Tp=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ep(t){if(op(!!t),"string"==typeof t){var e=0,n=Tp.exec(t);if(op(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Sp(t.seconds),nanos:Sp(t.nanos)}}function Sp(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Cp(t){return"string"==typeof t?Ip.fromBase64String(t):Ip.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kp(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ap(t){var e=t.mapValue.fields.__previous_value__;return kp(e)?Ap(e):e}function Np(t){var e=Ep(t.mapValue.fields.__local_write_time__.timestampValue);return new fp(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(t){return null==t}function xp(t){return 0===t&&1/t==-1/0}function Pp(t){return"number"==typeof t&&Number.isInteger(t)&&!xp(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Dp=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(yp.fromString(e))},t.fromName=function(e){return new t(yp.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===yp.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return yp.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new yp(e.slice()))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Op(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kp(t)?4:10:ip()}function Lp(t,e){var n,r=Op(t);if(r!==Op(e))return!1;switch(r){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Np(t).isEqual(Np(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=Ep(t.timestampValue),r=Ep(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return n=e,Cp(t.bytesValue).isEqual(Cp(n.bytesValue));case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Sp(t.geoPointValue.latitude)===Sp(e.geoPointValue.latitude)&&Sp(t.geoPointValue.longitude)===Sp(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Sp(t.integerValue)===Sp(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Sp(t.doubleValue),r=Sp(e.doubleValue);return n===r?xp(n)===xp(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return lp(t.arrayValue.values||[],e.arrayValue.values||[],Lp);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(dp(n)!==dp(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Lp(n[i],r[i])))return!1;return!0}(t,e);default:return ip()}}function Mp(t,e){return void 0!==(t.values||[]).find((function(t){return Lp(t,e)}))}function Fp(t,e){var n,r,i,o,a=Op(t),s=Op(e);if(a!==s)return cp(a,s);switch(a){case 0:return 0;case 1:return cp(t.booleanValue,e.booleanValue);case 2:return r=e,i=Sp((n=t).integerValue||n.doubleValue),o=Sp(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return jp(t.timestampValue,e.timestampValue);case 4:return jp(Np(t),Np(e));case 5:return cp(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Cp(t),r=Cp(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=cp(n[i],r[i]);if(0!==o)return o}return cp(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=cp(Sp(t.latitude),Sp(e.latitude));return 0!==n?n:cp(Sp(t.longitude),Sp(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Fp(n[i],r[i]);if(o)return o}return cp(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var s=cp(r[a],o[a]);if(0!==s)return s;var u=Fp(n[r[a]],i[o[a]]);if(0!==u)return u}return cp(r.length,o.length)}(t.mapValue,e.mapValue);default:throw ip()}}function jp(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return cp(t,e);var n=Ep(t),r=Ep(e),i=cp(n.seconds,r.seconds);return 0!==i?i:cp(n.nanos,r.nanos)}function Up(t){return qp(t)}function qp(t){var e,n,r,i;return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(r=t.timestampValue,"time("+(i=Ep(r)).seconds+","+i.nanos+")"):"stringValue"in t?t.stringValue:"bytesValue"in t?Cp(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,Dp.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=qp(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+qp(t.fields[o])}return e+"}"}(t.mapValue):ip()}function Vp(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Bp(t){return!!t&&"integerValue"in t}function Kp(t){return!!t&&"arrayValue"in t}function Wp(t){return!!t&&"nullValue"in t}function Hp(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function zp(t){return!!t&&"mapValue"in t}function Gp(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue)return{timestampValue:Object.assign({},Ep(t.timestampValue))};if(t.mapValue){var e={mapValue:{fields:{}}};return vp(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=Gp(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Gp(t.arrayValue.values[r]);return n}return Object.assign({},t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qp=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!zp(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=Gp(e)},t.prototype.setAll=function(t){var e=this,n=bp.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var a=e.getFieldsMap(n);e.applyChanges(a,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=Gp(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());zp(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return Lp(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];zp(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){vp(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(Gp(this.value))},t}();function $p(t){var e=[];return vp(t.fields,(function(t,n){var r=new bp([t]);if(zp(n)){var i=$p(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,a=i;o<a.length;o++){var s=a[o];e.push(r.child(s))}}else e.push(r)})),new wp(e)}var Yp=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,pp.min(),Qp.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,Qp.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,Qp.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=Qp.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=Qp.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Xp=function(t,e,n,r,i,o,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.h=null};
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(t,e,n,r,i,o,a){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===a&&(a=null),new Xp(t,e,n,r,i,o,a)}function Zp(t){var e=ap(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return(e=t).field.canonicalString()+e.op.toString()+Up(e.value);var e})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return(e=t).field.canonicalString()+e.dir;var e})).join(","),Rp(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=fd(e.startAt)),e.endAt&&(n+="|ub:",n+=fd(e.endAt)),e.h=n}return e.h}function td(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!dd(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!Lp(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gd(t.startAt,e.startAt)&&gd(t.endAt,e.endAt)}function ed(t){return Dp.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var nd=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return ft(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new rd(t,n,r):"array-contains"===n?new sd(t,r):"in"===n?new ud(t,r):"not-in"===n?new cd(t,r):"array-contains-any"===n?new ld(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new id(t,n):new od(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(Fp(e,this.value)):null!==e&&Op(this.value)===Op(e)&&this.m(Fp(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ip()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),rd=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Dp.fromName(r.referenceValue),i}return ft(e,t),e.prototype.matches=function(t){var e=Dp.comparator(t.key,this.key);return this.m(e)},e}(nd),id=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=ad("in",n),r}return ft(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(nd),od=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=ad("not-in",n),r}return ft(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(nd);function ad(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return Dp.fromName(t.referenceValue)}))}var sd=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return ft(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Kp(e)&&Mp(e.arrayValue,this.value)},e}(nd),ud=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return ft(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Mp(this.value.arrayValue,e)},e}(nd),cd=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return ft(e,t),e.prototype.matches=function(t){if(Mp(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Mp(this.value.arrayValue,e)},e}(nd),ld=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return ft(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Kp(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return Mp(e.value.arrayValue,t)}))},e}(nd),hd=function(t,e){this.position=t,this.before=e};function fd(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return Up(t)})).join(",")}var pd=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function dd(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function vd(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],a=t.position[i];if(r=o.field.isKeyField()?Dp.comparator(Dp.fromName(a.referenceValue),n.key):Fp(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function gd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Lp(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var md=function(t,e,n,r,i,o,a,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===a&&(a=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.p=null,this.T=null,this.startAt,this.endAt};function yd(t,e,n,r,i,o,a,s){return new md(t,e,n,r,i,o,a,s)}function _d(t){return new md(t)}function bd(t){return!Rp(t.limit)&&"F"===t.limitType}function wd(t){return!Rp(t.limit)&&"L"===t.limitType}function Id(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Td(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function Ed(t){return null!==t.collectionGroup}function Sd(t){var e=ap(t);if(null===e.p){e.p=[];var n=Td(e),r=Id(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new pd(n)),e.p.push(new pd(bp.keyField(),"asc"));else{for(var i=!1,o=0,a=e.explicitOrderBy;o<a.length;o++){var s=a[o];e.p.push(s),s.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new pd(bp.keyField(),u))}}}return e.p}function Cd(t){var e=ap(t);if(!e.T)if("F"===e.limitType)e.T=Jp(e.path,e.collectionGroup,Sd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Sd(e);r<i.length;r++){var o=i[r],a="desc"===o.dir?"asc":"desc";n.push(new pd(o.field,a))}var s=e.endAt?new hd(e.endAt.position,!e.endAt.before):null,u=e.startAt?new hd(e.startAt.position,!e.startAt.before):null;e.T=Jp(e.path,e.collectionGroup,n,e.filters,e.limit,s,u)}return e.T}function kd(t,e,n){return new md(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ad(t,e){return td(Cd(t),Cd(e))&&t.limitType===e.limitType}function Nd(t){return Zp(Cd(t))+"|lt:"+t.limitType}function Rd(t){return"Query(target="+(e=Cd(t),n=e.path.canonicalString(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=", filters: ["+e.filters.map((function(t){var e;return(e=t).field.canonicalString()+" "+e.op+" "+Up(e.value)})).join(", ")+"]"),Rp(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=", orderBy: ["+e.orderBy.map((function(t){return(e=t).field.canonicalString()+" ("+e.dir+")";var e})).join(", ")+"]"),e.startAt&&(n+=", startAt: "+fd(e.startAt)),e.endAt&&(n+=", endAt: "+fd(e.endAt)),"Target("+n+"); limitType=")+t.limitType+")";var e,n}function xd(t,e){return e.isFoundDocument()&&(n=t,i=(r=e).key.path,null!==n.collectionGroup?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):Dp.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i))&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!vd(t.startAt,Sd(t),e)||t.endAt&&vd(t.endAt,Sd(t),e))}(t,e);var n,r,i}function Pd(t){return function(e,n){for(var r=!1,i=0,o=Sd(t);i<o.length;i++){var a=o[i],s=Dd(a,e,n);if(0!==s)return s;r=r||a.field.isKeyField()}return 0}}function Dd(t,e,n){var r,i,o,a,s=t.field.isKeyField()?Dp.comparator(e.key,n.key):(r=t.field,i=n,o=e.data.field(r),a=i.data.field(r),null!==o&&null!==a?Fp(o,a):ip());switch(t.dir){case"asc":return s;case"desc":return-1*s;default:return ip()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Od(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xp(e)?"-0":e}}function Ld(t){return{integerValue:""+t}}function Md(t,e){return Pp(e)?Ld(e):Od(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fd=function(){this._=void 0};function jd(t,e,n){return t instanceof Vd?(i=e,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):t instanceof Bd?Kd(t,e):t instanceof Wd?Hd(t,e):function(t,e){var n=qd(t,e),r=Gd(n)+Gd(t.A);return Bp(n)&&Bp(t.A)?Ld(r):Od(t.R,r)}(t,e);var r,i,o}function Ud(t,e,n){return t instanceof Bd?Kd(t,e):t instanceof Wd?Hd(t,e):n}function qd(t,e){var n,r;return t instanceof zd?Bp(n=e)||(r=n)&&"doubleValue"in r?e:{integerValue:0}:null}var Vd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e}(Fd),Bd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ft(e,t),e}(Fd);function Kd(t,e){for(var n=Qd(e),r=function(t){n.some((function(e){return Lp(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Wd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return ft(e,t),e}(Fd);function Hd(t,e){for(var n=Qd(e),r=function(t){n=n.filter((function(e){return!Lp(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var zd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return ft(e,t),e}(Fd);function Gd(t){return Sp(t.integerValue||t.doubleValue)}function Qd(t){return Kp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $d=function(t,e){this.field=t,this.transform=e},Yd=function(t,e){this.version=t,this.transformResults=e},Xd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Jd(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Zd=function(){};function tv(t,e,n){var r,i,o,a,s;t instanceof ov?(i=e,o=n,a=(r=t).value.clone(),s=uv(r.fieldTransforms,i,o.transformResults),a.setAll(s),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):t instanceof av?function(t,e,n){if(Jd(t.precondition,e)){var r=uv(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(sv(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ev(t,e,n){var r;t instanceof ov?function(t,e,n){if(Jd(t.precondition,e)){var r=t.value.clone(),i=cv(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(iv(e),r).setHasLocalMutations()}}(t,e,n):t instanceof av?function(t,e,n){if(Jd(t.precondition,e)){var r=cv(t.fieldTransforms,n,e),i=e.data;i.setAll(sv(t)),i.setAll(r),e.convertToFoundDocument(iv(e),i).setHasLocalMutations()}}(t,e,n):(r=e,Jd(t.precondition,r)&&r.convertToNoDocument(pp.min()))}function nv(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],a=e.data.field(o.field),s=qd(o.transform,a||null);null!=s&&(null==n&&(n=Qp.empty()),n.set(o.field,s))}return n||null}function rv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&(n=t.fieldTransforms,r=e.fieldTransforms,!!(void 0===n&&void 0===r||n&&r&&lp(n,r,(function(t,e){return r=e,(n=t).field.isEqual(r.field)&&(i=n.transform,o=r.transform,i instanceof Bd&&o instanceof Bd||i instanceof Wd&&o instanceof Wd?lp(i.elements,o.elements,Lp):i instanceof zd&&o instanceof zd?Lp(i.A,o.A):i instanceof Vd&&o instanceof Vd);var n,r,i,o}))))&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask));var n,r}function iv(t){return t.isFoundDocument()?t.version:pp.min()}var ov=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return ft(e,t),e}(Zd),av=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var a=this;return(a=t.call(this)||this).key=e,a.data=n,a.fieldMask=r,a.precondition=i,a.fieldTransforms=o,a.type=1,a}return ft(e,t),e}(Zd);function sv(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function uv(t,e,n){var r=new Map;op(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],a=o.transform,s=e.data.field(o.field);r.set(o.field,Ud(a,s,n[i]))}return r}function cv(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var a=o[i],s=a.transform,u=n.data.field(a.field);r.set(a.field,jd(s,u,e))}return r}var lv,hv,fv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return ft(e,t),e}(Zd),pv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return ft(e,t),e}(Zd),dv=function(t){this.count=t};function vv(t){switch(t){case Yf.OK:return ip();case Yf.CANCELLED:case Yf.UNKNOWN:case Yf.DEADLINE_EXCEEDED:case Yf.RESOURCE_EXHAUSTED:case Yf.INTERNAL:case Yf.UNAVAILABLE:case Yf.UNAUTHENTICATED:return!1;case Yf.INVALID_ARGUMENT:case Yf.NOT_FOUND:case Yf.ALREADY_EXISTS:case Yf.PERMISSION_DENIED:case Yf.FAILED_PRECONDITION:case Yf.ABORTED:case Yf.OUT_OF_RANGE:case Yf.UNIMPLEMENTED:case Yf.DATA_LOSS:return!0;default:return ip()}}function gv(t){if(void 0===t)return ep("GRPC error has no .code"),Yf.UNKNOWN;switch(t){case lv.OK:return Yf.OK;case lv.CANCELLED:return Yf.CANCELLED;case lv.UNKNOWN:return Yf.UNKNOWN;case lv.DEADLINE_EXCEEDED:return Yf.DEADLINE_EXCEEDED;case lv.RESOURCE_EXHAUSTED:return Yf.RESOURCE_EXHAUSTED;case lv.INTERNAL:return Yf.INTERNAL;case lv.UNAVAILABLE:return Yf.UNAVAILABLE;case lv.UNAUTHENTICATED:return Yf.UNAUTHENTICATED;case lv.INVALID_ARGUMENT:return Yf.INVALID_ARGUMENT;case lv.NOT_FOUND:return Yf.NOT_FOUND;case lv.ALREADY_EXISTS:return Yf.ALREADY_EXISTS;case lv.PERMISSION_DENIED:return Yf.PERMISSION_DENIED;case lv.FAILED_PRECONDITION:return Yf.FAILED_PRECONDITION;case lv.ABORTED:return Yf.ABORTED;case lv.OUT_OF_RANGE:return Yf.OUT_OF_RANGE;case lv.UNIMPLEMENTED:return Yf.UNIMPLEMENTED;case lv.DATA_LOSS:return Yf.DATA_LOSS;default:return ip()}}(hv=lv||(lv={}))[hv.OK=0]="OK",hv[hv.CANCELLED=1]="CANCELLED",hv[hv.UNKNOWN=2]="UNKNOWN",hv[hv.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hv[hv.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hv[hv.NOT_FOUND=5]="NOT_FOUND",hv[hv.ALREADY_EXISTS=6]="ALREADY_EXISTS",hv[hv.PERMISSION_DENIED=7]="PERMISSION_DENIED",hv[hv.UNAUTHENTICATED=16]="UNAUTHENTICATED",hv[hv.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hv[hv.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hv[hv.ABORTED=10]="ABORTED",hv[hv.OUT_OF_RANGE=11]="OUT_OF_RANGE",hv[hv.UNIMPLEMENTED=12]="UNIMPLEMENTED",hv[hv.INTERNAL=13]="INTERNAL",hv[hv.UNAVAILABLE=14]="UNAVAILABLE",hv[hv.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var mv=function(){function t(t,e){this.comparator=t,this.root=e||_v.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,_v.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,_v.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new yv(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new yv(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new yv(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new yv(this.root,t,this.comparator,!0)},t}(),yv=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),_v=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw ip();if(this.right.isRed())throw ip();var t=this.left.check();if(t!==this.right.check())throw ip();return t+(this.isRed()?0:1)},t}();_v.EMPTY=null,_v.RED=!0,_v.BLACK=!1,_v.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw ip()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw ip()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw ip()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw ip()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw ip()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new _v(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var bv=function(){function t(t){this.comparator=t,this.data=new mv(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new wv(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new wv(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),wv=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Iv=new mv(Dp.comparator);function Tv(){return Iv}var Ev=new mv(Dp.comparator);function Sv(){return Ev}var Cv=new mv(Dp.comparator);function kv(){return Cv}var Av=new bv(Dp.comparator);function Nv(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Av,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Rv=new bv(cp);function xv(){return Rv}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pv=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Dv.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(pp.min(),r,xv(),Tv(),Nv())},t}(),Dv=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Ip.EMPTY_BYTE_STRING,n,Nv(),Nv(),Nv())},t}(),Ov=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},Lv=function(t,e){this.targetId=t,this.V=e},Mv=function(t,e,n,r){void 0===n&&(n=Ip.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},Fv=function(){function t(){this.S=0,this.D=qv(),this.C=Ip.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Nv(),e=Nv(),n=Nv();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:ip()}})),new Dv(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=qv()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),jv=function(){function t(t){this.W=t,this.G=new Map,this.H=Tv(),this.J=Uv(),this.Y=new bv(cp)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:ip()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(ed(i))if(0===n){var o=new Dp(i.path);this.tt(e,o,Yp.newNoDocument(o,pp.min()))}else op(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&ed(o.target)){var a=new Dp(o.target.path);null!==e.H.get(a)||e.at(i,a)||e.tt(i,a,Yp.newNoDocument(a,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=Nv();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new Pv(t,n,this.Y,this.H,r);return this.H=Tv(),this.J=Uv(),this.Y=new bv(cp),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new Fv,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new bv(cp),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||tp("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new Fv),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function Uv(){return new mv(Dp.comparator)}function qv(){return new mv(Dp.comparator)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vv={asc:"ASCENDING",desc:"DESCENDING"},Bv={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kv=function(t,e){this.databaseId=t,this.I=e};function Wv(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hv(t,e){return t.I?e.toBase64():e.toUint8Array()}function zv(t,e){return Wv(t,e.toTimestamp())}function Gv(t){return op(!!t),pp.fromTimestamp((e=Ep(t),new fp(e.seconds,e.nanos)));var e}function Qv(t,e){return(n=t,new yp(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function $v(t){var e=yp.fromString(t);return op(mg(e)),e}function Yv(t,e){return Qv(t.databaseId,e.path)}function Xv(t,e){var n=$v(e);if(n.get(1)!==t.databaseId.projectId)throw new Xf(Yf.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Xf(Yf.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Dp(eg(n))}function Jv(t,e){return Qv(t.databaseId,e)}function Zv(t){var e=$v(t);return 4===e.length?yp.emptyPath():eg(e)}function tg(t){return new yp(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function eg(t){return op(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ng(t,e,n){return{name:Yv(t,e),fields:n.value.mapValue.fields}}function rg(t,e,n){var r=Xv(t,e.name),i=Gv(e.updateTime),o=new Qp({mapValue:{fields:e.fields}}),a=Yp.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function ig(t,e){var n,r,i;if(e instanceof ov)n={update:ng(t,e.key,e.value)};else if(e instanceof fv)n={delete:Yv(t,e.key)};else if(e instanceof av)n={update:ng(t,e.key,e.data),updateMask:(r=e.fieldMask,i=[],r.fields.forEach((function(t){return i.push(t.canonicalString())})),{fieldPaths:i})};else{if(!(e instanceof pv))return ip();n={verify:Yv(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof Vd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bd)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Wd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof zd)return{fieldPath:e.field.canonicalString(),increment:n.A};throw ip()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:zv(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ip()}(t,e.precondition)),n}function og(t,e){var n,r,i,o=e.currentDocument?void 0!==(n=e.currentDocument).updateTime?Xd.updateTime(Gv(n.updateTime)):void 0!==n.exists?Xd.exists(n.exists):Xd.none():Xd.none(),a=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)op("REQUEST_TIME"===e.setToServerValue),n=new Vd;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new Bd(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new Wd(i)}else"increment"in e?n=new zd(t,e.increment):ip();var o=bp.fromServerFormat(e.fieldPath);return new $d(o,n)}(t,e)})):[];if(e.update){e.update.name;var s=Xv(t,e.update.name),u=new Qp({mapValue:{fields:e.update.fields}});if(e.updateMask){var c=(r=e.updateMask,i=r.fieldPaths||[],new wp(i.map((function(t){return bp.fromServerFormat(t)}))));return new av(s,u,c,o,a)}return new ov(s,u,o,a)}if(e.delete){var l=Xv(t,e.delete);return new fv(l,o)}if(e.verify){var h=Xv(t,e.verify);return new pv(h,o)}return ip()}function ag(t,e){return{documents:[Jv(t,e.path)]}}function sg(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Jv(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Jv(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(Hp(t.value))return{unaryFilter:{field:dg(t.field),op:"IS_NAN"}};if(Wp(t.value))return{unaryFilter:{field:dg(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Hp(t.value))return{unaryFilter:{field:dg(t.field),op:"IS_NOT_NAN"}};if(Wp(t.value))return{unaryFilter:{field:dg(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dg(t.field),op:pg(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return{field:dg((e=t).field),direction:fg(e.dir)};var e}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var a,s,u=(a=t,s=e.limit,a.I||Rp(s)?s:{value:s});return null!==u&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=lg(e.startAt)),e.endAt&&(n.structuredQuery.endAt=lg(e.endAt)),n}function ug(t){var e=Zv(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){op(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var a=[];n.where&&(a=cg(n.where));var s=[];n.orderBy&&(s=n.orderBy.map((function(t){return new pd(vg((e=t).field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction));var e})));var u,c,l=null;n.limit&&(u=n.limit,l=Rp(c="object"==typeof u?u.value:u)?null:c);var h=null;n.startAt&&(h=hg(n.startAt));var f=null;return n.endAt&&(f=hg(n.endAt)),yd(e,i,s,a,l,"F",h,f)}function cg(t){return t?void 0!==t.unaryFilter?[gg(t)]:void 0!==t.fieldFilter?[(e=t,nd.create(vg(e.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ip()}}(e.fieldFilter.op),e.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return cg(t)})).reduce((function(t,e){return t.concat(e)})):ip():[];var e}function lg(t){return{before:t.before,values:t.position}}function hg(t){var e=!!t.before,n=t.values||[];return new hd(n,e)}function fg(t){return Vv[t]}function pg(t){return Bv[t]}function dg(t){return{fieldPath:t.canonicalString()}}function vg(t){return bp.fromServerFormat(t.fieldPath)}function gg(t){switch(t.unaryFilter.op){case"IS_NAN":var e=vg(t.unaryFilter.field);return nd.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=vg(t.unaryFilter.field);return nd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=vg(t.unaryFilter.field);return nd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=vg(t.unaryFilter.field);return nd.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ip()}}function mg(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yg(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=bg(e)),e=_g(t.get(n),e);return bg(e)}function _g(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function bg(t){return t+""}function wg(t){var e=t.length;if(op(e>=2),2===e)return op(""===t.charAt(0)&&""===t.charAt(1)),yp.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var a=t.indexOf("",o);switch((a<0||a>n)&&ip(),t.charAt(a+1)){case"":var s=t.substring(o,a),u=void 0;0===i.length?u=s:(u=i+=s,i=""),r.push(u);break;case"":i+=t.substring(o,a),i+="\0";break;case"":i+=t.substring(o,a+1);break;default:ip()}o=a+2}return new yp(r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ig=function(t,e){this.seconds=t,this.nanoseconds=e},Tg=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Tg.store="owner",Tg.key="owner";var Eg=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Eg.store="mutationQueues",Eg.keyPath="userId";var Sg=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Sg.store="mutations",Sg.keyPath="batchId",Sg.userMutationsIndex="userMutationsIndex",Sg.userMutationsKeyPath=["userId","batchId"];var Cg=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,yg(e)]},t.key=function(t,e,n){return[t,yg(e),n]},t}();Cg.store="documentMutations",Cg.PLACEHOLDER=new Cg;var kg=function(t,e){this.path=t,this.readTime=e},Ag=function(t,e){this.path=t,this.version=e},Ng=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Ng.store="remoteDocuments",Ng.readTimeIndex="readTimeIndex",Ng.readTimeIndexPath="readTime",Ng.collectionReadTimeIndex="collectionReadTimeIndex",Ng.collectionReadTimeIndexPath=["parentPath","readTime"];var Rg=function(t){this.byteSize=t};Rg.store="remoteDocumentGlobal",Rg.key="remoteDocumentGlobalKey";var xg=function(t,e,n,r,i,o,a){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=a};xg.store="targets",xg.keyPath="targetId",xg.queryTargetsIndexName="queryTargetsIndex",xg.queryTargetsKeyPath=["canonicalId","targetId"];var Pg=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Pg.store="targetDocuments",Pg.keyPath=["targetId","path"],Pg.documentTargetsIndex="documentTargetsIndex",Pg.documentTargetsKeyPath=["path","targetId"];var Dg=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};Dg.key="targetGlobalKey",Dg.store="targetGlobal";var Og=function(t,e){this.collectionId=t,this.parent=e};Og.store="collectionParents",Og.keyPath=["collectionId","parent"];var Lg=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};Lg.store="clientMetadata",Lg.keyPath="clientId";var Mg=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Mg.store="bundles",Mg.keyPath="bundleId";var Fg=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Fg.store="namedQueries",Fg.keyPath="name";var jg=yt(yt([],yt(yt([],yt(yt([],yt(yt([],[Eg.store,Sg.store,Cg.store,Ng.store,xg.store,Tg.store,Dg.store,Pg.store]),[Lg.store])),[Rg.store])),[Og.store])),[Mg.store,Fg.store]),Ug="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",qg=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),Vg=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},Bg=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&ip(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),Kg=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Vg,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new zg(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Xg(e.target.error);n.ft.reject(new zg(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(t){throw new zg(n,t)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(tp("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Qg(e)},t}(),Wg=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(xt())&&ep("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return tp("SimpleDb","Removing database:",t),$g(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=xt(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return void 0!==Le&&"YES"===(void 0===(t={})?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return dt(this,void 0,void 0,(function(){var e,n=this;return vt(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(tp("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new zg(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Xf(Yf.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new zg(t,n))},i.onupgradeneeded=function(t){tp("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){tp("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return dt(this,void 0,void 0,(function(){var i,o,a,s,u;return vt(this,(function(c){switch(c.label){case 0:i="readonly"===e,o=0,a=function(){var e,a,u,c,l;return vt(this,(function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,s.At(t)];case 2:return s.db=h.sent(),e=Kg.open(s.db,t,i?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),Bg.reject(t)})).toPromise(),u={},a.catch((function(){})),[4,e.dt];case 3:return[2,(u.value=(h.sent(),a),u)];case 4:return c=h.sent(),l="FirebaseError"!==c.name&&o<3,tp("SimpleDb","Transaction failed with error:",c.message,"Retrying:",l),s.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}}))},s=this,c.label=1;case 1:return[5,a()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),Hg=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return $g(this.Pt.delete())},t}(),zg=function(t){function e(e,n){var r=this;return(r=t.call(this,Yf.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return ft(e,t),e}(Xf);function Gg(t){return"IndexedDbTransactionError"===t.name}var Qg=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(tp("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(tp("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),$g(n)},t.prototype.add=function(t){return tp("SimpleDb","ADD",this.store.name,t,t),$g(this.store.add(t))},t.prototype.get=function(t){var e=this;return $g(this.store.get(t)).next((function(n){return void 0===n&&(n=null),tp("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return tp("SimpleDb","DELETE",this.store.name,t),$g(this.store.delete(t))},t.prototype.count=function(){return tp("SimpleDb","COUNT",this.store.name),$g(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.Ft=function(t,e){tp("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new Bg((function(n,r){e.onerror=function(t){var e=Xg(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new Bg((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new Hg(i),a=e(i.primaryKey,i.value,o);if(a instanceof Bg){var s=a.catch((function(t){return o.done(),Bg.reject(t)}));n.push(s)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return Bg.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function $g(t){return new Bg((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Xg(t.target.error);n(e)}}))}var Yg=!1;function Xg(t){var e=Wg._t(xt());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Xf("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Yg||(Yg=!0,setTimeout((function(){throw r}),0)),r}}return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Jg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return ft(e,t),e}(qg);function Zg(t,e){var n=ap(t);return Wg.It(n.Mt,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var tm=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&tv(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ev(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ev(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(pp.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),Nv())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&lp(this.mutations,t.mutations,(function(t,e){return rv(t,e)}))&&lp(this.baseMutations,t.baseMutations,(function(t,e){return rv(t,e)}))},t}(),em=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){op(e.mutations.length===r.length);for(var i=kv(),o=e.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new t(e,n,r,i)},t}(),nm=function(){function t(t,e,n,r,i,o,a){void 0===i&&(i=pp.min()),void 0===o&&(o=pp.min()),void 0===a&&(a=Ip.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),rm=function(t){this.Lt=t};function im(t,e){if(e.document)return rg(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Dp.fromSegments(e.noDocument.path),r=cm(e.noDocument.readTime),i=Yp.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Dp.fromSegments(e.unknownDocument.path);return r=cm(e.unknownDocument.version),Yp.newUnknownDocument(o,r)}return ip()}function om(t,e,n){var r,i,o=am(n),a=e.key.path.popLast().toArray();if(e.isFoundDocument()){var s={name:Yv(r=t.Lt,(i=e).key),fields:i.data.value.mapValue.fields,updateTime:Wv(r,i.version.toTimestamp())},u=e.hasCommittedMutations;return new Ng(null,null,s,u,o,a)}if(e.isNoDocument()){var c=e.key.path.toArray(),l=um(e.version);return u=e.hasCommittedMutations,new Ng(null,new kg(c,l),null,u,o,a)}if(e.isUnknownDocument()){var h=e.key.path.toArray(),f=um(e.version);return new Ng(new Ag(h,f),null,null,!0,o,a)}return ip()}function am(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function sm(t){var e=new fp(t[0],t[1]);return pp.fromTimestamp(e)}function um(t){var e=t.toTimestamp();return new Ig(e.seconds,e.nanoseconds)}function cm(t){var e=new fp(t.seconds,t.nanoseconds);return pp.fromTimestamp(e)}function lm(t,e){for(var n=(e.baseMutations||[]).map((function(e){return og(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var a=e.mutations.map((function(e){return og(t.Lt,e)})),s=fp.fromMillis(e.localWriteTimeMs);return new tm(e.batchId,s,n,a)}function hm(t){var e,n,r=cm(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?cm(t.lastLimboFreeSnapshotVersion):pp.min();return void 0!==t.query.documents?(op(1===(n=t.query).documents.length),e=Cd(_d(Zv(n.documents[0])))):e=Cd(ug(t.query)),new nm(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Ip.fromBase64String(t.resumeToken))}function fm(t,e){var n,r=um(e.snapshotVersion),i=um(e.lastLimboFreeSnapshotVersion);n=ed(e.target)?ag(t.Lt,e.target):sg(t.Lt,e.target);var o=e.resumeToken.toBase64();return new xg(e.targetId,Zp(e.target),r,o,e.sequenceNumber,i,n)}function pm(t){var e=ug({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?kd(e,e.limit,"L"):e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dm=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return vm(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:cm(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){var n;return vm(t).put({bundleId:(n=e).id,createTime:um(Gv(n.createTime)),version:n.version})},t.prototype.getNamedQuery=function(t,e){return gm(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:pm(e.bundledQuery),readTime:cm(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return gm(t).put({name:(n=e).name,readTime:um(Gv(n.readTime)),bundledQuery:n.bundledQuery});var n},t}();function vm(t){return Zg(t,Mg.store)}function gm(t){return Zg(t,Fg.store)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mm=function(){function t(){this.Bt=new ym}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Bg.resolve()},t.prototype.getCollectionParents=function(t,e){return Bg.resolve(this.Bt.getEntries(e))},t}(),ym=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new bv(yp.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new bv(yp.comparator)).toArray()},t}(),_m=function(){function t(){this.qt=new ym}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:yg(i)};return bm(t).put(o)}return Bg.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[hp(e),""],!1,!0);return bm(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(wg(o.parent))}return n}))},t}();function bm(t){return Zg(t,Og.store)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Im=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t,e,n){var r=t.store(Sg.store),i=t.store(Cg.store),o=[],a=IDBKeyRange.only(n.batchId),s=0,u=r.$t({range:a},(function(t,e,n){return s++,n.delete()}));o.push(u.next((function(){op(1===s)})));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],p=Cg.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Bg.waitFor(o).next((function(){return c}))}function Em(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ip();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Im.DEFAULT_COLLECTION_PERCENTILE=10,Im.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Im.DEFAULT=new Im(41943040,Im.DEFAULT_COLLECTION_PERCENTILE,Im.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Im.DISABLED=new Im(-1,0,0);var Sm=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return op(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return km(t).$t({index:Sg.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Am(t),a=km(t);return a.add({}).next((function(s){op("number"==typeof s);for(var u=new tm(s,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return ig(t.Lt,e)})),i=n.mutations.map((function(e){return ig(t.Lt,e)}));return new Sg(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new bv((function(t,e){return cp(t.canonicalString(),e.canonicalString())})),f=0,p=r;f<p.length;f++){var d=p[f],v=Cg.key(i.userId,d.key.path,s);h=h.add(d.key.path.popLast()),l.push(a.put(c)),l.push(o.put(v,Cg.PLACEHOLDER))}return h.forEach((function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[s]=u.keys()})),Bg.waitFor(l).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return km(t).get(e).next((function(t){return t?(op(t.userId===n.userId),lm(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?Bg.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return km(t).$t({index:Sg.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(op(e.batchId>=r),o=lm(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return km(t).$t({index:Sg.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return km(t).Nt(Sg.userMutationsIndex,n).next((function(t){return t.map((function(t){return lm(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Cg.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Am(t).$t({range:i},(function(r,i,a){var s=r[0],u=r[1],c=r[2],l=wg(u);if(s===n.userId&&e.path.isEqual(l))return km(t).get(c).next((function(t){if(!t)throw ip();op(t.userId===n.userId),o.push(lm(n.R,t))}));a.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new bv(cp),i=[];return e.forEach((function(e){var o=Cg.prefixForPath(n.userId,e.path),a=IDBKeyRange.lowerBound(o),s=Am(t).$t({range:a},(function(t,i,o){var a=t[0],s=t[1],u=t[2],c=wg(s);a===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(s)})),Bg.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Cg.prefixForPath(this.userId,r),a=IDBKeyRange.lowerBound(o),s=new bv(cp);return Am(t).$t({range:a},(function(t,e,o){var a=t[0],u=t[1],c=t[2],l=wg(u);a===n.userId&&r.isPrefixOf(l)?l.length===i&&(s=s.add(c)):o.done()})).next((function(){return n.Wt(t,s)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(km(t).get(e).next((function(t){if(null===t)throw ip();op(t.userId===n.userId),r.push(lm(n.R,t))})))})),Bg.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Tm(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),Bg.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return Bg.resolve();var r=IDBKeyRange.lowerBound(Cg.prefixForUser(e.userId)),i=[];return Am(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=wg(t[1]);i.push(o)}else r.done()})).next((function(){op(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return Cm(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Nm(t).get(this.userId).next((function(t){return t||new Eg(e.userId,-1,"")}))},t}();function Cm(t,e,n){var r=Cg.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),a=!1;return Am(t).$t({range:o,kt:!0},(function(t,n,r){var o=t[0],s=t[1];t[2],o===e&&s===i&&(a=!0),r.done()})).next((function(){return a}))}function km(t){return Zg(t,Sg.store)}function Am(t){return Zg(t,Cg.store)}function Nm(t){return Zg(t,Eg.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Rm=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),xm=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new Rm(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return pp.fromTimestamp(new fp(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return Pm(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return op(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Pm(t).$t((function(a,s){var u=hm(s);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return Bg.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return Pm(t).$t((function(t,n){var r=hm(n);e(r)}))},t.prototype.Xt=function(t){return Dm(t).get(Dg.key).next((function(t){return op(null!==t),t}))},t.prototype.Zt=function(t,e){return Dm(t).put(Dg.key,e)},t.prototype.te=function(t,e){return Pm(t).put(fm(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Zp(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Pm(t).$t({range:r,index:xg.queryTargetsIndexName},(function(t,n,r){var o=hm(n);td(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Om(t);return e.forEach((function(e){var a=yg(e.path);i.push(o.put(new Pg(n,a))),i.push(r.referenceDelegate.addReference(t,n,e))})),Bg.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Om(t);return Bg.forEach(e,(function(e){var o=yg(e.path);return Bg.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Om(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Om(t),i=Nv();return r.$t({range:n,kt:!0},(function(t,e,n){var r=wg(t[1]),o=new Dp(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=yg(e.path),r=IDBKeyRange.bound([n],[hp(n)],!1,!0),i=0;return Om(t).$t({index:Pg.documentTargetsIndex,kt:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return Pm(t).get(e).next((function(t){return t?hm(t):null}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){return Zg(t,xg.store)}function Dm(t){return Zg(t,Dg.store)}function Om(t){return Zg(t,Pg.store)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lm(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){if(t.code!==Yf.FAILED_PRECONDITION||t.message!==Ug)throw t;return tp("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],a=cp(n,i);return 0===a?cp(r,o):a}var Fm=function(){function t(t){this.ne=t,this.buffer=new bv(Mm),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Mm(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),jm=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;tp("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return dt(e,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Gg(e=n.sent())?(tp("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Lm(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),Um=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Bg.resolve($f.o);var r=new Fm(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(tp("LruGarbageCollector","Garbage collection skipped; disabled"),Bg.resolve(wm)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(tp("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),wm):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,s,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>c.params.maximumSequenceNumbersToCollect?(tp("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),c.removeTargets(t,n,e)})).next((function(e){return i=e,s=Date.now(),c.removeOrphanedDocuments(t,n)})).next((function(t){return u=Date.now(),Zf()<=pe.DEBUG&&tp("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(s-a)+"ms\n\tRemoved "+t+" documents in "+(u-s)+"ms\nTotal Duration: "+(u-l)+"ms"),Bg.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),qm=function(){function t(t,e){this.db=t,this.garbageCollector=new Um(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return Vm(t,n)},t.prototype.removeReference=function(t,e,n){return Vm(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Vm(t,e)},t.prototype._e=function(t,e){return r=e,i=!1,Nm(n=t).Ot((function(t){return Cm(n,t,r).next((function(t){return t&&(i=!0),Bg.resolve(!t)}))})).next((function(){return i}));var n,r,i},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(a,s){if(s<=e){var u=n._e(t,a).next((function(e){if(!e)return o++,r.getEntry(t,a).next((function(){return r.removeEntry(a),Om(t).delete([0,yg(a.path)])}))}));i.push(u)}})).next((function(){return Bg.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Vm(t,e)},t.prototype.we=function(t,e){var n,r=Om(t),i=$f.o;return r.$t({index:Pg.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var a=r.path,s=r.sequenceNumber;0===o?(i!==$f.o&&e(new Dp(wg(n)),i),i=s,n=a):i=$f.o})).next((function(){i!==$f.o&&e(new Dp(wg(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Vm(t,e){return Om(t).put((n=e,r=t.currentSequenceNumber,new Pg(0,yg(n.path),r)));var n,r}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Bm=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];if(this.equalsFn(a,t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){vp(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],a=o[0],s=o[1];t(a,s)}}))},t.prototype.isEmpty=function(){return gp(this.inner)},t}(),Km=function(){function t(){this.changes=new Bm((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:pp.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:Yp.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Bg.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Wm=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return Gm(t).put(Qm(e),n)},t.prototype.removeEntry=function(t,e){var n=Gm(t),r=Qm(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return Gm(t).get(Qm(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return Gm(t).get(Qm(e)).next((function(t){return{document:n.ye(e,t),size:Em(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=Tv();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=Tv(),i=new mv(Dp.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Em(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Bg.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Gm(t).$t({range:r},(function(t,e,r){for(var a=Dp.fromSegments(t);o&&Dp.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=Tv(),o=e.path.length+1,a={};if(n.isEqual(pp.min())){var s=e.path.toArray();a.range=IDBKeyRange.lowerBound(s)}else{var u=e.path.toArray(),c=am(n);a.range=IDBKeyRange.lowerBound([u,c],!0),a.index=Ng.collectionReadTimeIndex}return Gm(t).$t(a,(function(t,n,a){if(t.length===o){var s=im(r.R,n);e.path.isPrefixOf(s.key.path)?xd(e,s)&&(i=i.insert(s.key,s)):a.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new Hm(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return zm(t).get(Rg.key).next((function(t){return op(!!t),t}))},t.prototype.me=function(t,e){return zm(t).put(Rg.key,e)},t.prototype.ye=function(t,e){if(e){var n=im(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(pp.min()))return n}return Yp.newInvalidDocument(t)},t}(),Hm=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Bm((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return ft(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new bv((function(t,e){return cp(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,a){var s=e.Ae.get(o);if(a.document.isValidDocument()){var u=om(e.Ie.R,a.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Em(u);r+=c-s,n.push(e.Ie.addEntry(t,o,u))}else if(r-=s,e.trackRemovals){var l=om(e.Ie.R,Yp.newNoDocument(o,pp.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),Bg.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(Km);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zm(t){return Zg(t,Rg.store)}function Gm(t){return Zg(t,Ng.store)}function Qm(t){return t.path.toArray()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $m=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;op(n<r&&n>=0&&r<=11);var o=new Kg("createOrUpgrade",e);n<1&&r>=1&&(t.createObjectStore(Tg.store),function(t){t.createObjectStore(Eg.store,{keyPath:Eg.keyPath}),t.createObjectStore(Sg.store,{keyPath:Sg.keyPath,autoIncrement:!0}).createIndex(Sg.userMutationsIndex,Sg.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Cg.store)}(t),Ym(t),function(t){t.createObjectStore(Ng.store)}(t));var a=Bg.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Pg.store),t.deleteObjectStore(xg.store),t.deleteObjectStore(Dg.store)}(t),Ym(t)),a=a.next((function(){return function(t){var e=t.store(Dg.store),n=new Dg(0,0,pp.min().toTimestamp(),0);return e.put(Dg.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(a=a.next((function(){return e=t,(n=o).store(Sg.store).Nt().next((function(t){e.deleteObjectStore(Sg.store),e.createObjectStore(Sg.store,{keyPath:Sg.keyPath,autoIncrement:!0}).createIndex(Sg.userMutationsIndex,Sg.userMutationsKeyPath,{unique:!0});var r=n.store(Sg.store),i=t.map((function(t){return r.put(t)}));return Bg.waitFor(i)}));var e,n}))),a=a.next((function(){!function(t){t.createObjectStore(Lg.store,{keyPath:Lg.keyPath})}(t)}))),n<5&&r>=5&&(a=a.next((function(){return i.Re(o)}))),n<6&&r>=6&&(a=a.next((function(){return function(t){t.createObjectStore(Rg.store)}(t),i.be(o)}))),n<7&&r>=7&&(a=a.next((function(){return i.ve(o)}))),n<8&&r>=8&&(a=a.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(a=a.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Ng.store);e.createIndex(Ng.readTimeIndex,Ng.readTimeIndexPath,{unique:!1}),e.createIndex(Ng.collectionReadTimeIndex,Ng.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(a=a.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(a=a.next((function(){!function(t){t.createObjectStore(Mg.store,{keyPath:Mg.keyPath})}(t),function(t){t.createObjectStore(Fg.store,{keyPath:Fg.keyPath})}(t)}))),a},t.prototype.be=function(t){var e=0;return t.store(Ng.store).$t((function(t,n){e+=Em(n)})).next((function(){var n=new Rg(e);return t.store(Rg.store).put(Rg.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Eg.store),r=t.store(Sg.store);return n.Nt().next((function(n){return Bg.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Sg.userMutationsIndex,i).next((function(r){return Bg.forEach(r,(function(r){op(r.userId===n.userId);var i=lm(e.R,r);return Tm(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(Pg.store),n=t.store(Ng.store);return t.store(Dg.store).get(Dg.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new yp(n),a=[0,yg(o)];r.push(e.get(a).next((function(n){return n?Bg.resolve():(r=o,e.put(new Pg(0,yg(r),t.highestListenSequenceNumber)));var r})))})).next((function(){return Bg.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(Og.store,{keyPath:Og.keyPath});var n=e.store(Og.store),r=new ym,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:yg(i)})}};return e.store(Ng.store).$t({kt:!0},(function(t,e){var n=new yp(t);return i(n.popLast())})).next((function(){return e.store(Cg.store).$t({kt:!0},(function(t,e){t[0];var n=t[1];t[2];var r=wg(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(xg.store);return n.$t((function(t,r){var i=hm(r),o=fm(e.R,i);return n.put(o)}))},t}();function Ym(t){t.createObjectStore(Pg.store,{keyPath:Pg.keyPath}).createIndex(Pg.documentTargetsIndex,Pg.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(xg.store,{keyPath:xg.keyPath}).createIndex(xg.queryTargetsIndexName,xg.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(Dg.store)}var Xm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Jm=function(){function t(e,n,r,i,o,a,s,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=a,this.document=s,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Xf(Yf.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");var h,f;this.referenceDelegate=new qm(this,i),this.Le=n+"main",this.R=new rm(u),this.Be=new Wg(this.Le,11,new $m(this.R)),this.qe=new xm(this.referenceDelegate,this.R),this.Ut=new _m,this.Ue=(h=this.R,f=this.Ut,new Wm(h,f)),this.Ke=new dm,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===l&&ep("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Xf(Yf.FAILED_PRECONDITION,Xm);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new $f(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return dt(e,void 0,void 0,(function(){return vt(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return dt(e,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return dt(e,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return ty(e).put(new Lg(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(Gg(e))return tp("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return tp("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return Zm(t).get(Tg.key).next((function(t){return Bg.resolve(e.tn(t))}))},t.prototype.en=function(t){return ty(t).delete(this.clientId)},t.prototype.nn=function(){return dt(this,void 0,void 0,(function(){var t,e,n,r,i=this;return vt(this,(function(o){switch(o.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=Zg(t,Lg.store);return e.Nt().next((function(t){var n=i.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return Bg.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=o.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));o.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Bg.resolve(!0):Zm(t).get(Tg.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Xf(Yf.FAILED_PRECONDITION,Xm);return!1}}return!(!e.networkEnabled||!e.inForeground)||ty(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&tp("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return dt(this,void 0,void 0,(function(){var t=this;return vt(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Tg.store,Lg.store],(function(e){var n=new Jg(e,$f.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return ty(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Sm.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;tp("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,jg,(function(o){return i=new Jg(o,r.Ne?r.Ne.next():$f.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw ep("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Xf(Yf.FAILED_PRECONDITION,Ug);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return Zm(t).get(Tg.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Xf(Yf.FAILED_PRECONDITION,Xm)}))},t.prototype.Ze=function(t){var e=new Tg(this.clientId,this.allowTabSynchronization,Date.now());return Zm(t).put(Tg.key,e)},t.yt=function(){return Wg.yt()},t.prototype.Xe=function(t){var e=this,n=Zm(t);return n.get(Tg.key).next((function(t){return e.tn(t)?(tp("IndexedDbPersistence","Releasing primary lease."),n.delete(Tg.key)):Bg.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ep("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("pagehide",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return tp("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ep("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){ep("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Zm(t){return Zg(t,Tg.store)}function ty(t){return Zg(t,Lg.store)}function ey(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ny=function(t,e){this.progress=t,this.wn=e},ry=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return r=e,Dp.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Tn(t,e.path):Ed(e)?this.In(t,e,n):this.An(t,e,n);var r},t.prototype.Tn=function(t,e){return this.mn(t,new Dp(e)).next((function(t){var e=Sv();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Sv();return this.Ut.getCollectionParents(t,i).next((function(a){return Bg.forEach(a,(function(a){var s,u,c=(s=e,u=a.child(i),new md(u,null,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt));return r.An(t,c,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],a=0,s=o.mutations;a<s.length;a++){var u=s[a],c=u.key,l=r.get(c);null==l&&(l=Yp.newInvalidDocument(c),r=r.insert(c,l)),ev(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){xd(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=Nv(),i=0,o=e;i<o.length;i++)for(var a=0,s=o[i].mutations;a<s.length;a++){var u=s[a];u instanceof av&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),iy=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Nv(),i=Nv(),o=0,a=n.docChanges;o<a.length;o++){var s=a[o];switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),oy=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i,o=this;return 0===(i=e).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(pp.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(i){var a=o.Cn(e,i);return(bd(e)||wd(e))&&o.Nn(e.limitType,a,r,n)?o.Dn(t,e):(Zf()<=pe.DEBUG&&tp("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Rd(e)),o.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new bv(Pd(t));return e.forEach((function(e,r){xd(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Zf()<=pe.DEBUG&&tp("QueryEngine","Using full collection scan to execute query:",Rd(e)),this.Sn.getDocumentsMatchingQuery(t,e,pp.min())},t}(),ay=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new mv(cp),this.kn=new Bm((function(t){return Zp(t)}),td),this.$n=pp.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new ry(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.Fn)}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sy(t,e,n,r){return new ay(t,e,n,r)}function uy(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o;return vt(this,(function(a){switch(a.label){case 0:return n=ap(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var o;return n._n.getAllMutationBatches(t).next((function(a){return o=a,r=n.persistence.getMutationQueue(e),i=new ry(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],a=Nv(),s=0,u=o;s<u.length;s++){var c=u[s];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++){var f=h[l];a=a.add(f.key)}}for(var p=0,d=e;p<d.length;p++){var v=d[p];r.push(v.batchId);for(var g=0,m=v.mutations;g<m.length;g++){var y=m[g];a=a.add(y.key)}}return i.pn(t,a).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return o=a.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}}))}))}function cy(t){var e=ap(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function ly(t,e){var n=ap(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.Fn;var a=[];e.targetChanges.forEach((function(e,o){var s,u,c,l=i.get(o);if(l){a.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var h=e.resumeToken;if(h.approximateByteSize()>0){var f=l.withResumeToken(h,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,f),s=l,c=e,op((u=f).resumeToken.approximateByteSize()>0),(0===s.resumeToken.approximateByteSize()||u.snapshotVersion.toMicroseconds()-s.snapshotVersion.toMicroseconds()>=3e8||c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size>0)&&a.push(n.qe.updateTargetData(t,f))}}}));var s=Tv();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),a.push(hy(t,o,e.documentUpdates,r,void 0).next((function(t){s=t}))),!r.isEqual(pp.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));a.push(u)}return Bg.waitFor(a).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,s)})).next((function(){return s}))})).then((function(t){return n.Fn=i,t}))}function hy(t,e,n,r,i){var o=Nv();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=Tv();return n.forEach((function(n,a){var s=t.get(n),u=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(pp.min())?(e.removeEntry(n,u),o=o.insert(n,a)):!s.isValidDocument()||a.version.compareTo(s.version)>0||0===a.version.compareTo(s.version)&&s.hasPendingWrites?(e.addEntry(a,u),o=o.insert(n,a)):tp("LocalStore","Ignoring outdated watch update for ",n,". Current version:",s.version," Watch version:",a.version)})),o}))}function fy(t,e){var n=ap(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,Bg.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new nm(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t}))}function py(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:r=ap(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",s.label=1;case 1:return s.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,(function(t){return r.persistence.referenceDelegate.removeTarget(t,i)}))];case 2:s.sent(),s.label=3;case 3:return[3,5];case 4:if(!Gg(a=s.sent()))throw a;return tp("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}}))}))}function dy(t,e,n){var r=ap(t),i=pp.min(),o=Nv();return r.persistence.runTransaction("Execute query","readonly",(function(t){return(a=r,s=t,u=Cd(e),c=ap(a),l=c.kn.get(u),void 0!==l?Bg.resolve(c.Fn.get(l)):c.qe.getTargetData(s,u)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:pp.min(),n?o:Nv())})).next((function(t){return{documents:t,Bn:o}}));var a,s,u,c,l}))}function vy(t,e){var n=ap(t),r=ap(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function gy(t){var e=ap(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return n=e.On,r=t,i=e.$n,o=ap(n),a=Tv(),s=am(i),u=Gm(r),c=IDBKeyRange.lowerBound(s,!0),u.$t({index:Ng.readTimeIndex,range:c},(function(t,e){var n=im(o.R,e);a=a.insert(n.key,n),s=e.readTime})).next((function(){return{wn:a,readTime:sm(s)}}));var n,r,i,o,a,s,u,c})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function my(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){return[2,(e=ap(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return e=Gm(t),n=pp.min(),e.$t({index:Ng.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=sm(e.readTime)),r.done()})).next((function(){return n}));var e,n})).then((function(t){e.$n=t}))]}))}))}function yy(t,e,n,r){return dt(this,void 0,void 0,(function(){var i,o,a,s,u,c,l,h,f,p;return vt(this,(function(d){switch(d.label){case 0:for(i=ap(t),o=Nv(),a=Tv(),s=kv(),u=0,c=n;u<c.length;u++)l=c[u],h=e.qn(l.metadata.name),l.document&&(o=o.add(h)),a=a.insert(h,e.Un(l)),s=s.insert(h,e.Kn(l.metadata.readTime));return f=i.On.newChangeBuffer({trackRemovals:!0}),[4,fy(i,(v=r,Cd(_d(yp.fromString("__bundle__/docs/"+v)))))];case 1:return p=d.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return hy(t,f,a,pp.min(),s).next((function(e){return f.apply(t),e})).next((function(e){return i.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return i.qe.addMatchingKeys(t,o,p.targetId)})).next((function(){return i.Mn.En(t,e)})).next((function(){return e}))}))}))]}var v}))}))}function _y(t,e,n){return void 0===n&&(n=Nv()),dt(this,void 0,void 0,(function(){var r,i;return vt(this,(function(o){switch(o.label){case 0:return[4,fy(t,Cd(pm(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=ap(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var o=Gv(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Ke.saveNamedQuery(t,e);var a=r.withResumeToken(Ip.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(a.targetId,a),i.qe.updateTargetData(t,a).next((function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return i.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return i.Ke.saveNamedQuery(t,e)}))}))]}}))}))
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var by=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Bg.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:Gv(n.createTime)}),Bg.resolve()},t.prototype.getNamedQuery=function(t,e){return Bg.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,{name:(n=e).name,query:pm(n.bundledQuery),readTime:Gv(n.readTime)}),Bg.resolve();var n},t}(),wy=function(){function t(){this.Wn=new bv(Iy.Gn),this.zn=new bv(Iy.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Iy(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Iy(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new Dp(new yp([])),r=new Iy(n,t),i=new Iy(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Dp(new yp([])),n=new Iy(e,t),r=new Iy(e,t+1),i=Nv();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Iy(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Iy=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Dp.comparator(t.key,e.key)||cp(t.ns,e.ns)},t.Hn=function(t,e){return cp(t.ns,e.ns)||Dp.comparator(t.key,e.key)},t}(),Ty=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new bv(Iy.Gn)}return t.prototype.checkEmpty=function(t){return Bg.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new tm(i,e,n,r);this._n.push(o);for(var a=0,s=r;a<s.length;a++){var u=s[a];this.rs=this.rs.add(new Iy(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Bg.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Bg.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return Bg.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Bg.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Bg.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Iy(e,0),i=new Iy(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),Bg.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new bv(cp);return e.forEach((function(t){var e=new Iy(t,0),i=new Iy(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),Bg.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Dp.isDocumentKey(i)||(i=i.child(""));var o=new Iy(new Dp(i),0),a=new bv(cp);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(a=a.add(t.ns)),!0)}),o),Bg.resolve(this.us(a))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;op(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Bg.forEach(e.mutations,(function(i){var o=new Iy(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Iy(e,0),r=this.rs.firstAfterOrEqual(n);return Bg.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,Bg.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Ey=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new mv(Dp.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,a=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:a,readTime:n}),this.size+=a-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Bg.resolve(n?n.document.clone():Yp.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=Tv();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():Yp.newInvalidDocument(t))})),Bg.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=Tv(),i=new Dp(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),s=a.key,u=a.value,c=u.document,l=u.readTime;if(!e.path.isPrefixOf(s.path))break;l.compareTo(n)<=0||xd(e,c)&&(r=r.insert(c.key,c.clone()))}return Bg.resolve(r)},t.prototype.fs=function(t,e){return Bg.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new Sy(this)},t.prototype.getSize=function(t){return Bg.resolve(this.size)},t}(),Sy=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return ft(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),Bg.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Km),Cy=function(){function t(t){this.persistence=t,this.ds=new Bm((function(t){return Zp(t)}),td),this.lastRemoteSnapshotVersion=pp.min(),this.highestTargetId=0,this.ws=0,this._s=new wy,this.targetCount=0,this.ys=Rm.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),Bg.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Bg.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Bg.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Bg.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Bg.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Rm(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Bg.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Bg.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Bg.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(a,s){s.sequenceNumber<=e&&null===n.get(s.targetId)&&(r.ds.delete(a),o.push(r.removeMatchingKeysForTargetId(t,s.targetId)),i++)})),Bg.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return Bg.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Bg.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Bg.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),Bg.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Bg.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Bg.resolve(n)},t.prototype.containsKey=function(t,e){return Bg.resolve(this._s.containsKey(e))},t}(),ky=function(){function t(t,e){var n,r=this;this.gs={},this.Ne=new $f(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Cy(this),this.Ut=new mm,this.Ue=(n=this.Ut,new Ey(n,(function(t){return r.referenceDelegate.ps(t)}))),this.R=new rm(e),this.Ke=new by(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Ty(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;tp("MemoryPersistence","Starting transaction:",t);var i=new Ay(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return Bg.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),Ay=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return ft(e,t),e}(qg),Ny=function(){function t(t){this.persistence=t,this.As=new wy,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw ip()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Bg.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Bg.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Bg.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Bg.forEach(this.vs,(function(r){var i=Dp.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Bg.or([function(){return Bg.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Ry=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(t,e){return"firestore_clients_"+t+"_"+e}function Py(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function Dy(t,e){return"firestore_targets_"+t+"_"+e}Ry.UNAUTHENTICATED=new Ry(null),Ry.GOOGLE_CREDENTIALS=new Ry("google-credentials-uid"),Ry.FIRST_PARTY=new Ry("first-party-uid");var Oy=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&(a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Xf(o.error.code,o.error.message)),a?new t(e,n,o.state,i):(ep("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ly=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Xf(i.error.code,i.error.message)),o?new t(e,i.state,r):(ep("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),My=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=xv(),a=0;i&&a<r.activeTargetIds.length;++a)i=Pp(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new t(e,o):(ep("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Fy=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ep("SharedClientState","Failed to parse online state: "+e),null)},t}(),jy=function(){function t(){this.activeTargetIds=xv()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Uy=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new mv(cp),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=xy(this.persistenceKey,this.Ns),this.Ms="firestore_sequence_number_"+this.persistenceKey,this.ks=this.ks.insert(this.Ns,new jy),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return dt(this,void 0,void 0,(function(){var t,e,n,r,i,o,a,s,u,c,l,h=this;return vt(this,(function(f){switch(f.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=f.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(xy(this.persistenceKey,r)))&&(o=My.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(s=this.js(a))&&this.Ws(s),u=0,c=this.$s;u<c.length;u++)l=c[u],this.Fs(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(Dy(this.persistenceKey,t));if(n){var r=Ly.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(Dy(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return tp("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){tp("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){tp("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(tp("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void ep("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return dt(e,void 0,void 0,(function(){var t,e,r,i,o,a;return vt(this,(function(s){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(a=function(t){var e=$f.o;if(null!=t)try{var n=JSON.parse(t);op("number"==typeof n),e=n}catch(t){ep("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==$f.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Oy(this.currentUser,t,e,n),i=Py(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Py(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=Dy(this.persistenceKey,t),i=new Ly(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return My.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Oy.Vs(new Ry(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return Ly.Vs(r,e)},t.prototype.js=function(t){return Fy.Vs(t)},t.prototype.ii=function(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(tp("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),a=[],s=[];return o.forEach((function(t){i.has(t)||a.push(t)})),i.forEach((function(t){o.has(t)||s.push(t)})),this.syncEngine.hi(a,s).then((function(){n.ks=r}))},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=xv();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),qy=function(){function t(){this.li=new jy,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new jy,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Vy=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),By=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){tp("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){tp("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),Ky={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Wy=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),Hy=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return ft(e,t),e.prototype.ki=function(t,e,n,r){return new Promise((function(i,o){var a=new Qf;a.listenOnce(Kf.COMPLETE,(function(){try{switch(a.getLastErrorCode()){case Bf.NO_ERROR:var e=a.getResponseJson();tp("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Bf.TIMEOUT:tp("Connection",'RPC "'+t+'" timed out'),o(new Xf(Yf.DEADLINE_EXCEEDED,"Request time out"));break;case Bf.HTTP_ERROR:var n=a.getStatus();if(tp("Connection",'RPC "'+t+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var s=(u=r.status,c=u.toLowerCase().replace(/_/g,"-"),Object.values(Yf).indexOf(c)>=0?c:Yf.UNKNOWN);o(new Xf(s,r.message))}else o(new Xf(Yf.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new Xf(Yf.UNAVAILABLE,"Connection failed."));break;default:ip()}}finally{tp("Connection",'RPC "'+t+'" completed.')}var u,c}));var s=JSON.stringify(r);a.send(e,"POST",s,n,15)}))},e.prototype.Oi=function(t,e){var n,r=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=qf(),o=Vf(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new zf({})),this.Fi(a.initMessageHeaders,e),Pt()||Lt()||xt().indexOf("Electron/")>=0||((n=xt()).indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0)||xt().indexOf("MSAppHost/")>=0||Ot()||(a.httpHeadersOverwriteParam="$httpHeaders");var s=r.join("");tp("Connection","Creating WebChannel: "+s,a);var u=i.createWebChannel(s,a),c=!1,l=!1,h=new Wy({Ei:function(t){l?tp("Connection","Not sending because WebChannel is closed:",t):(c||(tp("Connection","Opening WebChannel transport."),u.open(),c=!0),tp("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,Gf.EventType.OPEN,(function(){l||tp("Connection","WebChannel transport opened.")})),f(u,Gf.EventType.CLOSE,(function(){l||(l=!0,tp("Connection","WebChannel transport closed"),h.Vi())})),f(u,Gf.EventType.ERROR,(function(t){l||(l=!0,np("Connection","WebChannel transport errored:",t),h.Vi(new Xf(Yf.UNAVAILABLE,"The operation could not be completed")))})),f(u,Gf.EventType.MESSAGE,(function(t){var e;if(!l){var n=t.data[0];op(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){tp("Connection","WebChannel received error:",i);var o=i.status,a=function(t){var e=lv[t];if(void 0!==e)return gv(e)}(o),s=i.message;void 0===a&&(a=Yf.INTERNAL,s="Unknown error status: "+o+" with message "+i.message),l=!0,h.Vi(new Xf(a,s)),u.close()}else tp("Connection","WebChannel received:",n),h.Si(n)}})),f(o,Wf.STAT_EVENT,(function(t){t.stat===Hf.PROXY?tp("Connection","Detected buffering proxy"):t.stat===Hf.NOPROXY&&tp("Connection","Detected no buffering proxy")})),setTimeout((function(){h.Pi()}),0),h},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);tp("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then((function(t){return tp("RestConnection","Received: ",t),t}),(function(e){throw np("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.7.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=Ky[t];return this.Di+"/v1/"+e+":"+n},t}());
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(){return"undefined"!=typeof window?window:null}function Gy(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qy(t){return new Kv(t,!0)}var $y=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&tp("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Yy=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new $y(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return dt(this,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Yf.RESOURCE_EXHAUSTED?(ep(e.toString()),ep("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===Yf.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Xf(Yf.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return dt(t,void 0,void 0,(function(){return vt(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return tp("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(tp("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),Xy=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,a}return ft(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n,r;if("targetChange"in e){e.targetChange;var i="NO_CHANGE"===(r=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:ip(),o=e.targetChange.targetIds||[],a=function(t,e){return t.I?(op(void 0===e||"string"==typeof e),Ip.fromBase64String(e||"")):(op(void 0===e||e instanceof Uint8Array),Ip.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(u=e.targetChange.cause)&&function(t){var e=void 0===t.code?Yf.UNKNOWN:gv(t.code);return new Xf(e,t.message||"")}(u);n=new Mv(i,o,a,s||null)}else if("documentChange"in e){e.documentChange,(i=e.documentChange).document,i.document.name,i.document.updateTime,o=Xv(t,i.document.name),a=Gv(i.document.updateTime);var u=new Qp({mapValue:{fields:i.document.fields}}),c=(s=Yp.newFoundDocument(o,a,u),i.targetIds||[]),l=i.removedTargetIds||[];n=new Ov(c,l,s.key,s)}else if("documentDelete"in e)e.documentDelete,(i=e.documentDelete).document,o=Xv(t,i.document),a=i.readTime?Gv(i.readTime):pp.min(),u=Yp.newNoDocument(o,a),s=i.removedTargetIds||[],n=new Ov([],s,u.key,u);else if("documentRemove"in e)e.documentRemove,(i=e.documentRemove).document,o=Xv(t,i.document),a=i.removedTargetIds||[],n=new Ov([],a,o,null);else{if(!("filter"in e))return ip();e.filter;var h=e.filter;h.targetId,i=h.count||0,o=new dv(i),a=h.targetId,n=new Lv(a,o)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return pp.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?pp.min():e.readTime?Gv(e.readTime):pp.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e,n,r,i,o={};o.database=tg(this.R),o.addTarget=(e=this.R,i=(n=t).target,(r=ed(i)?{documents:ag(e,i)}:{query:sg(e,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=Hv(e,n.resumeToken):n.snapshotVersion.compareTo(pp.min())>0&&(r.readTime=Wv(e,n.snapshotVersion.toTimestamp())),r);var a=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ip()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);a&&(o.labels=a),this.cr(o)},e.prototype.yr=function(t){var e={};e.database=tg(this.R),e.removeTarget=t,this.cr(e)},e}(Yy),Jy=function(t){function e(e,n,r,i,o){var a=this;return(a=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,a.gr=!1,a}return ft(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(op(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=(r=t.writeResults,i=t.commitTime,r&&r.length>0?(op(void 0!==i),r.map((function(t){return n=i,(r=(e=t).updateTime?Gv(e.updateTime):Gv(n)).isEqual(pp.min())&&(r=Gv(n)),new Yd(r,e.transformResults||[]);var e,n,r}))):[]),n=Gv(t.commitTime);return this.listener.Tr(n,e)}var r,i;return op(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=tg(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return ig(e.R,t)}))};this.cr(n)},e}(Yy),Zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return ft(e,t),e.prototype.br=function(){if(this.Rr)throw new Xf(Yf.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Yf.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Xf(Yf.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===Yf.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Xf(Yf.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),t_=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(ep(e),this.Vr=!1):tp("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),e_=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=i,this.Lr.di((function(t){n.enqueueAndForget((function(){return dt(o,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return l_(this)?(tp("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return(e=ap(t)).Or.add(4),[4,r_(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,n_(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new t_(n,r)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n_(t){return dt(this,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:if(!l_(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function r_(t){return dt(this,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function i_(t,e){var n=ap(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),c_(n)?u_(n):S_(n).er()&&a_(n,e))}function o_(t,e){var n=ap(t),r=S_(n);n.$r.delete(e),r.er()&&s_(n,e),0===n.$r.size&&(r.er()?r.ir():l_(n)&&n.Br.set("Unknown"))}function a_(t,e){t.qr.U(e.targetId),S_(t).mr(e)}function s_(t,e){t.qr.U(e),S_(t).yr(e)}function u_(t){t.qr=new jv({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),S_(t).start(),t.Br.Sr()}function c_(t){return l_(t)&&!S_(t).tr()&&t.$r.size>0}function l_(t){return 0===ap(t).Or.size}function h_(t){t.qr=void 0}function f_(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){return t.$r.forEach((function(e,n){a_(t,e)})),[2]}))}))}function p_(t,e){return dt(this,void 0,void 0,(function(){return vt(this,(function(n){return h_(t),c_(t)?(t.Br.Nr(e),u_(t)):t.Br.set("Unknown"),[2]}))}))}function d_(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o;return vt(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof Mv&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o;return vt(this,(function(a){switch(a.label){case 0:n=e.cause,r=0,i=e.targetIds,a.label=1;case 1:return r<i.length?(o=i[r],t.$r.has(o)?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]):[3,5];case 2:a.sent(),t.$r.delete(o),t.qr.removeTarget(o),a.label=3;case 3:a.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),tp("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,v_(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Ov?t.qr.X(e):e instanceof Lv?t.qr.rt(e):t.qr.et(e),n.isEqual(pp.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,cy(t.localStore)];case 8:return i=a.sent(),n.compareTo(i)>=0?[4,(s=t,u=n,c=s.qr.ut(u),c.targetChanges.forEach((function(t,e){if(t.resumeToken.approximateByteSize()>0){var n=s.$r.get(e);n&&s.$r.set(e,n.withResumeToken(t.resumeToken,u))}})),c.targetMismatches.forEach((function(t){var e=s.$r.get(t);if(e){s.$r.set(t,e.withResumeToken(Ip.EMPTY_BYTE_STRING,e.snapshotVersion)),s_(s,t);var n=new nm(e.target,t,1,e.sequenceNumber);a_(s,n)}})),s.remoteSyncer.applyRemoteEvent(c))]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return tp("RemoteStore","Failed to raise snapshot:",o=a.sent()),[4,v_(t,o)];case 12:return a.sent(),[3,13];case 13:return[2]}var s,u,c}))}))}function v_(t,e,n){return dt(this,void 0,void 0,(function(){var r=this;return vt(this,(function(i){switch(i.label){case 0:if(!Gg(e))throw e;return t.Or.add(1),[4,r_(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return cy(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return dt(r,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return tp("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,n_(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function g_(t,e){return e().catch((function(n){return v_(t,n,e)}))}function m_(t){return dt(this,void 0,void 0,(function(){var e,n,r,i,o;return vt(this,(function(a){switch(a.label){case 0:e=ap(t),n=C_(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,a.label=1;case 1:if(!(l_(l=e)&&l.kr.length<10))return[3,7];a.label=2;case 2:return a.trys.push([2,4,,6]),[4,(s=e.localStore,u=r,c=ap(s),c.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===u&&(u=-1),c._n.getNextMutationBatchAfterBatchId(t,u)})))];case 3:return null===(i=a.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=C_(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=a.sent(),[4,v_(e,o)];case 5:return a.sent(),[3,6];case 6:return[3,1];case 7:return y_(e)&&__(e),[2]}var s,u,c,l}))}))}function y_(t){return l_(t)&&!C_(t).tr()&&t.kr.length>0}function __(t){C_(t).start()}function b_(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){return C_(t).Ar(),[2]}))}))}function w_(t){return dt(this,void 0,void 0,(function(){var e,n,r,i;return vt(this,(function(o){for(e=C_(t),n=0,r=t.kr;n<r.length;n++)i=r[n],e.Er(i.mutations);return[2]}))}))}function I_(t,e,n){return dt(this,void 0,void 0,(function(){var r,i;return vt(this,(function(o){switch(o.label){case 0:return r=t.kr.shift(),i=em.from(r,e,n),[4,g_(t,(function(){return t.remoteSyncer.applySuccessfulWrite(i)}))];case 1:return o.sent(),[4,m_(t)];case 2:return o.sent(),[2]}}))}))}function T_(t,e){return dt(this,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return e&&C_(t).pr?[4,function(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return vv(r=e.code)&&r!==Yf.ABORTED?(n=t.kr.shift(),C_(t).sr(),[4,g_(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,m_(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return y_(t)&&__(t),[2]}}))}))}function E_(t,e){return dt(this,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return n=ap(t),e?(n.Or.delete(2),[4,n_(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,r_(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function S_(t){var e,n,r,i,o=this;return t.Ur||(t.Ur=(e=t.datastore,n=t.asyncQueue,r={Ii:f_.bind(null,t),Ri:p_.bind(null,t),_r:d_.bind(null,t)},(i=ap(e)).br(),new Xy(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return dt(o,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return e?(t.Ur.sr(),c_(t)?u_(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:n.sent(),h_(t),n.label=3;case 3:return[2]}}))}))}))),t.Ur}function C_(t){var e,n,r,i,o=this;return t.Kr||(t.Kr=(e=t.datastore,n=t.asyncQueue,r={Ii:b_.bind(null,t),Ri:T_.bind(null,t),Ir:w_.bind(null,t),Tr:I_.bind(null,t)},(i=ap(e)).br(),new Jy(n,i.Hi,i.credentials,i.R,r)),t.Mr.push((function(e){return dt(o,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return e?(t.Kr.sr(),[4,m_(t)]):[3,2];case 1:return n.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:n.sent(),t.kr.length>0&&(tp("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),n.label=4;case 4:return[2]}}))}))}))),t.Kr}var k_=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Vg,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var a=new t(e,n,Date.now()+r,i,o);return a.start(r),a},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Xf(Yf.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function A_(t,e){if(ep("AsyncQueue",e+": "+t),Gg(t))return new Xf(Yf.UNAVAILABLE,e+": "+t);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var N_=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Dp.comparator(e.key,n.key)}:function(t,e){return Dp.comparator(t.key,e.key)},this.keyedMap=Sv(),this.sortedSet=new mv(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),R_=function(){function t(){this.Qr=new mv(Dp.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):ip():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),x_=function(){function t(t,e,n,r,i,o,a,s){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,N_.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Ad(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),P_=function(){this.Wr=void 0,this.listeners=[]},D_=function(){this.queries=new Bm((function(t){return Nd(t)}),Ad),this.onlineState="Unknown",this.Gr=new Set};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O_(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return vt(this,(function(c){switch(c.label){case 0:if(n=ap(t),r=e.query,i=!1,(o=n.queries.get(r))||(i=!0,o=new P_),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),a=o,[4,n.onListen(r)];case 2:return a.Wr=c.sent(),[3,4];case 3:return s=c.sent(),u=A_(s,"Initialization of query '"+Rd(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&j_(n),[2]}}))}))}function L_(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a;return vt(this,(function(s){return n=ap(t),r=e.query,i=!1,(o=n.queries.get(r))&&(a=o.listeners.indexOf(e))>=0&&(o.listeners.splice(a,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function M_(t,e){for(var n=ap(t),r=!1,i=0,o=e;i<o.length;i++){var a=o[i],s=a.query,u=n.queries.get(s);if(u){for(var c=0,l=u.listeners;c<l.length;c++)l[c].Hr(a)&&(r=!0);u.Wr=a}}r&&j_(n)}function F_(t,e,n){var r=ap(t),i=r.queries.get(e);if(i)for(var o=0,a=i.listeners;o<a.length;o++)a[o].onError(n);r.queries.delete(e)}function j_(t){t.Gr.forEach((function(t){t.next()}))}var U_=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new x_(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=x_.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),q_=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),V_=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Xv(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?rg(this.R,t.document,!1):Yp.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return Gv(t)},t}(),B_=function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=K_(t)}return t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new V_(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var a=n.qn(o.metadata.name),s=0,u=o.metadata.queries;s<u.length;s++){var c=u[s],l=(e.get(c)||Nv()).add(a);e.set(c,l)}}return e},t.prototype.complete=function(){return dt(this,void 0,void 0,(function(){var t,e,n,r,i;return vt(this,(function(o){switch(o.label){case 0:return[4,yy(this.localStore,new V_(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?(i=r[n],[4,_y(this.localStore,i,e.get(i.name))]):[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new ny(Object.assign({},this.progress),t))]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W_=function(t){this.key=t},H_=function(t){this.key=t},z_=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Nv(),this.mutatedKeys=Nv(),this.lo=Pd(t),this.fo=new N_(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new R_,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,a=i,s=!1,u=bd(this.query)&&i.size===this.query.limit?i.last():null,c=wd(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var l=i.get(t),h=xd(n.query,e)?e:null,f=!!l&&n.mutatedKeys.has(l.key),p=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),d=!1;l&&h?l.data.isEqual(h.data)?f!==p&&(r.track({type:3,doc:h}),d=!0):n.yo(l,h)||(r.track({type:2,doc:h}),d=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(s=!0)):!l&&h?(r.track({type:0,doc:h}),d=!0):l&&!h&&(r.track({type:1,doc:l}),d=!0,(u||c)&&(s=!0)),d&&(h?(a=a.add(h),o=p?o.add(t):o.delete(t)):(a=a.delete(t),o=o.delete(t)))})),bd(this.query)||wd(this.query))for(;a.size>this.query.limit;){var l=bd(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:a,mo:r,Nn:s,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return n=t.type,i=e.type,(o=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ip()}})(n)-o(i)||r.lo(t.doc,e.doc);var n,i,o})),this.po(n);var a=e?this.Eo():[],s=0===this.ho.size&&this.current?1:0,u=s!==this.ao;return this.ao=s,0!==o.length||u?{snapshot:new x_(this.query,t.fo,i,o,t.mutatedKeys,0===s,u,!1),To:a}:{To:a}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new R_,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Nv(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new H_(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new W_(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Nv();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return x_.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),G_=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Q_=function(t){this.key=t,this.bo=!1},$_=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Bm((function(t){return Nd(t)}),Ad),this.Vo=new Map,this.So=new Set,this.Do=new mv(Dp.comparator),this.Co=new Map,this.No=new wy,this.xo={},this.Fo=new Map,this.ko=Rm.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Y_(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return n=Sb(t),(o=n.Po.get(e))?(r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ro(),[3,4]):[3,1];case 1:return[4,fy(n.localStore,Cd(e))];case 2:return a=u.sent(),s=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,X_(n,e,r,"current"===s)];case 3:i=u.sent(),n.isPrimaryClient&&i_(n.remoteStore,a),u.label=4;case 4:return[2,i]}}))}))}function X_(t,e,n,r){return dt(this,void 0,void 0,(function(){var i,o,a,s,u,c;return vt(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return dt(this,void 0,void 0,(function(){var i,o,a;return vt(this,(function(s){switch(s.label){case 0:return(i=e.view._o(n)).Nn?[4,dy(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,i)}))]:[3,2];case 1:i=s.sent(),s.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(lb(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,dy(t.localStore,e,!0)];case 1:return i=l.sent(),o=new z_(e,i.Bn),a=o._o(i.documents),s=Dv.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(a,t.isPrimaryClient,s),lb(t,n,u.To),c=new G_(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}}))}))}function J_(t,e){return dt(this,void 0,void 0,(function(){var n,r,i;return vt(this,(function(o){switch(o.label){case 0:return n=ap(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter((function(t){return!Ad(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,py(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),o_(n.remoteStore,r.targetId),ub(n,r.targetId)})).catch(Lm)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return ub(n,r.targetId),[4,py(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}}))}))}function Z_(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:r=Cb(t),s.label=1;case 1:return s.trys.push([1,5,,6]),[4,(u=r.localStore,c=e,h=ap(u),f=fp.now(),p=c.reduce((function(t,e){return t.add(e.key)}),Nv()),h.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return h.Mn.pn(t,p).next((function(e){l=e;for(var n=[],r=0,i=c;r<i.length;r++){var o=i[r],a=nv(o,l.get(o.key));null!=a&&n.push(new av(o.key,a,$p(a.value.mapValue),Xd.exists(!0)))}return h._n.addMutationBatch(t,f,n,c)}))})).then((function(t){return t.applyToLocalDocumentSet(l),{batchId:t.batchId,changes:l}})))];case 2:return i=s.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new mv(cp)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,pb(r,i.changes)];case 3:return s.sent(),[4,m_(r.remoteStore)];case 4:return s.sent(),[3,6];case 5:return o=s.sent(),a=A_(o,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}var u,c,l,h,f,p}))}))}function tb(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:n=ap(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ly(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(op(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?op(r.bo):t.removedDocuments.size>0&&(op(r.bo),r.bo=!1))})),[4,pb(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,Lm(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function eb(t,e,n){var r=ap(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=ap(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&j_(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function nb(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a,s,u;return vt(this,(function(c){switch(c.label){case 0:return(r=ap(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(a=(a=new mv(Dp.comparator)).insert(o,Yp.newNoDocument(o,pp.min())),s=Nv().add(o),u=new Pv(pp.min(),new Map,new bv(cp),a,s),[4,tb(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),fb(r),[3,4];case 2:return[4,py(r.localStore,e,!1).then((function(){return ub(r,e,n)})).catch(Lm)];case 3:c.sent(),c.label=4;case 4:return[2]}}))}))}function rb(t,e){return dt(this,void 0,void 0,(function(){var n,r,i;return vt(this,(function(o){switch(o.label){case 0:n=ap(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=n.localStore,s=e,u=ap(a),u.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var e,n,r,i,o,a,c,l=s.batch.keys(),h=u.On.newChangeBuffer({trackRemovals:!0});return(e=u,n=t,r=s,i=h,o=r.batch,a=o.keys(),c=Bg.resolve(),a.forEach((function(t){c=c.next((function(){return i.getEntry(n,t)})).next((function(e){var n=r.docVersions.get(t);op(null!==n),e.version.compareTo(n)<0&&(o.applyToRemoteDocument(e,r),e.isValidDocument()&&i.addEntry(e,r.commitVersion))}))})),c.next((function(){return e._n.removeMutationBatch(n,o)}))).next((function(){return h.apply(t)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,l)}))})))];case 2:return i=o.sent(),sb(n,r,null),ab(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,pb(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,Lm(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function ib(t,e,n){return dt(this,void 0,void 0,(function(){var r,i;return vt(this,(function(o){switch(o.label){case 0:r=ap(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,(a=r.localStore,s=e,u=ap(a),u.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var e;return u._n.lookupMutationBatch(t,s).next((function(n){return op(null!==n),e=n.keys(),u._n.removeMutationBatch(t,n)})).next((function(){return u._n.performConsistencyCheck(t)})).next((function(){return u.Mn.pn(t,e)}))})))];case 2:return i=o.sent(),sb(r,e,n),ab(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,pb(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,Lm(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}var a,s,u}))}))}function ob(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:l_((n=ap(t)).remoteStore)||tp("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(u=n.localStore,c=ap(u),c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return c._n.getHighestUnacknowledgedBatchId(t)})))];case 2:return-1===(r=s.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=s.sent(),a=A_(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}var u,c}))}))}function ab(t,e){(t.Fo.get(e)||[]).forEach((function(t){t.resolve()})),t.Fo.delete(e)}function sb(t,e,n){var r=ap(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function ub(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||cb(t,e)}))}function cb(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(o_(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),fb(t))}function lb(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof W_?(t.No.addReference(o.key,e),hb(t,o)):o instanceof H_?(tp("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||cb(t,o.key)):ip()}}function hb(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(tp("SyncEngine","New document in limbo: "+n),t.So.add(r),fb(t))}function fb(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Dp(yp.fromString(e)),r=t.ko.next();t.Co.set(r,new Q_(n)),t.Do=t.Do.insert(n,r),i_(t.remoteStore,new nm(Cd(_d(n.path)),r,2,$f.o))}}function pb(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:return r=ap(t),i=[],o=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,s){a.push(r.Oo(s,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=iy.Pn(s.targetId,t);o.push(e)}})))})),[4,Promise.all(a)]);case 1:return s.sent(),r.vo._r(i),[4,function(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l;return vt(this,(function(h){switch(h.label){case 0:n=ap(t),h.label=1;case 1:return h.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return Bg.forEach(e,(function(e){return Bg.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return Bg.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return h.sent(),[3,4];case 3:if(!Gg(r=h.sent()))throw r;return tp("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=o[i],s=a.targetId,a.fromCache||(u=n.Fn.get(s),c=u.snapshotVersion,l=u.withLastLimboFreeSnapshotVersion(c),n.Fn=n.Fn.insert(s,l));return[2]}}))}))}(r.localStore,o)];case 2:s.sent(),s.label=3;case 3:return[2]}}))}))}function db(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return(n=ap(t)).currentUser.isEqual(e)?[3,3]:(tp("SyncEngine","User change. New user:",e.toKey()),[4,uy(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,(o=n).Fo.forEach((function(t){t.forEach((function(t){t.reject(new Xf(Yf.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),o.Fo.clear(),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,pb(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}var o}))}))}function vb(t,e){var n=ap(t),r=n.Co.get(e);if(r&&r.bo)return Nv().add(r.key);var i=Nv(),o=n.Vo.get(e);if(!o)return i;for(var a=0,s=o;a<s.length;a++){var u=s[a],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function gb(t,e){return dt(this,void 0,void 0,(function(){var n,r,i;return vt(this,(function(o){switch(o.label){case 0:return[4,dy((n=ap(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&lb(n,e.targetId,i.To),i)]}}))}))}function mb(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){return[2,gy((e=ap(t)).localStore).then((function(t){return pb(e,t)}))]}))}))}function yb(t,e,n,r){return dt(this,void 0,void 0,(function(){var i,o;return vt(this,(function(a){switch(a.label){case 0:return[4,(c=(i=ap(t)).localStore,l=e,h=ap(c),f=ap(h._n),h.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return f.jt(t,l).next((function(e){return e?h.Mn.pn(t,e):Bg.resolve(null)}))})))];case 1:return null===(o=a.sent())?[3,6]:"pending"!==n?[3,3]:[4,m_(i.remoteStore)];case 2:return a.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(sb(i,e,r||null),ab(i,e),s=i.localStore,u=e,ap(ap(s)._n).Gt(u)):ip(),a.label=4;case 4:return[4,pb(i,o)];case 5:return a.sent(),[3,7];case 6:tp("SyncEngine","Cannot apply mutation batch with id: "+e),a.label=7;case 7:return[2]}var s,u,c,l,h,f}))}))}function _b(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c;return vt(this,(function(l){switch(l.label){case 0:return Sb(n=ap(t)),Cb(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,bb(n,r.toArray())]);case 1:return i=l.sent(),n.$o=!0,[4,E_(n.remoteStore,!0)];case 2:for(l.sent(),o=0,a=i;o<a.length;o++)s=a[o],i_(n.remoteStore,s);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(u=[],c=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?u.push(e):c=c.then((function(){return ub(n,e),py(n.localStore,e,!0)})),o_(n.remoteStore,e)})),[4,c]);case 4:return l.sent(),[4,bb(n,u)];case 5:return l.sent(),(h=ap(n)).Co.forEach((function(t,e){o_(h.remoteStore,e)})),h.No.ts(),h.Co=new Map,h.Do=new mv(Dp.comparator),n.$o=!1,[4,E_(n.remoteStore,!1)];case 6:l.sent(),l.label=7;case 7:return[2]}var h}))}))}function bb(t,e,n){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u,c,l,h,f,p,d,v;return vt(this,(function(g){switch(g.label){case 0:n=ap(t),r=[],i=[],o=0,a=e,g.label=1;case 1:return o<a.length?(s=a[o],u=void 0,(c=n.Vo.get(s))&&0!==c.length?[4,fy(n.localStore,Cd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=h[l],p=n.Po.get(f),[4,gb(n,p)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,vy(n.localStore,s)];case 8:return v=g.sent(),[4,fy(n.localStore,v)];case 9:return u=g.sent(),[4,X_(n,wb(v),s,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}}))}))}function wb(t){return yd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ib(t){var e=ap(t);return ap(ap(e.localStore).persistence).fn()}function Tb(t,e,n,r){return dt(this,void 0,void 0,(function(){var i,o,a;return vt(this,(function(s){switch(s.label){case 0:return(i=ap(t)).$o?(tp("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,gy(i.localStore)];case 3:return o=s.sent(),a=Pv.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,pb(i,o,a)];case 4:return s.sent(),[3,8];case 5:return[4,py(i.localStore,e,!0)];case 6:return s.sent(),ub(i,e,r),[3,8];case 7:ip(),s.label=8;case 8:return[2]}}))}))}function Eb(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f;return vt(this,(function(p){switch(p.label){case 0:if(!(r=Sb(t)).$o)return[3,10];i=0,o=e,p.label=1;case 1:return i<o.length?(a=o[i],r.Vo.has(a)?(tp("SyncEngine","Adding an already active target "+a),[3,5]):[4,vy(r.localStore,a)]):[3,6];case 2:return s=p.sent(),[4,fy(r.localStore,s)];case 3:return u=p.sent(),[4,X_(r,wb(s),u.targetId,!1)];case 4:p.sent(),i_(r.remoteStore,u),p.label=5;case 5:return i++,[3,1];case 6:c=function(t){return vt(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,py(r.localStore,t,!1).then((function(){o_(r.remoteStore,t),ub(r,t)})).catch(Lm)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,h=n,p.label=7;case 7:return l<h.length?(f=h[l],[5,c(f)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Sb(t){var e=ap(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vb.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nb.bind(null,e),e.vo._r=M_.bind(null,e.eventManager),e.vo.Mo=F_.bind(null,e.eventManager),e}function Cb(t){var e=ap(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ib.bind(null,e),e}function kb(t,e,n){var r=ap(t);(function(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a,s,u;return vt(this,(function(c){switch(c.label){case 0:return c.trys.push([0,14,,15]),[4,e.getMetadata()];case 1:return r=c.sent(),[4,(h=t.localStore,f=r,p=ap(h),d=Gv(f.createTime),p.persistence.runTransaction("hasNewerBundle","readonly",(function(t){return p.Ke.getBundleMetadata(t,f.id)})).then((function(t){return!!t&&t.createTime.compareTo(d)>=0})))];case 2:return c.sent()?[4,e.close()]:[3,4];case 3:return[2,(c.sent(),void n._completeWith((l=r,{taskState:"Success",documentsLoaded:l.totalDocuments,bytesLoaded:l.totalBytes,totalDocuments:l.totalDocuments,totalBytes:l.totalBytes})))];case 4:return n._updateProgress(K_(r)),i=new B_(r,t.localStore,e.R),[4,e.Lo()];case 5:o=c.sent(),c.label=6;case 6:return o?[4,i.oo(o)]:[3,10];case 7:return(a=c.sent())&&n._updateProgress(a),[4,e.Lo()];case 8:o=c.sent(),c.label=9;case 9:return[3,6];case 10:return[4,i.complete()];case 11:return s=c.sent(),[4,pb(t,s.wn,void 0)];case 12:return c.sent(),[4,function(t,e){var n=ap(t);return n.persistence.runTransaction("Save bundle","readwrite",(function(t){return n.Ke.saveBundleMetadata(t,e)}))}(t.localStore,r)];case 13:return c.sent(),n._completeWith(s.progress),[3,15];case 14:return np("SyncEngine","Loading bundle failed with "+(u=c.sent())),n._failWith(u),[3,15];case 15:return[2]}var l,h,f,p,d}))}))})(r,e,n).then((function(){r.sharedClientState.notifyBundleLoaded()}))}var Ab=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return this.R=Qy(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return sy(this.persistence,new oy,t.initialUser,this.R)},t.prototype.qo=function(t){return new ky(Ny.bs,this.R)},t.prototype.Bo=function(t){return new qy},t.prototype.terminate=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),Nb=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return ft(e,t),e.prototype.initialize=function(e){return dt(this,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,my(this.localStore)];case 2:return n.sent(),[4,this.Qo.initialize(this,e)];case 3:return n.sent(),[4,Cb(this.Qo.syncEngine)];case 4:return n.sent(),[4,m_(this.Qo.remoteStore)];case 5:return n.sent(),[2]}}))}))},e.prototype.Ko=function(t){return sy(this.persistence,new oy,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new jm(e,t.asyncQueue)},e.prototype.qo=function(t){var e=ey(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Im.withCacheSize(this.cacheSizeBytes):Im.DEFAULT;return new Jm(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,zy(),Gy(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new qy},e}(Ab),Rb=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return ft(e,t),e.prototype.initialize=function(e){return dt(this,void 0,void 0,(function(){var n,r=this;return vt(this,(function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof Uy?(this.sharedClientState.syncEngine={ui:yb.bind(null,n),ai:Tb.bind(null,n),hi:Eb.bind(null,n),fn:Ib.bind(null,n),ci:mb.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He((function(t){return dt(r,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return[4,_b(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return i.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=zy();if(!Uy.yt(e))throw new Xf(Yf.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=ey(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Uy(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Nb),xb=function(){function t(){}return t.prototype.initialize=function(t,e){return dt(this,void 0,void 0,(function(){var n=this;return vt(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return eb(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=db.bind(null,this.syncEngine),[4,E_(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new D_},t.prototype.createDatastore=function(t){var e,n,r=Qy(t.databaseInfo.databaseId),i=(e=t.databaseInfo,new Hy(e));return n=t.credentials,new Zy(n,i,r)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,a=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return eb(a.syncEngine,t,0)},o=By.yt()?new By:new Vy,new e_(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return n=this.localStore,r=this.remoteStore,i=this.eventManager,o=this.sharedClientState,a=t.initialUser,s=t.maxConcurrentLimboResolutions,u=e,c=new $_(n,r,i,o,a,s),u&&(c.$o=!0),c;var n,r,i,o,a,s,u,c},t.prototype.terminate=function(){return function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return e=ap(t),tp("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,r_(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e){void 0===e&&(e=10240);var n=0;return{read:function(){return dt(this,void 0,void 0,(function(){var r;return vt(this,(function(i){return n<t.byteLength?(r={value:t.slice(n,n+e),done:!1},[2,(n+=e,r)]):[2,{done:!0}]}))}))},cancel:function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){return[2]}))}))},releaseLock:function(){},closed:Promise.reject("unimplemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Db=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),Ob=function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Vg,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}return t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return dt(this,void 0,void 0,(function(){var t,e,n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new q_(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return dt(this,void 0,void 0,(function(){var t,e;return vt(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return dt(this,void 0,void 0,(function(){var t,e;return vt(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))},t}(),Lb=function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return dt(this,void 0,void 0,(function(){var e,n=this;return vt(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Xf(Yf.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return n=ap(t),r=tg(n.R)+"/documents",i={documents:e.map((function(t){return Yv(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,i)];case 1:return o=u.sent(),a=new Map,o.forEach((function(t){var e,r,i=(e=n.R,"found"in(r=t)?function(t,e){op(!!e.found),e.found.name,e.found.updateTime;var n=Xv(t,e.found.name),r=Gv(e.found.updateTime),i=new Qp({mapValue:{fields:e.found.fields}});return Yp.newFoundDocument(n,r,i)}(e,r):"missing"in r?function(t,e){op(!!e.missing),op(!!e.readTime);var n=Xv(t,e.missing),r=Gv(e.readTime);return Yp.newNoDocument(n,r)}(e,r):ip());a.set(i.key.toString(),i)})),s=[],[2,(e.forEach((function(t){var e=a.get(t.toString());op(!!e),s.push(e)})),s)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new fv(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return dt(this,void 0,void 0,(function(){var t,e=this;return vt(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=Dp.fromPath(n);e.mutations.push(new pv(r,e.precondition(r)))})),[4,function(t,e){return dt(this,void 0,void 0,(function(){var n,r,i;return vt(this,(function(o){switch(o.label){case 0:return n=ap(t),r=tg(n.R)+"/documents",i={writes:e.map((function(t){return ig(n.R,t)}))},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ip();e=pp.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Xf(Yf.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Xd.updateTime(e):Xd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(pp.min()))throw new Xf(Yf.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Xd.updateTime(e)}return Xd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}(),Mb=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new $y(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return dt(t,void 0,void 0,(function(){var t,e,n=this;return vt(this,(function(r){return t=new Lb(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Rp(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!vv(e)}return!1},t}(),Fb=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Ry.UNAUTHENTICATED,this.clientId=up.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return dt(r,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return tp("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Xf(Yf.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Vg;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return dt(t,void 0,void 0,(function(){var t,n;return vt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=A_(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t,e){return dt(this,void 0,void 0,(function(){var n,r,i=this;return vt(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),tp("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return dt(i,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,uy(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function Ub(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,qb(t)];case 1:return n=i.sent(),tp("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return(n=ap(t)).asyncQueue.verifyOperationInProgress(),tp("RemoteStore","RemoteStore received new credentials"),r=l_(n),n.Or.add(3),[4,r_(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,n_(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function qb(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(tp("FirestoreClient","Using default OfflineComponentProvider"),[4,jb(t,new Ab)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function Vb(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(tp("FirestoreClient","Using default OnlineComponentProvider"),[4,Ub(t,new xb)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function Bb(t){return qb(t).then((function(t){return t.persistence}))}function Kb(t){return qb(t).then((function(t){return t.localStore}))}function Wb(t){return Vb(t).then((function(t){return t.remoteStore}))}function Hb(t){return Vb(t).then((function(t){return t.syncEngine}))}function zb(t){return dt(this,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:return[4,Vb(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Y_.bind(null,e.syncEngine),n.onUnlisten=J_.bind(null,e.syncEngine),n)]}}))}))}function Gb(t,e,n){var r=this;void 0===n&&(n={});var i=new Vg;return t.asyncQueue.enqueueAndForget((function(){return dt(r,void 0,void 0,(function(){var r;return vt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Db({next:function(o){e.enqueueAndForget((function(){return L_(t,a)}));var s=o.docs.has(n);!s&&o.fromCache?i.reject(new Xf(Yf.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new Xf(Yf.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),a=new U_(_d(n.path),o,{includeMetadataChanges:!0,so:!0});return O_(t,a)},[4,zb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}function Qb(t,e,n){var r=this;void 0===n&&(n={});var i=new Vg;return t.asyncQueue.enqueueAndForget((function(){return dt(r,void 0,void 0,(function(){var r;return vt(this,(function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Db({next:function(n){e.enqueueAndForget((function(){return L_(t,a)})),n.fromCache&&"server"===r.source?i.reject(new Xf(Yf.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),a=new U_(n,o,{includeMetadataChanges:!0,so:!0});return O_(t,a)},[4,zb(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}}))}))})),i.promise}var $b=function(t,e,n,r,i,o,a,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=s},Yb=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Xb=new Map,Jb=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Zb=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(Ry.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),tw=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),ew=function(){function t(t){var e=this;this.currentUser=Ry.UNAUTHENTICATED,this.oc=new Vg,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){tp("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(tp("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(tp("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(op("string"==typeof n.accessToken),new Jb(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return dt(n,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return op(null===t||"string"==typeof t),new Ry(t)},t}(),nw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=Ry.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),rw=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new nw(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(Ry.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(t,e,n){if(!n)throw new Xf(Yf.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function ow(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function aw(t,e,n,r){if(!0===e&&!0===r)throw new Xf(Yf.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function sw(t){if(!Dp.isDocumentKey(t))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function uw(t){if(Dp.isDocumentKey(t))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function cw(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":ip()}function lw(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Xf(Yf.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=cw(t);throw new Xf(Yf.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function hw(t,e){if(e<=0)throw new Xf(Yf.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var fw=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Xf(Yf.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Xf(Yf.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,aw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),pw=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fw({}),this._settingsFrozen=!1,t instanceof Yb?(this._databaseId=t,this._credentials=new Zb):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Xf(Yf.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yb(t.options.projectId)}(t),this._credentials=new ew(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Xf(Yf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Xf(Yf.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fw(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Zb;switch(t.type){case"gapi":var e=t.client;return op(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new rw(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Xf(Yf.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){var t;return this,(t=Xb.get(this))&&(tp("ComponentProvider","Removing Datastore"),Xb.delete(this),t.terminate()),Promise.resolve()},t}(),dw=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new gw(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),vw=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),gw=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,_d(r))||this)._path=r,i.type="collection",i}return ft(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new dw(this.firestore,null,new Dp(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(vw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=se(t),iw("collection","path",e),t instanceof pw)return uw(n=yp.fromString.apply(yp,yt([e],r))),new gw(t,null,n);if(!(t instanceof dw||t instanceof gw))throw new Xf(Yf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return uw(n=yp.fromString.apply(yp,yt([t.path],r)).child(yp.fromString(e))),new gw(t.firestore,null,n)}function yw(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=se(t),1===arguments.length&&(e=up.u()),iw("doc","path",e),t instanceof pw)return sw(n=yp.fromString.apply(yp,yt([e],r))),new dw(t,null,new Dp(n));if(!(t instanceof dw||t instanceof gw))throw new Xf(Yf.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return sw(n=t._path.child(yp.fromString.apply(yp,yt([e],r)))),new dw(t.firestore,t instanceof gw?t.converter:null,new Dp(n))}function _w(t,e){return t=se(t),e=se(e),(t instanceof dw||t instanceof gw)&&(e instanceof dw||e instanceof gw)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function bw(t,e){return t=se(t),e=se(e),t instanceof vw&&e instanceof vw&&t.firestore===e.firestore&&Ad(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}var ww=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=[],this.Zi=new $y(this,"async_queue_retry"),this.Tc=function(){var e=Gy();e&&tp("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Gy();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Tc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ic(),this.Ac(t)},t.prototype.enterRestrictedMode=function(){if(!this._c){this._c=!0;var t=Gy();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Tc)}},t.prototype.enqueue=function(t){return this.Ic(),this._c?new Promise((function(t){})):this.Ac(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.Rc()}))},t.prototype.Rc=function(){return dt(this,void 0,void 0,(function(){var t,e=this;return vt(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!Gg(t=n.sent()))throw t;return tp("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.Rc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Ac=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,ep("INTERNAL UNHANDLED ERROR: ",(r=(n=t).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),t;var n,r})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ic(),this.Ec.indexOf(t)>-1&&(e=0);var i=k_.createAndSchedule(this,t,e,n,(function(t){return r.bc(t)}));return this.mc.push(i),i},t.prototype.Ic=function(){this.yc&&ip()},t.prototype.verifyOperationInProgress=function(){},t.prototype.vc=function(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Pc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Vc=function(t){var e=this;return this.vc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.vc()}))},t.prototype.Sc=function(t){this.Ec.push(t)},t.prototype.bc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Iw(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}var Tw=function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Vg,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)},t}(),Ew=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new ww,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return ft(e,t),e.prototype._terminate=function(){return this._firestoreClient||Cw(this),this._firestoreClient.terminate()},e}(pw);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sw(t){return t._firestoreClient||Cw(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Cw(t){var e,n,r,i,o,a=t._freezeSettings(),s=(n=t._databaseId,r=(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",i=t._persistenceKey,new $b(n,r,i,(o=a).host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,o.useFetchStreams));t._firestoreClient=new Fb(t._credentials,t._queue,s)}function kw(t,e,n){var r=this,i=new Vg;return t.asyncQueue.enqueue((function(){return dt(r,void 0,void 0,(function(){var r;return vt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,jb(t,n)];case 1:return o.sent(),[4,Ub(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!("FirebaseError"===(a=r=o.sent()).name?a.code===Yf.FAILED_PRECONDITION||a.code===Yf.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}var a}))}))})).then((function(){return i.promise}))}function Aw(t){if(t._initialized||t._terminated)throw new Xf(Yf.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Nw=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bp(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Rw=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Ip.fromBase64String(e))}catch(t){throw new Xf(Yf.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},t.fromUint8Array=function(e){return new t(Ip.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),xw=function(t){this._methodName=t},Pw=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Xf(Yf.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Xf(Yf.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return cp(this._lat,t._lat)||cp(this._long,t._long)},t}(),Dw=/^__.*__$/,Ow=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new av(t,this.data,this.fieldMask,e,this.fieldTransforms):new ov(t,this.data,e,this.fieldTransforms)},t}(),Lw=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new av(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ip()}}var Fw=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Dc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Cc",{get:function(){return this.settings.Cc},enumerable:!1,configurable:!0}),t.prototype.Nc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.xc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.kc(t),r},t.prototype.$c=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Nc({path:n,Fc:!1});return r.Dc(),r},t.prototype.Oc=function(t){return this.Nc({path:void 0,Fc:!0})},t.prototype.Mc=function(t){return rI(t,this.settings.methodName,this.settings.Lc||!1,this.path,this.settings.Bc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Dc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.kc(this.path.get(t))},t.prototype.kc=function(t){if(0===t.length)throw this.Mc("Document fields must not be empty");if(Mw(this.Cc)&&Dw.test(t))throw this.Mc('Document fields cannot begin and end with "__"')},t}(),jw=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Qy(t)}return t.prototype.qc=function(t,e,n,r){return void 0===r&&(r=!1),new Fw({Cc:t,methodName:e,Bc:n,path:bp.emptyPath(),Fc:!1,Lc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function Uw(t){var e=t._freezeSettings(),n=Qy(t._databaseId);return new jw(t._databaseId,!!e.ignoreUndefinedProperties,n)}function qw(t,e,n,r,i,o){void 0===o&&(o={});var a=t.qc(o.merge||o.mergeFields?2:0,e,n,i);Zw("Data must be an object, but it was:",a,r);var s,u,c=Xw(r,a);if(o.merge)s=new wp(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var p=tI(e,f[h],n);if(!a.contains(p))throw new Xf(Yf.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");iI(l,p)||l.push(p)}s=new wp(l),u=a.fieldTransforms.filter((function(t){return s.covers(t.field)}))}else s=null,u=a.fieldTransforms;return new Ow(new Qp(c),s,u)}var Vw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Cc)throw 1===t.Cc?t.Mc(this._methodName+"() can only appear at the top level of your update data"):t.Mc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(xw);function Bw(t,e,n){return new Fw({Cc:3,Bc:e.settings.Bc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var Kw=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype._toFieldTransform=function(t){return new $d(t.path,new Vd)},e.prototype.isEqual=function(t){return t instanceof e},e}(xw),Ww=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return ft(e,t),e.prototype._toFieldTransform=function(t){var e=Bw(this,t,!0),n=this.Uc.map((function(t){return Yw(t,e)})),r=new Bd(n);return new $d(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xw),Hw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return ft(e,t),e.prototype._toFieldTransform=function(t){var e=Bw(this,t,!0),n=this.Uc.map((function(t){return Yw(t,e)})),r=new Wd(n);return new $d(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(xw),zw=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return ft(e,t),e.prototype._toFieldTransform=function(t){var e=new zd(t.R,Md(t.R,this.Kc));return new $d(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(xw);function Gw(t,e,n,r){var i=t.qc(1,e,n);Zw("Data must be an object, but it was:",i,r);var o=[],a=Qp.empty();vp(r,(function(t,r){var s=nI(e,t,n);r=se(r);var u=i.$c(s);if(r instanceof Vw)o.push(s);else{var c=Yw(r,u);null!=c&&(o.push(s),a.set(s,c))}}));var s=new wp(o);return new Lw(a,s,i.fieldTransforms)}function Qw(t,e,n,r,i,o){var a=t.qc(1,e,n),s=[tI(e,r,n)],u=[i];if(o.length%2!=0)throw new Xf(Yf.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)s.push(tI(e,o[c])),u.push(o[c+1]);for(var l=[],h=Qp.empty(),f=s.length-1;f>=0;--f)if(!iI(l,s[f])){var p=s[f],d=u[f];d=se(d);var v=a.$c(p);if(d instanceof Vw)l.push(p);else{var g=Yw(d,v);null!=g&&(l.push(p),h.set(p,g))}}var m=new wp(l);return new Lw(h,m,a.fieldTransforms)}function $w(t,e,n,r){return void 0===r&&(r=!1),Yw(n,t.qc(r?4:3,e))}function Yw(t,e){if(Jw(t=se(t)))return Zw("Unsupported field value:",e,t),Xw(t,e);if(t instanceof xw)return function(t,e){if(!Mw(e.Cc))throw e.Mc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Mc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Cc)throw e.Mc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var a=Yw(o[i],e.Oc(r));null==a&&(a={nullValue:"NULL_VALUE"}),n.push(a),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=se(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Md(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=fp.fromDate(t);return{timestampValue:Wv(e.R,n)}}if(t instanceof fp)return n=new fp(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Wv(e.R,n)};if(t instanceof Pw)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rw)return{bytesValue:Hv(e.R,t._byteString)};if(t instanceof dw){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Mc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Qv(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Mc("Unsupported field value: "+cw(t))}(t,e)}function Xw(t,e){var n={};return gp(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):vp(t,(function(t,r){var i=Yw(r,e.xc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Jw(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof fp||t instanceof Pw||t instanceof Rw||t instanceof dw||t instanceof xw)}function Zw(t,e,n){if(!Jw(n)||("object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i))){var r=cw(n);throw"an object"===r?e.Mc(t+" a custom object"):e.Mc(t+" "+r)}var i}function tI(t,e,n){if((e=se(e))instanceof Nw)return e._internalPath;if("string"==typeof e)return nI(t,e);throw rI("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var eI=new RegExp("[~\\*/\\[\\]]");function nI(t,e,n){if(e.search(eI)>=0)throw rI("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Nw.bind.apply(Nw,yt([void 0],e.split(".")))))._internalPath}catch(r){throw rI("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function rI(t,e,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,s="Function "+e+"() called with invalid data";n&&(s+=" (via `toFirestore()`)");var u="";return(o||a)&&(u+=" (found",o&&(u+=" in field "+r),a&&(u+=" in document "+i),u+=")"),new Xf(Yf.INVALID_ARGUMENT,(s+=". ")+t+u)}function iI(t,e){return t.some((function(t){return t.isEqual(e)}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var oI=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new dw(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(sI("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),aI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(oI);function sI(t,e){return"string"==typeof e?nI(t,e):e instanceof Nw?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uI=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),cI=function(t){function e(e,n,r,i,o,a){var s=this;return(s=t.call(this,e,n,r,i,a)||this)._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return ft(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new lI(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(sI("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(oI),lI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(cI),hI=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new uI(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new lI(n._firestore,n._userDataWriter,r.key,r,new uI(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Xf(Yf.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new lI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new uI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new lI(t._firestore,t._userDataWriter,e.doc.key,e.doc,new uI(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:fI(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function fI(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ip()}}function pI(t,e){return t instanceof cI&&e instanceof cI?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof hI&&e instanceof hI&&t._firestore===e._firestore&&bw(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){if(wd(t)&&0===t.explicitOrderBy.length)throw new Xf(Yf.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var vI=function(){};function gI(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var mI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.jc=n,i.Wc=r,i.type="where",i}return ft(e,t),e.prototype._apply=function(t){var e,n,r,i=Uw(t.firestore),o=function(t,e,n,r,i,o,a){var s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){EI(a,o);for(var u=[],c=0,l=a;c<l.length;c++){var h=l[c];u.push(TI(r,t,h))}s={arrayValue:{values:u}}}else s=TI(r,t,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||EI(a,o),s=$w(n,"where",a,"in"===o||"not-in"===o);var f=nd.create(i,o,s);return function(t,e){if(e.g()){var n=Td(t);if(null!==n&&!n.isEqual(e.field))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Id(t);null!==r&&SI(t,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Xf(Yf.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Xf(Yf.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,i,t.firestore._databaseId,this.Qc,this.jc,this.Wc);return new vw(t.firestore,t.converter,(e=t._query,n=o,r=e.filters.concat([n]),new md(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)))},e}(vI),yI=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Gc=n,r.type="orderBy",r}return ft(e,t),e.prototype._apply=function(t){var e,n,r,i=function(t,e,n){if(null!==t.startAt)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new pd(e,n);return function(t,e){if(null===Id(t)){var n=Td(t);null!==n&&SI(t,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Gc);return new vw(t.firestore,t.converter,(e=t._query,n=i,r=e.explicitOrderBy.concat([n]),new md(e.path,e.collectionGroup,r,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)))},e}(vI),_I=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.zc=n,i.Hc=r,i}return ft(e,t),e.prototype._apply=function(t){return new vw(t.firestore,t.converter,kd(t._query,this.zc,this.Hc))},e}(vI),bI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return ft(e,t),e.prototype._apply=function(t){var e,n,r=II(t,this.type,this.Jc,this.Yc);return new vw(t.firestore,t.converter,(e=t._query,n=r,new md(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,n,e.endAt)))},e}(vI),wI=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Jc=n,i.Yc=r,i}return ft(e,t),e.prototype._apply=function(t){var e,n,r=II(t,this.type,this.Jc,this.Yc);return new vw(t.firestore,t.converter,(e=t._query,n=r,new md(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,n)))},e}(vI);function II(t,e,n,r){if(n[0]=se(n[0]),n[0]instanceof oI)return function(t,e,n,r,i){if(!r)throw new Xf(Yf.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],a=0,s=Sd(t);a<s.length;a++){var u=s[a];if(u.field.isKeyField())o.push(Vp(e,r.key));else{var c=r.data.field(u.field);if(kp(c))throw new Xf(Yf.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new hd(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=Uw(t.firestore);return function(t,e,n,r,i,o){var a=t.explicitOrderBy;if(i.length>a.length)throw new Xf(Yf.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var s=[],u=0;u<i.length;u++){var c=i[u];if(a[u].field.isKeyField()){if("string"!=typeof c)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Ed(t)&&-1!==c.indexOf("/"))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(yp.fromString(c));if(!Dp.isDocumentKey(l))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Dp(l);s.push(Vp(e,h))}else{var f=$w(n,r,c);s.push(f)}}return new hd(s,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function TI(t,e,n){if("string"==typeof(n=se(n))){if(""===n)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ed(e)&&-1!==n.indexOf("/"))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(yp.fromString(n));if(!Dp.isDocumentKey(r))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Vp(t,new Dp(r))}if(n instanceof dw)return Vp(t,n._key);throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+cw(n)+".")}function EI(t,e){if(!Array.isArray(t)||0===t.length)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function SI(t,e,n){if(!n.isEqual(e))throw new Xf(Yf.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var CI=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Op(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Sp(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Cp(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ip()}},t.prototype.convertObject=function(t,e){var n=this,r={};return vp(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new Pw(Sp(t.latitude),Sp(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ap(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Np(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=Ep(t);return new fp(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=yp.fromString(t);op(mg(n));var r=new Yb(n.get(1),n.get(3)),i=new Dp(n.popFirst(5));return r.isEqual(e)||ep("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kI(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var AI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ft(e,t),e.prototype.convertBytes=function(t){return new Rw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new dw(this.firestore,null,e)},e}(CI),NI=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Uw(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=RI(t,this._firestore),i=kI(r.converter,e,n),o=qw(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Xd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,a=RI(t,this._firestore);return o="string"==typeof(e=se(e))||e instanceof Nw?Qw(this._dataReader,"WriteBatch.update",a._key,e,n,r):Gw(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(o.toMutation(a._key,Xd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=RI(t,this._firestore);return this._mutations=this._mutations.concat(new fv(e._key,Xd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Xf(Yf.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e){if((t=se(t)).firestore!==e)throw new Xf(Yf.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ft(e,t),e.prototype.convertBytes=function(t){return new Rw(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new dw(this.firestore,null,e)},e}(CI);function PI(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=lw(t,dw);var o=lw(t.firestore,Ew),a=Uw(o);return OI(o,[("string"==typeof(e=se(e))||e instanceof Nw?Qw(a,"updateDoc",t._key,e,n,r):Gw(a,"updateDoc",t._key,e)).toMutation(t._key,Xd.exists(!0))])}function DI(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=se(t);var a={includeMetadataChanges:!1},s=0;"object"!=typeof i[s]||Iw(i[s])||(a=i[s],s++);var u,c,l,h={includeMetadataChanges:a.includeMetadataChanges};if(Iw(i[s])){var f=i[s];i[s]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[s+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[s+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof dw)c=lw(t.firestore,Ew),l=_d(t._key.path),u={next:function(e){i[s]&&i[s](LI(c,t,e))},error:i[s+1],complete:i[s+2]};else{var p=lw(t,vw);c=lw(p.firestore,Ew),l=p._query;var d=new xI(c);u={next:function(t){i[s]&&i[s](new hI(c,d,p,t))},error:i[s+1],complete:i[s+2]},dI(t._query)}return function(t,e,n,r){var i=this,o=new Db(r),a=new U_(e,o,n);return t.asyncQueue.enqueueAndForget((function(){return dt(i,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return e=O_,[4,zb(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){o.Wo(),t.asyncQueue.enqueueAndForget((function(){return dt(i,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return e=L_,[4,zb(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}(Sw(c),l,h,u)}function OI(t,e){return function(t,e){var n=this,r=new Vg;return t.asyncQueue.enqueueAndForget((function(){return dt(n,void 0,void 0,(function(){var n;return vt(this,(function(i){switch(i.label){case 0:return n=Z_,[4,Hb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(Sw(t),e)}function LI(t,e,n){var r=n.docs.get(e._key),i=new xI(t);return new cI(t,i,e._key,r,new uI(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MI=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return ft(e,t),e.prototype.get=function(e){var n=this,r=RI(e,this._firestore),i=new xI(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new cI(n._firestore,i,r._key,t._document,new uI(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=Uw(t)}return t.prototype.get=function(t){var e=this,n=RI(t,this._firestore),r=new AI(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return ip();var i=t[0];if(i.isFoundDocument())return new oI(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new oI(e._firestore,r,n._key,null,n.converter);throw ip()}))},t.prototype.set=function(t,e,n){var r=RI(t,this._firestore),i=kI(r.converter,e,n),o=qw(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,a=RI(t,this._firestore);return o="string"==typeof(e=se(e))||e instanceof Nw?Qw(this._dataReader,"Transaction.update",a._key,e,n,r):Gw(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,o),this},t.prototype.delete=function(t){var e=RI(t,this._firestore);return this._transaction.delete(e._key),this},t}());
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(){if("undefined"==typeof Uint8Array)throw new Xf(Yf.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function jI(){if("undefined"==typeof atob)throw new Xf(Yf.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var UI=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return jI(),new t(Rw.fromBase64String(e))},t.fromUint8Array=function(e){return FI(),new t(Rw.fromUint8Array(e))},t.prototype.toBase64=function(){return jI(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return FI(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),qI=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Aw(t=lw(t,Ew));var n=Sw(t),r=t._freezeSettings(),i=new xb;return kw(n,i,new Nb(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Aw(t=lw(t,Ew));var e=Sw(t),n=t._freezeSettings(),r=new xb;return kw(e,r,new Rb(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Xf(Yf.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Vg;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return dt(e,void 0,void 0,(function(){var e;return vt(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return Wg.yt()?(e=t+"main",[4,Wg.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(ey(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),VI=function(){function t(t,e,n){var r=this;this._delegate=e,this.Xc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof Yb||(this.Zc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||np("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=lw(t,pw))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&np("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Rt(r.mockUserToken),a=r.mockUserToken.sub||r.mockUserToken.user_id;if(!a)throw new Xf(Yf.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new tw(new Jb(o,new Ry(a)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return dt(e,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:return[4,Bb(t)];case 1:return e=r.sent(),[4,Wb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),i=n,o=ap(i),o.Or.delete(0),n_(o))]}var i,o}))}))}))}(Sw(lw(this._delegate,Ew)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return dt(e,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:return[4,Bb(t)];case 1:return e=r.sent(),[4,Wb(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return(e=ap(t)).Or.add(0),[4,r_(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}(Sw(lw(this._delegate,Ew)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&aw("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Xc.enableMultiTabIndexedDbPersistence(this):this.Xc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Xc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Zc&&(this.Zc._removeServiceInstance("firestore"),this.Zc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Vg;return t.asyncQueue.enqueueAndForget((function(){return dt(e,void 0,void 0,(function(){var e;return vt(this,(function(r){switch(r.label){case 0:return e=ob,[4,Hb(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}(Sw(lw(this._delegate,Ew)))},t.prototype.onSnapshotsInSync=function(t){return e=this._delegate,n=t,function(t,e){var n=this,r=new Db(e);return t.asyncQueue.enqueueAndForget((function(){return dt(n,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return e=function(t,e){ap(t).Gr.add(e),e.next()},[4,zb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return dt(n,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return e=function(t,e){ap(t).Gr.delete(e)},[4,zb(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}(Sw(e=lw(e,Ew)),Iw(n)?n:{next:n});var e,n},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Zc)throw new Xf(Yf.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Zc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new eT(this,mw(this._delegate,t))}catch(t){throw GI(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new zI(this,yw(this._delegate,t))}catch(t){throw GI(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new JI(this,function(t,e){if(t=lw(t,pw),iw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new vw(t,null,(n=e,new md(yp.emptyPath(),n)));var n}(this._delegate,t))}catch(t){throw GI(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e,n=this;return function(t,e){var n=this,r=new Vg;return t.asyncQueue.enqueueAndForget((function(){return dt(n,void 0,void 0,(function(){var n;return vt(this,(function(i){switch(i.label){case 0:return[4,(o=t,Vb(o).then((function(t){return t.datastore})))];case 1:return n=i.sent(),new Mb(t.asyncQueue,n,e,r).run(),[2]}var o}))}))})),r.promise}(Sw(e=this._delegate),(function(r){return function(e){return t(new KI(n,e))}(new MI(e,r))}))},t.prototype.batch=function(){var t=this;return Sw(this._delegate),new WI(new NI(this._delegate,(function(e){return OI(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Xf(Yf.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Xf(Yf.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),BI=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return ft(e,t),e.prototype.convertBytes=function(t){return new UI(new Rw(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return zI.tu(e,this.firestore,null)},e}(CI);var KI=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new BI(t)}return t.prototype.get=function(t){var e=this,n=nT(t);return this._delegate.get(n).then((function(t){return new YI(e._firestore,new cI(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=nT(t);return n?(ow("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=nT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,yt([a,e,n],i)),this},t.prototype.delete=function(t){var e=nT(t);return this._delegate.delete(e),this},t}(),WI=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=nT(t);return n?(ow("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var a=nT(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,yt([a,e,n],i)),this},t.prototype.delete=function(t){var e=nT(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),HI=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new lI(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new XI(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.eu=function(e,n){var r=t.nu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new BI(e),n),i.set(n,o)),o},t}();HI.nu=new WeakMap;var zI=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new BI(t)}return t.su=function(e,n,r){if(e.length%2!=0)throw new Xf(Yf.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new dw(n._delegate,r,new Dp(e)))},t.tu=function(e,n,r){return new t(n,new dw(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new eT(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new eT(this.firestore,mw(this._delegate,t))}catch(t){throw GI(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=se(t))instanceof dw&&_w(this._delegate,t)},t.prototype.set=function(t,e){e=ow("DocumentReference.set",e);try{return function(t,e,n){t=lw(t,dw);var r=lw(t.firestore,Ew),i=kI(t.converter,e,n);return OI(r,[qw(Uw(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Xd.none())])}(this._delegate,t,e)}catch(t){throw GI(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?PI(this._delegate,t):PI.apply(void 0,yt([this._delegate,t,e],n))}catch(t){throw GI(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){var t;return OI(lw((t=this._delegate).firestore,Ew),[new fv(t._key,Xd.none())])},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=QI(e),i=$I(e,(function(e){return new YI(t.firestore,new cI(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return DI(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=lw(t,dw);var e=lw(t.firestore,Ew),n=Sw(e),r=new xI(e);return function(t,e){var n=this,r=new Vg;return t.asyncQueue.enqueueAndForget((function(){return dt(n,void 0,void 0,(function(){var n;return vt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return dt(this,void 0,void 0,(function(){var r,i;return vt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,(a=t,s=e,u=ap(a),u.persistence.runTransaction("read document","readonly",(function(t){return u.Mn.mn(t,s)})))];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Xf(Yf.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=A_(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}var a,s,u}))}))},[4,Kb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new cI(e,r,t._key,n,new uI(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=lw(t,dw);var e=lw(t.firestore,Ew);return Gb(Sw(e),t._key,{source:"server"}).then((function(n){return LI(e,t,n)}))}(this._delegate):function(t){t=lw(t,dw);var e=lw(t.firestore,Ew);return Gb(Sw(e),t._key).then((function(n){return LI(e,t,n)}))}(this._delegate)).then((function(t){return new YI(e.firestore,new cI(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(HI.eu(this.firestore,e)):this._delegate.withConverter(null))},t}();function GI(t,e,n){return t.message=t.message.replace(e,n),t}function QI(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Iw(r))return r}return{}}function $I(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Iw(t[0])?t[0]:Iw(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var YI=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new zI(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return pI(this._delegate,t._delegate)},t}(),XI=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return ft(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(YI),JI=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new BI(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,gI(this._delegate,(o=r,a=i=n,s=sI("where",e),new mI(s,a,o))))}catch(i){throw GI(i,/(orderBy|where)\(\)/,"Query.$1()")}var i,o,a,s},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,gI(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=sI("orderBy",t);return new yI(r,n)}(e,n)))}catch(t){throw GI(t,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,gI(this._delegate,(hw("limit",n=e),new _I("limit",n,"F"))))}catch(t){throw GI(t,"limit()","Query.limit()")}var n},t.prototype.limitToLast=function(e){try{return new t(this.firestore,gI(this._delegate,(hw("limitToLast",n=e),new _I("limitToLast",n,"L"))))}catch(t){throw GI(t,"limitToLast()","Query.limitToLast()")}var n},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bI("startAt",t,!0)}.apply(void 0,e)))}catch(t){throw GI(t,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new bI("startAfter",t,!1)}.apply(void 0,e)))}catch(t){throw GI(t,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wI("endBefore",t,!0)}.apply(void 0,e)))}catch(t){throw GI(t,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,gI(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new wI("endAt",t,!1)}.apply(void 0,e)))}catch(t){throw GI(t,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return bw(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=lw(t,vw);var e=lw(t.firestore,Ew),n=Sw(e),r=new xI(e);return function(t,e){var n=this,r=new Vg;return t.asyncQueue.enqueueAndForget((function(){return dt(n,void 0,void 0,(function(){var n;return vt(this,(function(i){switch(i.label){case 0:return n=function(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,dy(t,e,!0)];case 1:return s=u.sent(),r=new z_(e,s.Bn),i=r._o(s.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return a=u.sent(),s=A_(a,"Failed to execute query '"+e+" against cache"),n.reject(s),[3,3];case 3:return[2]}}))}))},[4,Kb(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new hI(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=lw(t,vw);var e=lw(t.firestore,Ew),n=Sw(e),r=new xI(e);return Qb(n,t._query,{source:"server"}).then((function(n){return new hI(e,r,t,n)}))}(this._delegate):function(t){t=lw(t,vw);var e=lw(t.firestore,Ew),n=Sw(e),r=new xI(e);return dI(t._query),Qb(n,t._query).then((function(n){return new hI(e,r,t,n)}))}(this._delegate)).then((function(t){return new tT(e.firestore,new hI(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=QI(e),i=$I(e,(function(e){return new tT(t.firestore,new hI(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return DI(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(HI.eu(this.firestore,e)):this._delegate.withConverter(null))},t}(),ZI=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new XI(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),tT=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new JI(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new XI(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new ZI(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new XI(n._firestore,r))}))},t.prototype.isEqual=function(t){return pI(this._delegate,t._delegate)},t}(),eT=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return ft(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new zI(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new zI(this.firestore,void 0===t?yw(this._delegate):yw(this._delegate,t))}catch(t){throw GI(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e,n,r,i,o,a=this;return(e=this._delegate,n=t,r=lw(e.firestore,Ew),i=yw(e),o=kI(e.converter,n),OI(r,[qw(Uw(e.firestore),"addDoc",i._key,o,null!==e.converter,{}).toMutation(i._key,Xd.exists(!1))]).then((function(){return i}))).then((function(t){return new zI(a.firestore,t)}))},e.prototype.isEqual=function(t){return _w(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(HI.eu(this.firestore,t)):this._delegate.withConverter(null))},e}(JI);function nT(t){return lw(t,dw)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rT=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Nw.bind.apply(Nw,yt([void 0],t)))}return t.documentId=function(){return new t(bp.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=se(t))instanceof Nw&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),iT=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new Kw("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new Vw("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ww("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Hw("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=new zw("increment",e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(t){return e=this._delegate,n=t,r=Sw(e=lw(e,Ew)),i=new Tw,function(t,e,n,r){var i,o,a,s=this,u=(i=n,o=Qy(e),a=function(t,e){if(t instanceof Uint8Array)return Pb(t,e);if(t instanceof ArrayBuffer)return Pb(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof i?(new TextEncoder).encode(i):i),new Ob(a,o));t.asyncQueue.enqueueAndForget((function(){return dt(s,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return e=kb,[4,Hb(t)];case 1:return e.apply(void 0,[n.sent(),u,r]),[2]}}))}))}))}(r,e._databaseId,n,i),i;var e,n,r,i}function aT(t){var e,n,r=this;return(e=this._delegate,n=t,function(t,e){var n=this;return t.asyncQueue.enqueue((function(){return dt(n,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return n=function(t,e){var n=ap(t);return n.persistence.runTransaction("Get named query","readonly",(function(t){return n.Ke.getNamedQuery(t,e)}))},[4,Kb(t)];case 1:return[2,n.apply(void 0,[r.sent(),e])]}}))}))}))}(Sw(e=lw(e,Ew)),n).then((function(t){return t?new vw(e,null,t.query):null}))).then((function(t){return t?new JI(r,t):null}))}var sT,uT,cT={Firestore:VI,GeoPoint:Pw,Timestamp:fp,Blob:UI,Transaction:KI,WriteBatch:WI,DocumentReference:zI,DocumentSnapshot:YI,Query:JI,QueryDocumentSnapshot:XI,QuerySnapshot:tT,CollectionReference:eT,FieldPath:rT,FieldValue:iT,setLogLevel:function(t){var e;e=t,Jf.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(sT=Oe).INTERNAL.registerComponent(new ue("firestore",(function(t){return function(t,e){return new VI(t,new Ew(t,e),new qI)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},cT))),sT.registerVersion("@firebase/firestore","2.3.8"),(uT=VI).prototype.loadBundle=oT,uT.prototype.namedQuery=aT;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var lT={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},hT=function(t){function e(n,r,i){var o=t.call(this,r)||this;return Object.setPrototypeOf(o,e.prototype),o.code=n,o.details=i,o}return ft(e,t),e}(Error);var fT=function(){function t(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then((function(t){return n.auth=t}),(function(){})),this.messaging||e.get().then((function(t){return n.messaging=t}),(function(){}))}return t.prototype.getAuthToken=function(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){switch(e.label){case 0:if(!this.auth)return[2,void 0];e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(t=e.sent())?[2,t.accessToken]:[2,void 0];case 3:return e.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getInstanceIdToken=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:if(!this.messaging||!("Notification"in self)||"granted"!==Notification.permission)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.messaging.getToken()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,void 0];case 4:return[2]}}))}))},t.prototype.getContext=function(){return dt(this,void 0,void 0,(function(){var t,e;return vt(this,(function(n){switch(n.label){case 0:return[4,this.getAuthToken()];case 1:return t=n.sent(),[4,this.getInstanceIdToken()];case 2:return e=n.sent(),[2,{authToken:t,instanceIdToken:e}]}}))}))},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var dT=function(){function t(){}return t.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(t instanceof Date)return t.toISOString();if(Array.isArray(t))return t.map((function(t){return e.encode(t)}));if("function"==typeof t||"object"==typeof t)return pT(t,(function(t){return e.encode(t)}));throw new Error("Data cannot be encoded in JSON: "+t)},t.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map((function(t){return e.decode(t)})):"function"==typeof t||"object"==typeof t?pT(t,(function(t){return e.decode(t)})):t},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vT=function(){function t(t,e,n,r,i,o){var a=this;void 0===i&&(i="us-central1"),this.app_=t,this.appCheckProvider=r,this.fetchImpl=o,this.serializer=new dT,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(a.deleteService())}},this.contextProvider=new fT(e,n),this.cancelAllRequests=new Promise((function(t){a.deleteService=function(){return t()}}));try{var s=new URL(i);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=i}}return Object.defineProperty(t.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),t.prototype._url=function(t){var e=this.app_.options.projectId;return null!==this.emulatorOrigin?this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t:null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t},t.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},t.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},t.prototype.httpsCallable=function(t,e){var n=this;return function(r){return n.call(t,r,e||{})}},t.prototype.postJSON=function(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o;return vt(this,(function(a){switch(a.label){case 0:return n["Content-Type"]="application/json",[4,this.getAppCheckToken()];case 1:null!==(r=a.sent())&&(n["X-Firebase-AppCheck"]=r),a.label=2;case 2:return a.trys.push([2,4,,5]),[4,this.fetchImpl(t,{method:"POST",body:JSON.stringify(e),headers:n})];case 3:return i=a.sent(),[3,5];case 4:return a.sent(),[2,{status:0,json:null}];case 5:o=null,a.label=6;case 6:return a.trys.push([6,8,,9]),[4,i.json()];case 7:return o=a.sent(),[3,9];case 8:return a.sent(),[3,9];case 9:return[2,{status:i.status,json:o}]}}))}))},t.prototype.getAppCheckToken=function(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){switch(e.label){case 0:return(t=this.appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype.call=function(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,p;return vt(this,(function(d){switch(d.label){case 0:return r=this._url(t),e=this.serializer.encode(e),i={data:e},o={},[4,this.contextProvider.getContext()];case 1:return(a=d.sent()).authToken&&(o.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(o["Firebase-Instance-ID-Token"]=a.instanceIdToken),s=n.timeout||7e4,u=function(t){var e,n=new Promise((function(n,r){e=setTimeout((function(){r(new hT("deadline-exceeded","deadline-exceeded"))}),t)}));return{timer:e,promise:n}}(s),c=u.timer,l=u.promise,[4,Promise.race([gT(c,this.postJSON(r,i,o)),l,gT(c,this.cancelAllRequests)])];case 2:if(!(h=d.sent()))throw new hT("cancelled","Firebase Functions instance was deleted.");if(f=function(t,e,n){var r=function(t){if(t>=200&&t<300)return"ok";switch(t){case 0:case 500:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var a=e&&e.error;if(a){var s=a.status;if("string"==typeof s){if(!lT[s])return new hT("internal","internal");r=lT[s],i=s}var u=a.message;"string"==typeof u&&(i=u),void 0!==(o=a.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new hT(r,i,o)}(h.status,h.json,this.serializer))throw f;if(!h.json)throw new hT("internal","Response is not valid JSON object.");if(void 0===(p=h.json.data)&&(p=h.json.result),void 0===p)throw new hT("internal","Response is missing data field.");return[2,{data:this.serializer.decode(p)}]}}))}))},t}();function gT(t,e){return dt(this,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return[4,e];case 1:return n=r.sent(),clearTimeout(t),[2,n]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mT,yT,_T;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
mT=Oe,yT=fetch.bind(self),_T={Functions:vT},mT.INTERNAL.registerComponent(new ue("functions",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal"),a=t.getProvider("messaging");return new vT(r,i,a,o,n,yT)}),"PUBLIC").setServiceProps(_T).setMultipleInstances(!0)),Oe.registerVersion("@firebase/functions","0.6.13");var bT={};!function(t){function e(t){return Array.prototype.slice.call(t)}function n(t){return new Promise((function(e,n){t.onsuccess=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function r(t,e,r){var i,o=new Promise((function(o,a){n(i=t[e].apply(t,r)).then(o,a)}));return o.request=i,o}function i(t,e,n){var i=r(t,e,n);return i.then((function(t){if(t)return new l(t,i.request)}))}function o(t,e,n){n.forEach((function(n){Object.defineProperty(t.prototype,n,{get:function(){return this[e][n]},set:function(t){this[e][n]=t}})}))}function a(t,e,n,i){i.forEach((function(i){i in n.prototype&&(t.prototype[i]=function(){return r(this[e],i,arguments)})}))}function s(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return this[e][r].apply(this[e],arguments)})}))}function u(t,e,n,r){r.forEach((function(r){r in n.prototype&&(t.prototype[r]=function(){return i(this[e],r,arguments)})}))}function c(t){this._index=t}function l(t,e){this._cursor=t,this._request=e}function h(t){this._store=t}function f(t){this._tx=t,this.complete=new Promise((function(e,n){t.oncomplete=function(){e()},t.onerror=function(){n(t.error)},t.onabort=function(){n(t.error)}}))}function p(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var i=r(indexedDB,"open",[t,e]),o=i.request;return o&&(o.onupgradeneeded=function(t){n&&n(new p(o.result,t.oldVersion,o.transaction))}),i.then((function(t){return new d(t)}))}function g(t){return r(indexedDB,"deleteDatabase",[t])}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach((function(t){t in IDBCursor.prototype&&(l.prototype[t]=function(){var e=this,r=arguments;return Promise.resolve().then((function(){return e._cursor[t].apply(e._cursor,r),n(e._request).then((function(t){if(t)return new l(t,e._request)}))}))})})),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),s(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),s(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach((function(t){[h,c].forEach((function(n){t in n.prototype&&(n.prototype[t.replace("open","iterate")]=function(){var n=e(arguments),r=n[n.length-1],i=this._store||this._index,o=i[t].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})}))})),[c,h].forEach((function(t){t.prototype.getAll||(t.prototype.getAll=function(t,e){var n=this,r=[];return new Promise((function(i){n.iterateCursor(t,(function(t){t?(r.push(t.value),void 0===e||r.length!=e?t.continue():i(r)):i(r)}))}))})})),t.openDb=v,t.deleteDb=g,Object.defineProperty(t,"__esModule",{value:!0})}(bT);var wT,IT=((wT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',wT["not-registered"]="Firebase Installation is not registered.",wT["installation-not-found"]="Firebase Installation not found.",wT["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',wT["app-offline"]="Could not process request. Application offline.",wT["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",wT),TT=new Vt("installations","Installations",IT);function ET(t){return t instanceof qt&&t.code.includes("request-failed")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(t){return"https://firebaseinstallations.googleapis.com/v1/projects/"+t.projectId+"/installations"}function CT(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function kT(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,e.json()];case 1:return n=i.sent(),r=n.error,[2,TT.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})]}}))}))}function AT(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function NT(t,e){var n=e.refreshToken,r=AT(t);return r.append("Authorization",function(t){return"FIS_v2 "+t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n)),r}function RT(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return[4,t()];case 1:return(e=n.sent()).status>=500&&e.status<600?[2,t()]:[2,e]}}))}))}function xT(t,e){var n=e.fid;return dt(this,void 0,void 0,(function(){var e,r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return e=ST(t),r=AT(t),i={fid:n,authVersion:"FIS_v2",appId:t.appId,sdkVersion:"w:0.4.30"},o={method:"POST",headers:r,body:JSON.stringify(i)},[4,RT((function(){return fetch(e,o)}))];case 1:return(a=u.sent()).ok?[4,a.json()]:[3,3];case 2:return s=u.sent(),[2,{fid:s.fid||n,registrationStatus:2,refreshToken:s.refreshToken,authToken:CT(s.authToken)}];case 3:return[4,kT("Create Installation",a)];case 4:throw u.sent()}}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var DT=/^[cdef][\w-]{21}$/;function OT(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=function(t){return(e=t,btoa(String.fromCharCode.apply(String,yt([],mt(e)))).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var e}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);return DT.test(e)?e:""}catch(t){return""}}function LT(t){return t.appName+"!"+t.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var MT=new Map;function FT(t,e){var n=LT(t);jT(n,e),function(t,e){var n=qT();n&&n.postMessage({key:t,fid:e});VT()}(n,e)}function jT(t,e){var n,r,i=MT.get(t);if(i)try{for(var o=gt(i),a=o.next();!a.done;a=o.next()){(0,a.value)(e)}}catch(t){n={error:t}}finally{try{a&&!a.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var UT=null;function qT(){return!UT&&"BroadcastChannel"in self&&((UT=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){jT(t.data.key,t.data.fid)}),UT}function VT(){0===MT.size&&UT&&(UT.close(),UT=null)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BT,KT=null;function WT(){return KT||(KT=bT.openDb("firebase-installations-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore("firebase-installations-store")}))),KT}function HT(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:return n=LT(t),[4,WT()];case 1:return r=s.sent(),i=r.transaction("firebase-installations-store","readwrite"),[4,(o=i.objectStore("firebase-installations-store")).get(n)];case 2:return a=s.sent(),[4,o.put(e,n)];case 3:return s.sent(),[4,i.complete];case 4:return s.sent(),a&&a.fid===e.fid||FT(t,e.fid),[2,e]}}))}))}function zT(t){return dt(this,void 0,void 0,(function(){var e,n,r;return vt(this,(function(i){switch(i.label){case 0:return e=LT(t),[4,WT()];case 1:return n=i.sent(),[4,(r=n.transaction("firebase-installations-store","readwrite")).objectStore("firebase-installations-store").delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function GT(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return n=LT(t),[4,WT()];case 1:return r=u.sent(),i=r.transaction("firebase-installations-store","readwrite"),[4,(o=i.objectStore("firebase-installations-store")).get(n)];case 2:return a=u.sent(),void 0!==(s=e(a))?[3,4]:[4,o.delete(n)];case 3:return u.sent(),[3,6];case 4:return[4,o.put(s,n)];case 5:u.sent(),u.label=6;case 6:return[4,i.complete];case 7:return u.sent(),!s||a&&a.fid===s.fid||FT(t,s.fid),[2,s]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QT(t){return dt(this,void 0,void 0,(function(){var e,n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,GT(t,(function(n){var r=function(t){return XT(t||{fid:OT(),registrationStatus:0})}(n),i=function(t,e){if(0===e.registrationStatus){if(!navigator.onLine)return{installationEntry:e,registrationPromise:Promise.reject(TT.create("app-offline"))};var n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=function(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,7]),[4,xT(t,e)];case 1:return n=i.sent(),[2,HT(t,n)];case 2:return ET(r=i.sent())&&409===r.customData.serverCode?[4,zT(t)]:[3,4];case 3:return i.sent(),[3,6];case 4:return[4,HT(t,{fid:e.fid,registrationStatus:0})];case 5:i.sent(),i.label=6;case 6:throw r;case 7:return[2]}}))}))}(t,n);return{installationEntry:n,registrationPromise:r}}return 1===e.registrationStatus?{installationEntry:e,registrationPromise:$T(t)}:{installationEntry:e}}(t,r);return e=i.registrationPromise,i.installationEntry}))];case 1:return""!==(n=i.sent()).fid?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=i.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}}))}))}function $T(t){return dt(this,void 0,void 0,(function(){var e,n,r,i;return vt(this,(function(o){switch(o.label){case 0:return[4,YT(t)];case 1:e=o.sent(),o.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,PT(100)];case 3:return o.sent(),[4,YT(t)];case 4:return e=o.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,QT(t)];case 6:return n=o.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}}))}))}function YT(t){return GT(t,(function(t){if(!t)throw TT.create("installation-not-found");return XT(t)}))}function XT(t){return 1===(e=t).registrationStatus&&e.registrationTime+1e4<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function JT(t,e){var n=t.appConfig,r=t.platformLoggerProvider;return dt(this,void 0,void 0,(function(){var t,i,o,a,s,u,c;return vt(this,(function(l){switch(l.label){case 0:return t=function(t,e){var n=e.fid;return ST(t)+"/"+n+"/authTokens:generate"}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e),i=NT(n,e),(o=r.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),a={installation:{sdkVersion:"w:0.4.30"}},s={method:"POST",headers:i,body:JSON.stringify(a)},[4,RT((function(){return fetch(t,s)}))];case 1:return(u=l.sent()).ok?[4,u.json()]:[3,3];case 2:return c=l.sent(),[2,CT(c)];case 3:return[4,kT("Generate Auth Token",u)];case 4:throw l.sent()}}))}))}function ZT(t,e){return void 0===e&&(e=!1),dt(this,void 0,void 0,(function(){var n,r,i;return vt(this,(function(o){switch(o.label){case 0:return[4,GT(t.appConfig,(function(r){if(!eE(r))throw TT.create("not-registered");var i=r.authToken;if(!e&&function(t){return 2===t.requestStatus&&!function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+36e5}(t)}(i))return r;if(1===i.requestStatus)return n=function(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,tE(t.appConfig)];case 1:n=i.sent(),i.label=2;case 2:return 1!==n.authToken.requestStatus?[3,5]:[4,PT(100)];case 3:return i.sent(),[4,tE(t.appConfig)];case 4:return n=i.sent(),[3,2];case 5:return 0===(r=n.authToken).requestStatus?[2,ZT(t,e)]:[2,r]}}))}))}(t,e),r;if(!navigator.onLine)throw TT.create("app-offline");var o=function(t){var e={requestStatus:1,requestTime:Date.now()};return pt(pt({},t),{authToken:e})}(r);return n=function(t,e){return dt(this,void 0,void 0,(function(){var n,r,i;return vt(this,(function(o){switch(o.label){case 0:return o.trys.push([0,3,,8]),[4,JT(t,e)];case 1:return n=o.sent(),i=pt(pt({},e),{authToken:n}),[4,HT(t.appConfig,i)];case 2:return o.sent(),[2,n];case 3:return!ET(r=o.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,zT(t.appConfig)];case 4:return o.sent(),[3,7];case 5:return i=pt(pt({},e),{authToken:{requestStatus:0}}),[4,HT(t.appConfig,i)];case 6:o.sent(),o.label=7;case 7:throw r;case 8:return[2]}}))}))}(t,o),o}))];case 1:return r=o.sent(),n?[4,n]:[3,3];case 2:return i=o.sent(),[3,4];case 3:i=r.authToken,o.label=4;case 4:return[2,i]}}))}))}function tE(t){return GT(t,(function(t){if(!eE(t))throw TT.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+1e4<Date.now()?pt(pt({},t),{authToken:{requestStatus:0}}):t}))}function eE(t){return void 0!==t&&2===t.registrationStatus}function nE(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return[4,QT(t)];case 1:return(e=n.sent().registrationPromise)?[4,e]:[3,3];case 2:n.sent(),n.label=3;case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o;return vt(this,(function(a){switch(a.label){case 0:return n=function(t,e){var n=e.fid;return ST(t)+"/"+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,e),r=NT(t,e),i={method:"DELETE",headers:r},[4,RT((function(){return fetch(n,i)}))];case 1:return(o=a.sent()).ok?[3,3]:[4,kT("Delete Installation",o)];case 2:throw a.sent();case 3:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function iE(t,e){var n=t.appConfig;return function(t,e){qT();var n=LT(t),r=MT.get(n);r||(r=new Set,MT.set(n,r)),r.add(e)}(n,e),function(){!function(t,e){var n=LT(t),r=MT.get(n);r&&(r.delete(e),0===r.size&&MT.delete(n),VT())}(n,e)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t){return TT.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new ue("installations",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw oE("App Configuration");if(!t.name)throw oE("App Name");try{for(var r=gt(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw oE(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),r={appConfig:n,platformLoggerProvider:t.getProvider("platform-logger")},i={app:e,getId:function(){
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return function(t){return dt(this,void 0,void 0,(function(){var e,n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,QT(t.appConfig)];case 1:return e=i.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):ZT(t).catch(console.error),[2,n.fid]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r)},getToken:function(t){return function(t,e){return void 0===e&&(e=!1),dt(this,void 0,void 0,(function(){return vt(this,(function(n){switch(n.label){case 0:return[4,nE(t.appConfig)];case 1:return n.sent(),[4,ZT(t,e)];case 2:return[2,n.sent().token]}}))}))}(r,t)},delete:function(){return function(t){return dt(this,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:return[4,GT(e=t.appConfig,(function(t){if(!t||0!==t.registrationStatus)return t}))];case 1:if(!(n=r.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw TT.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw TT.create("app-offline");case 3:return[4,rE(e,n)];case 4:return r.sent(),[4,zT(e)];case 5:r.sent(),r.label=6;case 6:return[2]}}))}))}(r)},onIdChange:function(t){return iE(r,t)}};return i}),"PUBLIC")),t.registerVersion("@firebase/installations","0.4.30")}(Oe);var aE,sE,uE=((BT={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',BT["only-available-in-window"]="This method is available in a Window context.",BT["only-available-in-sw"]="This method is available in a service worker context.",BT["permission-default"]="The notification permission was not granted and dismissed instead.",BT["permission-blocked"]="The notification permission was not granted and blocked instead.",BT["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",BT["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",BT["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",BT["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",BT["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",BT["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",BT["token-update-no-token"]="FCM returned no token when updating the user to push.",BT["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",BT["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",BT["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",BT["invalid-vapid-key"]="The public VAPID key must be a string.",BT["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",BT),cE=new Vt("messaging","Messaging",uE),lE="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function hE(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,yt([],mt(e)))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function fE(t){for(var e=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(sE=aE||(aE={})).PUSH_RECEIVED="push-received",sE.NOTIFICATION_CLICKED="notification-clicked";function pE(t){return dt(this,void 0,void 0,(function(){var e,n,r=this;return vt(this,(function(i){switch(i.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=i.sent(),!e.map((function(t){return t.name})).includes("fcm_token_details_db"))return[2,null];i.label=2;case 2:return n=null,[4,bT.openDb("fcm_token_details_db",5,(function(e){return dt(r,void 0,void 0,(function(){var r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:return e.oldVersion<2?[2]:e.objectStoreNames.contains("fcm_token_object_Store")?[4,(r=e.transaction.objectStore("fcm_token_object_Store")).index("fcmSenderId").get(t)]:[2];case 1:return i=s.sent(),[4,r.clear()];case 2:if(s.sent(),!i)return[2];if(2===e.oldVersion){if(!(o=i).auth||!o.p256dh||!o.endpoint)return[2];n={token:o.fcmToken,createTime:null!==(a=o.createTime)&&void 0!==a?a:Date.now(),subscriptionOptions:{auth:o.auth,p256dh:o.p256dh,endpoint:o.endpoint,swScope:o.swScope,vapidKey:"string"==typeof o.vapidKey?o.vapidKey:hE(o.vapidKey)}}}else(3===e.oldVersion||4===e.oldVersion)&&(n={token:(o=i).fcmToken,createTime:o.createTime,subscriptionOptions:{auth:hE(o.auth),p256dh:hE(o.p256dh),endpoint:o.endpoint,swScope:o.swScope,vapidKey:hE(o.vapidKey)}});return[2]}}))}))}))];case 3:return i.sent().close(),[4,bT.deleteDb("fcm_token_details_db")];case 4:return i.sent(),[4,bT.deleteDb("fcm_vapid_details_db")];case 5:return i.sent(),[4,bT.deleteDb("undefined")];case 6:return i.sent(),[2,dE(n)?n:null]}}))}))}function dE(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&t.createTime>0&&"string"==typeof t.token&&t.token.length>0&&"string"==typeof e.auth&&e.auth.length>0&&"string"==typeof e.p256dh&&e.p256dh.length>0&&"string"==typeof e.endpoint&&e.endpoint.length>0&&"string"==typeof e.swScope&&e.swScope.length>0&&"string"==typeof e.vapidKey&&e.vapidKey.length>0}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vE=null;function gE(){return vE||(vE=bT.openDb("firebase-messaging-database",1,(function(t){if(0===t.oldVersion)t.createObjectStore("firebase-messaging-store")}))),vE}function mE(t){return dt(this,void 0,void 0,(function(){var e,n,r;return vt(this,(function(i){switch(i.label){case 0:return e=bE(t),[4,gE()];case 1:return[4,i.sent().transaction("firebase-messaging-store").objectStore("firebase-messaging-store").get(e)];case 2:return(n=i.sent())?[2,n]:[3,3];case 3:return[4,pE(t.appConfig.senderId)];case 4:return(r=i.sent())?[4,yE(t,r)]:[3,6];case 5:return i.sent(),[2,r];case 6:return[2]}}))}))}function yE(t,e){return dt(this,void 0,void 0,(function(){var n,r,i;return vt(this,(function(o){switch(o.label){case 0:return n=bE(t),[4,gE()];case 1:return r=o.sent(),[4,(i=r.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").put(e,n)];case 2:return o.sent(),[4,i.complete];case 3:return o.sent(),[2,e]}}))}))}function _E(t){return dt(this,void 0,void 0,(function(){var e,n,r;return vt(this,(function(i){switch(i.label){case 0:return e=bE(t),[4,gE()];case 1:return n=i.sent(),[4,(r=n.transaction("firebase-messaging-store","readwrite")).objectStore("firebase-messaging-store").delete(e)];case 2:return i.sent(),[4,r.complete];case 3:return i.sent(),[2]}}))}))}function bE(t){return t.appConfig.appId}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return[4,SE(t)];case 1:n=u.sent(),r=CE(e),i={method:"POST",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(EE(t.appConfig),i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),cE.create("token-subscribe-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,cE.create("token-subscribe-failed",{errorInfo:s});if(!o.token)throw cE.create("token-subscribe-no-token");return[2,o.token]}}))}))}function IE(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return[4,SE(t)];case 1:n=u.sent(),r=CE(e.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)},u.label=2;case 2:return u.trys.push([2,5,,6]),[4,fetch(EE(t.appConfig)+"/"+e.token,i)];case 3:return[4,u.sent().json()];case 4:return o=u.sent(),[3,6];case 5:throw a=u.sent(),cE.create("token-update-failed",{errorInfo:a});case 6:if(o.error)throw s=o.error.message,cE.create("token-update-failed",{errorInfo:s});if(!o.token)throw cE.create("token-update-no-token");return[2,o.token]}}))}))}function TE(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:return[4,SE(t)];case 1:n=s.sent(),r={method:"DELETE",headers:n},s.label=2;case 2:return s.trys.push([2,5,,6]),[4,fetch(EE(t.appConfig)+"/"+e,r)];case 3:return[4,s.sent().json()];case 4:if((i=s.sent()).error)throw o=i.error.message,cE.create("token-unsubscribe-failed",{errorInfo:o});return[3,6];case 5:throw a=s.sent(),cE.create("token-unsubscribe-failed",{errorInfo:a});case 6:return[2]}}))}))}function EE(t){return"https://fcmregistrations.googleapis.com/v1/projects/"+t.projectId+"/registrations"}function SE(t){var e=t.appConfig,n=t.installations;return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(r){switch(r.label){case 0:return[4,n.getToken()];case 1:return t=r.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":"FIS "+t})]}}))}))}function CE(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==lE&&(o.web.applicationPubKey=i),o}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o,a;return vt(this,(function(s){switch(s.label){case 0:if("granted"!==Notification.permission)throw cE.create("permission-blocked");return[4,xE(e,n)];case 1:return r=s.sent(),[4,mE(t)];case 2:return i=s.sent(),o={vapidKey:n,swScope:e.scope,endpoint:r.endpoint,auth:hE(r.getKey("auth")),p256dh:hE(r.getKey("p256dh"))},i?[3,3]:[2,RE(t,o)];case 3:if(u=i.subscriptionOptions,l=(c=o).vapidKey===u.vapidKey,h=c.endpoint===u.endpoint,f=c.auth===u.auth,p=c.p256dh===u.p256dh,l&&h&&f&&p)return[3,8];s.label=4;case 4:return s.trys.push([4,6,,7]),[4,TE(t,i.token)];case 5:return s.sent(),[3,7];case 6:return a=s.sent(),console.warn(a),[3,7];case 7:return[2,RE(t,o)];case 8:return Date.now()>=i.createTime+6048e5?[2,NE({token:i.token,createTime:Date.now(),subscriptionOptions:o},t,e)]:[2,i.token];case 9:return[2]}var u,c,l,h,f,p;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))}function AE(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,mE(t)];case 1:return(n=i.sent())?[4,TE(t,n.token)]:[3,4];case 2:return i.sent(),[4,_E(t)];case 3:i.sent(),i.label=4;case 4:return[4,e.pushManager.getSubscription()];case 5:return(r=i.sent())?[2,r.unsubscribe()]:[2,!0]}}))}))}function NE(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o;return vt(this,(function(a){switch(a.label){case 0:return a.trys.push([0,3,,5]),[4,IE(e,t)];case 1:return r=a.sent(),i=pt(pt({},t),{token:r,createTime:Date.now()}),[4,yE(e,i)];case 2:return a.sent(),[2,r];case 3:return o=a.sent(),[4,AE(e,n)];case 4:throw a.sent(),o;case 5:return[2]}}))}))}function RE(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,wE(t,e)];case 1:return n=i.sent(),r={token:n,createTime:Date.now(),subscriptionOptions:e},[4,yE(t,r)];case 2:return i.sent(),[2,r.token]}}))}))}function xE(t,e){return dt(this,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return[4,t.pushManager.getSubscription()];case 1:return(n=r.sent())?[2,n]:[2,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:fE(e)})]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function PE(t){return"object"==typeof t&&!!t&&"google.c.a.c_id"in t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t){return new Promise((function(e){setTimeout(e,t)}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",(function(t){t.waitUntil(e.onPush(t))})),self.addEventListener("pushsubscriptionchange",(function(t){t.waitUntil(e.onSubChange(t))})),self.addEventListener("notificationclick",(function(t){t.waitUntil(e.onNotificationClick(t))}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw cE.create("invalid-bg-handler");this.bgMessageHandler=t},t.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},t.prototype.getToken=function(){var t,e;return dt(this,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return this.vapidKey?[3,2]:[4,mE(this.firebaseDependencies)];case 1:n=r.sent(),this.vapidKey=null!==(e=null===(t=null==n?void 0:n.subscriptionOptions)||void 0===t?void 0:t.vapidKey)&&void 0!==e?e:lE,r.label=2;case 2:return[2,kE(this.firebaseDependencies,self.registration,this.vapidKey)]}}))}))},t.prototype.deleteToken=function(){return AE(this.firebaseDependencies,self.registration)},t.prototype.requestPermission=function(){throw cE.create("only-available-in-window")},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw cE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw cE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(){throw cE.create("only-available-in-window")},t.prototype.onMessage=function(){throw cE.create("only-available-in-window")},t.prototype.onTokenRefresh=function(){throw cE.create("only-available-in-window")},t.prototype.onPush=function(t){return dt(this,void 0,void 0,(function(){var e,n,r,i;return vt(this,(function(o){switch(o.label){case 0:return e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(t),e?[4,jE()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return function(t){return t.some((function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))}(n=o.sent())?[2,FE(n,e)]:(r=!1,e.notification?[4,UE(LE(e))]:[3,3]);case 2:o.sent(),r=!0,o.label=3;case 3:return!0===r&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(i=function(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(e.notification){t.notification={};var n=e.notification.title;n&&(t.notification.title=n);var r=e.notification.body;r&&(t.notification.body=r);var i=e.notification.image;i&&(t.notification.image=i)}}(e,t),function(t,e){e.data&&(t.data=e.data)}(e,t),function(t,e){if(e.fcmOptions){t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);var r=e.fcmOptions.analytics_label;r&&(t.fcmOptions.analyticsLabel=r)}}(e,t),e}(e),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(i):this.bgMessageHandler.next(i)),[4,DE(1e3)]);case 4:return o.sent(),[2]}}))}))},t.prototype.onSubChange=function(t){var e,n;return dt(this,void 0,void 0,(function(){var r;return vt(this,(function(i){switch(i.label){case 0:return t.newSubscription?[3,2]:[4,AE(this.firebaseDependencies,self.registration)];case 1:case 5:return i.sent(),[2];case 2:return[4,mE(this.firebaseDependencies)];case 3:return r=i.sent(),[4,AE(this.firebaseDependencies,self.registration)];case 4:return i.sent(),[4,kE(this.firebaseDependencies,self.registration,null!==(n=null===(e=null==r?void 0:r.subscriptionOptions)||void 0===e?void 0:e.vapidKey)&&void 0!==n?n:lE)]}}))}))},t.prototype.onNotificationClick=function(t){var e,n;return dt(this,void 0,void 0,(function(){var r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return(r=null===(n=null===(e=t.notification)||void 0===e?void 0:e.data)||void 0===n?void 0:n.FCM_MSG)?t.action?[2]:(t.stopImmediatePropagation(),t.notification.close(),i=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;if(i)return i;return PE(t.data)?self.location.origin:null}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r),i?(o=new URL(i,self.location.href),a=new URL(self.location.origin),o.host!==a.host?[2]:[4,ME(o)]):[2]):[2];case 1:return(s=u.sent())?[3,4]:[4,self.clients.openWindow(i)];case 2:return s=u.sent(),[4,DE(3e3)];case 3:return u.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=u.sent(),u.label=6;case 6:return s?(r.messageType=aE.NOTIFICATION_CLICKED,r.isFirebaseMessaging=!0,[2,s.postMessage(r)]):[2]}}))}))},t}();function LE(t){var e,n=pt({},t.notification);return n.data=((e={}).FCM_MSG=t,e),n}function ME(t){return dt(this,void 0,void 0,(function(){var e,n,r,i,o,a,s;return vt(this,(function(u){switch(u.label){case 0:return[4,jE()];case 1:e=u.sent();try{for(n=gt(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),t.host===o.host)return[2,i]}catch(t){a={error:t}}finally{try{r&&!r.done&&(s=n.return)&&s.call(n)}finally{if(a)throw a.error}}return[2,null]}}))}))}function FE(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=aE.PUSH_RECEIVED;try{for(var i=gt(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}function jE(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function UE(t){var e,n=t.actions,r=Notification.maxActions;return n&&r&&n.length>r&&console.warn("This browser only supports "+r+" actions. The remaining actions will not be displayed."),self.registration.showNotification(null!==(e=t.title)&&void 0!==e?e:"",t)}var qE=function(){function t(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",(function(t){return e.messageEventListener(t)}))}return Object.defineProperty(t.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),t.prototype.messageEventListener=function(t){return dt(this,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:return(e=t.data).isFirebaseMessaging?(this.onMessageCallback&&e.messageType===aE.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback(function(t){return delete t.messageType,delete t.isFirebaseMessaging,t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(Object.assign({},e))):this.onMessageCallback.next(Object.assign({},e))),PE(n=e.data)&&"1"===n["google.c.a.e"]?[4,this.logEvent(e.messageType,n)]:[3,2]):[2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.getVapidKey=function(){return this.vapidKey},t.prototype.getSwReg=function(){return this.swRegistration},t.prototype.getToken=function(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:e.sent(),e.label=2;case 2:if("granted"!==Notification.permission)throw cE.create("permission-blocked");return[4,this.updateVapidKey(null==t?void 0:t.vapidKey)];case 3:return e.sent(),[4,this.updateSwReg(null==t?void 0:t.serviceWorkerRegistration)];case 4:return e.sent(),[2,kE(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}}))}))},t.prototype.updateVapidKey=function(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){return t?this.vapidKey=t:this.vapidKey||(this.vapidKey=lE),[2]}))}))},t.prototype.updateSwReg=function(t){return dt(this,void 0,void 0,(function(){return vt(this,(function(e){switch(e.label){case 0:return t||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:e.sent(),e.label=2;case 2:if(!t&&this.swRegistration)return[2];if(!(t instanceof ServiceWorkerRegistration))throw cE.create("invalid-sw-registration");return this.swRegistration=t,[2]}}))}))},t.prototype.registerDefaultSw=function(){return dt(this,void 0,void 0,(function(){var t,e;return vt(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),t=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return t.swRegistration=n.sent(),this.swRegistration.update().catch((function(){})),[3,3];case 2:throw e=n.sent(),cE.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}}))}))},t.prototype.deleteToken=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,AE(this.firebaseDependencies,this.swRegistration)]}}))}))},t.prototype.requestPermission=function(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){switch(e.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(t=e.sent()))return[2];throw"denied"===t?cE.create("permission-blocked"):cE.create("permission-default")}}))}))},t.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw cE.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw cE.create("invalid-vapid-key");this.vapidKey=t},t.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw cE.create("invalid-sw-registration");if(this.swRegistration)throw cE.create("use-sw-after-get-token");this.swRegistration=t},t.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},t.prototype.setBackgroundMessageHandler=function(){throw cE.create("only-available-in-sw")},t.prototype.onBackgroundMessage=function(){throw cE.create("only-available-in-sw")},t.prototype.onTokenRefresh=function(){return function(){}},t.prototype.logEvent=function(t,e){return dt(this,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return n=function(t){switch(t){case aE.NOTIFICATION_CLICKED:return"notification_open";case aE.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return r.sent().logEvent(n,{message_id:e["google.c.a.c_id"],message_name:e["google.c.a.c_l"],message_time:e["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}}))}))},t}();function VE(t){return cE.create("missing-app-config-values",{valueName:t})}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BE={isSupported:KE};function KE(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Oe.INTERNAL.registerComponent(new ue("messaging",(function(t){var e=t.getProvider("app").getImmediate(),n=function(t){var e,n;if(!t||!t.options)throw VE("App Configuration Object");if(!t.name)throw VE("App Name");var r=t.options;try{for(var i=gt(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var a=o.value;if(!r[a])throw VE(a)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),r={app:e,appConfig:n,installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!KE())throw cE.create("unsupported-browser");return self&&"ServiceWorkerGlobalScope"in self?new OE(r):new qE(r)}),"PUBLIC").setServiceProps(BE));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var WE=function(t){function e(n,r){var i=t.call(this,HE(n),"Firebase Storage: "+r+" ("+HE(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return ft(e,t),e.prototype._codeEquals=function(t){return HE(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(qt);function HE(t){return"storage/"+t}function zE(){return new WE("unknown","An unknown error occurred, please check the error payload for server response.")}function GE(){return new WE("canceled","User canceled the upload/download.")}function QE(){return new WE("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function $E(t){return new WE("invalid-argument",t)}function YE(){return new WE("app-deleted","The Firebase app was deleted.")}function XE(t){return new WE("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function JE(t,e){return new WE("invalid-format","String does not match format '"+t+"': "+e)}function ZE(t){throw new WE("internal-error","Internal error: "+t)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var tS={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},eS=function(t,e){this.data=t,this.contentType=e||null};function nS(t,e){switch(t){case tS.RAW:return new eS(rS(e));case tS.BASE64:case tS.BASE64URL:return new eS(iS(t,e));case tS.DATA_URL:return new eS((n=new oS(e)).base64?iS(tS.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw JE(tS.DATA_URL,"Malformed data URL.")}return rS(e)}(n.rest),function(t){return new oS(t).contentType}(e))}var n;throw zE()}function rS(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else{if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}}return new Uint8Array(e)}function iS(t,e){switch(t){case tS.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw JE(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case tS.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw JE(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(e)}catch(e){throw JE(t,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var oS=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw JE(tS.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",!!((n=i).length>=r.length)&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var aS,sS,uS={STATE_CHANGED:"state_changed"},cS={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function lS(t){switch(t){case"running":case"pausing":case"canceling":return cS.RUNNING;case"paused":return cS.PAUSED;case"success":return cS.SUCCESS;case"canceled":return cS.CANCELED;default:return cS.ERROR}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(sS=aS||(aS={}))[sS.NO_ERROR=0]="NO_ERROR",sS[sS.NETWORK_ERROR=1]="NETWORK_ERROR",sS[sS.ABORT=2]="ABORT";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var hS=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=aS.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=aS.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=aS.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw ZE("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw ZE("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw ZE("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw ZE("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var fS=function(){function t(){}return t.prototype.createConnection=function(){return new hS},t}(),pS=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new WE("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(t){t.path_=decodeURIComponent(t.path)}for(var s=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+s+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://"+("firebasestorage.googleapis.com"===n?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var f=h[l.indices.bucket],p=h[l.indices.path];p||(p=""),r=new t(f,p),l.postModify(r);break}}if(null==r)throw function(t){return new WE("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),dS=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){return"string"==typeof t||t instanceof String}function gS(t){return mS()&&t instanceof Blob}function mS(){return"undefined"!=typeof Blob}function yS(t,e,n,r){if(r<e)throw $E("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw $E("Invalid value for '"+t+"'. Expected "+n+" or less.")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function bS(t){var e=encodeURIComponent,n="?";for(var r in t)if(t.hasOwnProperty(r)){n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wS=function(){function t(t,e,n,r,i,o,a,s,u,c,l){var h=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise((function(t,e){h.resolve_=t,h.reject_=e,h.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r=t.resolve_,i=t.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(o,o.getResponseText());void 0!==a?r(a):r()}catch(t){i(t)}else if(null!==o)(s=zE()).serverResponse=o.getResponseText(),t.errorCallback_?i(t.errorCallback_(o,s)):i(s);else if(n.canceled){i(s=t.appDelete_?YE():GE())}else{var s;i(s=new WE("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}}this.canceled_?e(0,new IS(!1,null,!0)):this.backoffId_=
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n){var r=1,i=null,o=!1,a=0;function s(){return 2===a}var u=!1;function c(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];u||(u=!0,e.apply(null,t))}function l(e){i=setTimeout((function(){i=null,t(h,s())}),e)}function h(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!u)if(t)c.call.apply(c,yt([null,t],e));else{var i;s()||o?c.call.apply(c,yt([null,t],e)):(r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),l(i))}}var f=!1;function p(t){f||(f=!0,u||(null!==i?(t||(a=2),clearTimeout(i),l(0)):t||(a=1)))}return l(0),setTimeout((function(){o=!0,p(!0)}),n),p}((function(e,n){if(n)e(!1,new IS(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===aS.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var a=-1!==t.successCodes_.indexOf(o);e(!0,new IS(a,r))}else{var s=r.getErrorCode()===aS.ABORT;e(!1,new IS(!1,null,s))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}),e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&function(t){t(!1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),IS=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function TS(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ES(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=TS();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(mS())return new Blob(t);throw new WE("unsupported-environment","This browser doesn't seem to support creating Blobs")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var SS=function(){function t(t,e){var n=0,r="";gS(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(gS(this.data_)){var r=this.data_,i=(a=e,s=n,(o=r).webkitSlice?o.webkitSlice(a,s):o.mozSlice?o.mozSlice(a,s):o.slice?o.slice(a,s):null);return null===i?null:new t(i)}var o,a,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(mS()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(ES.apply(null,r))}var i=e.map((function(t){return vS(t)?nS(tS.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var a=new Uint8Array(o),s=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)a[s++]=t[e]})),new t(a,!0)},t.prototype.uploadData=function(){return this.data_},t}();
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CS(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kS(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t,e){return e}var NS=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||AS},RS=null;function xS(){if(RS)return RS;var t=[];t.push(new NS("bucket")),t.push(new NS("generation")),t.push(new NS("metageneration")),t.push(new NS("name","fullPath",!0));var e=new NS("name");e.xform=function(t,e){return function(t){return!vS(t)||t.length<2?t:kS(t)}(e)},t.push(e);var n=new NS("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new NS("timeCreated")),t.push(new NS("updated")),t.push(new NS("md5Hash",null,!0)),t.push(new NS("cacheControl",null,!0)),t.push(new NS("contentDisposition",null,!0)),t.push(new NS("contentEncoding",null,!0)),t.push(new NS("contentLanguage",null,!0)),t.push(new NS("contentType",null,!0)),t.push(new NS("metadata","customMetadata",!0)),RS=t}function PS(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var a=n[o];r[a.local]=a.xform(r,e[a.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new pS(n,r);return e._makeStorageReference(i)}})}(r,t),r}function DS(t,e,n){var r=CS(e);return null===r?null:PS(t,r,n)}function OS(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LS(t,e,n){var r=CS(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var a=o[i].replace(/\/$/,""),s=t._makeStorageReference(new pS(e,a));r.prefixes.push(s)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var l=c[u];s=t._makeStorageReference(new pS(e,l.name)),r.items.push(s)}return r}(t,e,r)}var MS=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t){if(!t)throw zE()}function jS(t,e){return function(n,r){var i=DS(t,r,e);return FS(null!==i),i}}function US(t,e){return function(n,r){var i=DS(t,r,e);return FS(null!==i),function(t,e,n){var r=CS(e);if(null===r)return null;if(!vS(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return _S("/b/"+o(r)+"/o/"+o(i),n)+bS({alt:"media",token:e})}))[0]}(i,r,t.host)}}function qS(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new WE("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new WE("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new WE("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new WE("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function VS(t){var e=qS(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new WE("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function BS(t,e,n){var r=_S(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new MS(r,"GET",jS(t,n),i);return o.errorHandler=VS(e),o}function KS(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var a=_S(e.bucketOnlyServerUrl(),t.host),s=t.maxOperationRetryTime,u=new MS(a,"GET",function(t,e){return function(n,r){var i=LS(t,e,r);return FS(null!==i),i}}(t,e.bucket),s);return u.urlParams=o,u.errorHandler=qS(e),u}function WS(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}var HS=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function zS(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){FS(!1)}return FS(!!n&&-1!==(e||["active"]).indexOf(n)),n}function GS(t,e,n,r,i,o,a,s){var u=new HS(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new WE("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,f=h+l,p={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":""+u.current},d=r.slice(h,f);if(null===d)throw QE();var v=e.maxUploadRetryTime,g=new MS(n,"POST",(function(t,n){var i,a=zS(t,["active","final"]),s=u.current+l,c=r.size();return i="final"===a?jS(e,o)(t,n):null,new HS(s,c,"final"===a,i)}),v);return g.headers=p,g.body=d.uploadData(),g.progressCallback=s||null,g.errorHandler=qS(t),g}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var QS=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $S(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var YS=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=xS(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a=WS(e,r,i),s={name:a.fullPath},u=_S(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=OS(a,n),h=t.maxUploadRetryTime,f=new MS(u,"POST",(function(t){var e;zS(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){FS(!1)}return FS(vS(e)),e}),h);return f.urlParams=s,f.headers=c,f.body=l,f.errorHandler=qS(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new MS(n,"POST",(function(t){var e=zS(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){FS(!1)}n||FS(!1);var i=Number(n);return FS(!isNaN(i)),new HS(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=qS(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=262144*this._chunkMultiplier,n=new HS(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var a;try{a=GS(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var s=t._ref.storage._makeRequest(a,i,o);t._request=s,s.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=BS(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();a["Content-Type"]="multipart/related; boundary="+s;var u=WS(e,r,i),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+OS(u,n)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",h=SS.getBlob(c,r,l);if(null===h)throw QE();var f={name:u.fullPath},p=_S(o,t.host),d=t.maxUploadRetryTime,v=new MS(p,"POST",jS(t,n),d);return v.urlParams=f,v.headers=a,v.body=h.uploadData(),v.errorHandler=qS(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=t,this._notifyObservers();break;case"canceled":this._error=GE(),this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=lS(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new QS(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(lS(this._state)){case cS.SUCCESS:$S(this._resolve.bind(null,this.snapshot))();break;case cS.CANCELED:case cS.ERROR:$S(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(lS(this._state)){case cS.RUNNING:case cS.PAUSED:t.next&&$S(t.next.bind(t,this.snapshot))();break;case cS.SUCCESS:t.complete&&$S(t.complete.bind(t))();break;default:t.error&&$S(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),XS=function(){function t(t,e){this._service=t,this._location=e instanceof pS?e:pS.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new pS(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return kS(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new pS(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw XE(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(t){var e={prefixes:[],items:[]};return ZS(t,e).then((function(){return e}))}function ZS(t,e,n){return dt(this,void 0,void 0,(function(){var r,i,o;return vt(this,(function(a){switch(a.label){case 0:return[4,tC(t,{pageToken:n})];case 1:return r=a.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,ZS(t,e,r.nextPageToken)];case 2:a.sent(),a.label=3;case 3:return[2]}}))}))}function tC(t,e){return dt(this,void 0,void 0,(function(){var n,r;return vt(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&yS("options.maxResults",1,1e3,e.maxResults),n=e||{},r=KS(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function eC(t,e){return dt(this,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=_S(e.fullServerUrl(),t.host),o=OS(n,r),a=t.maxOperationRetryTime,s=new MS(i,"PATCH",jS(t,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=VS(e),s}(t.storage,t._location,e,xS()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}function nC(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=_S(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new MS(r,"GET",US(t,n),i);return o.errorHandler=VS(e),o}(t.storage,t._location,xS()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new WE("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function rC(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=_S(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new MS(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=VS(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}function iC(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new pS(t._location.bucket,n);return new XS(t.storage,r)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t){return/^[A-Za-z]+:\/\//.test(t)}function aC(t,e){if(t instanceof cC){var n=t;if(null==n._bucket)throw new WE("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new XS(n,n._bucket);return null!=e?aC(r,e):r}if(void 0!==e){if(e.includes(".."))throw $E('`path` param cannot contain ".."');return iC(t,e)}return t}function sC(t,e){if(e&&oC(e)){if(t instanceof cC)return new XS(t,e);throw $E("To use ref(service, url), the first argument must be a Storage instance.")}return aC(t,e)}function uC(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:pS.makeFromBucketSpec(n,t)}var cC=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host="firebasestorage.googleapis.com",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?pS.makeFromBucketSpec(i,this._host):uC(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=pS.makeFromBucketSpec(this._url,t):this._bucket=uC(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){yS("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){yS("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return dt(this,void 0,void 0,(function(){var t,e;return vt(this,(function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new XS(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new dS(YE());var i=function(t,e,n,r,i,o){var a=bS(t.urlParams),s=t.url+a,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new wS(s,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return dt(this,void 0,void 0,(function(){var e,n,r;return vt(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lC(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new YS(t,new SS(e),n)}(t=se(t),e,n)}function hC(t){return function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=BS(t.storage,t._location,xS()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=se(t))}function fC(t,e){return sC(t=se(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pC=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),dC=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new pC(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new pC(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new pC(t,i,i._ref))}:{next:e.next?function(t){return e.next(new pC(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),vC=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new gC(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new gC(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),gC=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){var n=function(t,e){return iC(t,e)}(this._delegate,e);return new t(n,this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new dC(lC(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=tS.RAW),this._throwIfRoot("putString");var r=nS(e,t),i=pt({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new dC(new YS(this._delegate,new SS(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,JS(t=se(t))).then((function(t){return new vC(t,e.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return tC(t=se(t),e)}(this._delegate,t||void 0).then((function(t){return new vC(t,e.storage)}))},t.prototype.getMetadata=function(){return hC(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return eC(t=se(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return nC(se(this._delegate))},t.prototype.delete=function(){return this._throwIfRoot("delete"),rC(se(this._delegate))},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw XE(t)},t}(),mC=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(oC(t))throw $E("ref() expected a child path but got a URL, use refFromURL instead.");return new gC(fC(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!oC(t))throw $E("refFromURL() expected a full URL but got a child path, use ref() instead.");try{pS.makeFromUrl(t,this._delegate.host)}catch(t){throw $E("refFromUrl() expected a valid full URL but got an invalid one.")}return new gC(fC(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yC(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new mC(r,new cC(r,i,o,new fS,n,Oe.SDK_VERSION))}!function(t){var e={TaskState:cS,TaskEvent:uS,StringFormat:tS,Storage:cC,Reference:gC};t.INTERNAL.registerComponent(new ue("storage",yC,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion("@firebase/storage","0.5.6")}(Oe);var _C,bC,wC,IC=((_C={})["trace started"]="Trace {$traceName} was started before.",_C["trace stopped"]="Trace {$traceName} is not running.",_C["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",_C["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",_C["no window"]="Window is not available.",_C["no app id"]="App id is not available.",_C["no project id"]="Project id is not available.",_C["no api key"]="Api key is not available.",_C["invalid cc log"]="Attempted to queue invalid cc event",_C["FB not default"]="Performance can only start when Firebase app instance is the default one.",_C["RC response not ok"]="RC response is not ok",_C["invalid attribute name"]="Attribute name {$attributeName} is invalid.",_C["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",_C["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",_C["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",_C),TC=new Vt("performance","Performance",IC),EC=new be("Performance");EC.logLevel=pe.INFO;var SC,CC=function(){function t(t){if(this.window=t,!t)throw TC.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Ft()||(EC.info("IndexedDB is not supported by current browswer"),!1):(EC.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var i=r[n];e(i)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===bC&&(bC=new t(wC)),bC},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kC(t,e){var n=t.length-e.length;if(n<0||n>1)throw TC.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var AC,NC,RC,xC=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=kC("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=kC("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw TC.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw TC.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw TC.create("no api key");return t},t.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},t.getInstance=function(){return void 0===SC&&(SC=new t),SC},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PC(){return AC}(RC=NC||(NC={}))[RC.UNKNOWN=0]="UNKNOWN",RC[RC.VISIBLE=1]="VISIBLE",RC[RC.HIDDEN=2]="HIDDEN";var DC=["firebase_","google_","ga_"],OC=new RegExp("^[a-zA-Z]\\w*$");function LC(){var t=CC.getInstance().navigator;return"serviceWorker"in t?t.serviceWorker.controller?2:3:1}function MC(){switch(CC.getInstance().document.visibilityState){case"visible":return NC.VISIBLE;case"hidden":return NC.HIDDEN;default:return NC.UNKNOWN}}function FC(){var t=CC.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var jC=!0;function UC(t){var e=function(){var t=CC.getInstance().localStorage;if(!t)return;var e=t.getItem("@firebase/performance/configexpire");if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem("@firebase/performance/config");if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?(qC(e),Promise.resolve()):function(t){return(e=xC.getInstance().installationsService.getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+xC.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+xC.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:xC.getInstance().getAppId(),app_version:"0.4.16",sdk_version:"0.0.1"})});return fetch(r).then((function(t){if(t.ok)return t.json();throw TC.create("RC response not ok")}))})).catch((function(){EC.info("Could not fetch config, will use default configs")}));var e;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t).then(qC).then((function(t){return function(t){var e=CC.getInstance().localStorage;if(!t||!e)return;e.setItem("@firebase/performance/config",JSON.stringify(t)),e.setItem("@firebase/performance/configexpire",String(Date.now()+36e5*xC.getInstance().configTimeToLive))}(t)}),(function(){}))}function qC(t){if(!t)return t;var e=xC.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=jC,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=VC(e.tracesSamplingRate),e.logNetworkAfterSampling=VC(e.networkRequestsSamplingRate),t}function VC(t){return Math.random()<=t}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var BC,KC=1;function WC(){return KC=2,BC=BC||function(){var t=CC.getInstance().document;return new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))}().then((function(){return(t=xC.getInstance().installationsService.getId()).then((function(t){AC=t})),t;var t})).then((function(t){return UC(t)})).then((function(){return HC()}),(function(){return HC()}))}function HC(){KC=3}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var zC,GC=3,QC=[],$C=!1;function YC(t){setTimeout((function(){var t,e;if(0!==GC)return QC.length?(t=QC.splice(0,1e3),e=t.map((function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}})),void function(t,e){return function(t){var e=xC.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then((function(t){return t.ok||EC.info("Call to Firebase backend failed."),t.json()})).then((function(t){var n=Number(t.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=t.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(QC=yt(yt([],e),QC),EC.info("Retry transport request later.")),GC=3,YC(r)}))}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:xC.getInstance().logSource,log_event:e},t).catch((function(){QC=yt(yt([],t),QC),GC--,EC.info("Tries left: "+GC+"."),YC(1e4)}))):YC(1e4)}),t)}function XC(t){if(!t.eventTime||!t.message)throw TC.create("invalid cc log");QC=yt(yt([],QC),[t])}function JC(t,e){var n;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zC||(n=ek,zC=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];XC({message:n.apply(void 0,t),eventTime:Date.now()})}),zC(t,e)}function ZC(t){var e=xC.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&CC.getInstance().requiredApisAvailable()&&(t.isAuto&&MC()!==NC.VISIBLE||(3===KC?tk(t):WC().then((function(){return tk(t)}),(function(){return tk(t)}))))}function tk(t){if(PC()){var e=xC.getInstance();e.loggingEnabled&&e.logTraceAfterSampling&&setTimeout((function(){return JC(t,1)}),0)}}function ek(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:nk(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:nk(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function nk(){return{google_app_id:xC.getInstance().getAppId(),app_instance_id:PC(),web_app_info:{sdk_version:"0.4.16",page_url:CC.getInstance().getUrl(),service_worker_status:LC(),visibility_state:MC(),effective_connection_type:FC()},application_process_state:0}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rk=["_fp","_fcp","_fid"];
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ik=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=CC.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||"FB-PERF-TRACE-MEASURE-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw TC.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw TC.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),ZC(this)},t.prototype.record=function(t,e,n){if(t<=0)throw TC.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw TC.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=pt({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}ZC(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},t.prototype.putMetric=function(t,e){if(i=t,o=this.name,0===i.length||i.length>100||!(o&&o.startsWith("_wt_")&&rk.indexOf(i)>-1)&&i.startsWith("_"))throw TC.create("invalid custom metric name",{customMetricName:t});var n,r,i,o;this.counters[t]=(n=e,(r=Math.floor(n))<n&&EC.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>40||DC.some((function(t){return n.startsWith(t)}))||!n.match(OC)),i=function(t){return 0!==t.length&&t.length<=100}(e);if(r&&i)this.customAttributes[t]=e;else{if(!r)throw TC.create("invalid attribute name",{attributeName:t});if(!i)throw TC.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return pt({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var i=CC.getInstance().getUrl();if(i){var o=new t("_wt_"+i,!0),a=Math.floor(1e3*CC.getInstance().getTimeOrigin());o.setStartTime(a),e&&e[0]&&(o.setDuration(Math.floor(1e3*e[0].duration)),o.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),o.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),o.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var s=n.find((function(t){return"first-paint"===t.name}));s&&s.startTime&&o.putMetric("_fp",Math.floor(1e3*s.startTime));var u=n.find((function(t){return"first-contentful-paint"===t.name}));u&&u.startTime&&o.putMetric("_fcp",Math.floor(1e3*u.startTime)),r&&o.putMetric("_fid",Math.floor(1e3*r))}ZC(o)}},t.createUserTimingTrace=function(e){ZC(new t(e,!1,e))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ok(t){var e=t;if(e&&void 0!==e.responseStart){var n=CC.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),i=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,o=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=xC.getInstance();if(e.instrumentationEnabled){var n=t.url,r=e.logEndPointUrl.split("?")[0],i=e.flTransportEndpointUrl.split("?")[0];n!==r&&n!==i&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return JC(t,0)}),0)}}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:i,timeToResponseCompletedUs:o})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(){PC()&&(setTimeout((function(){return function(){var t=CC.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){ik.createOobTrace(e,n),r=void 0}),5e3);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),ik.createOobTrace(e,n,t))}))}else ik.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=CC.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){ok(r[n])}t.setupObserver("resource",ok)}()}),0),setTimeout((function(){return function(){for(var t=CC.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){sk(r[n])}t.setupObserver("measure",sk)}()}),0))}function sk(t){var e=t.name;"FB-PERF-TRACE-MEASURE"!==e.substring(0,"FB-PERF-TRACE-MEASURE".length)&&ik.createUserTimingTrace(e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var uk=function(){function t(t){this.app=t,CC.getInstance().requiredApisAvailable()&&jt().then((function(t){t&&($C||(YC(5500),$C=!0),WC().then(ak,ak))})).catch((function(t){EC.info("Environment doesn't support IndexedDB: "+t)}))}return t.prototype.trace=function(t){return new ik(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return xC.getInstance().instrumentationEnabled},set:function(t){xC.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return xC.getInstance().dataCollectionEnabled},set:function(t){xC.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){var e=function(t,e){if("[DEFAULT]"!==t.name)throw TC.create("FB not default");if("undefined"==typeof window)throw TC.create("no window");return function(t){wC=t}(window),xC.getInstance().firebaseAppInstance=t,xC.getInstance().installationsService=e,new uk(t)};t.INTERNAL.registerComponent(new ue("performance",(function(t){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();return e(n,r)}),"PUBLIC")),t.registerVersion("@firebase/performance","0.4.16")}(Oe);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var ck,lk,hk,fk;(lk=ck||(ck={})).EVENT="event",lk.SET="set",lk.CONFIG="config",(fk=hk||(hk={})).ADD_SHIPPING_INFO="add_shipping_info",fk.ADD_PAYMENT_INFO="add_payment_info",fk.ADD_TO_CART="add_to_cart",fk.ADD_TO_WISHLIST="add_to_wishlist",fk.BEGIN_CHECKOUT="begin_checkout",fk.CHECKOUT_PROGRESS="checkout_progress",fk.EXCEPTION="exception",fk.GENERATE_LEAD="generate_lead",fk.LOGIN="login",fk.PAGE_VIEW="page_view",fk.PURCHASE="purchase",fk.REFUND="refund",fk.REMOVE_FROM_CART="remove_from_cart",fk.SCREEN_VIEW="screen_view",fk.SEARCH="search",fk.SELECT_CONTENT="select_content",fk.SELECT_ITEM="select_item",fk.SELECT_PROMOTION="select_promotion",fk.SET_CHECKOUT_OPTION="set_checkout_option",fk.SHARE="share",fk.SIGN_UP="sign_up",fk.TIMING_COMPLETE="timing_complete",fk.VIEW_CART="view_cart",fk.VIEW_ITEM="view_item",fk.VIEW_ITEM_LIST="view_item_list",fk.VIEW_PROMOTION="view_promotion",fk.VIEW_SEARCH_RESULTS="view_search_results";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var pk,dk=new be("@firebase/analytics");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vk(t,e,n,r,i,o){return dt(this,void 0,void 0,(function(){var a,s,u,c;return vt(this,(function(l){switch(l.label){case 0:a=r[i],l.label=1;case 1:return l.trys.push([1,7,,8]),a?[4,e[a]]:[3,3];case 2:return l.sent(),[3,6];case 3:return[4,Promise.all(n)];case 4:return s=l.sent(),(u=s.find((function(t){return t.measurementId===i})))?[4,e[u.appId]]:[3,6];case 5:l.sent(),l.label=6;case 6:return[3,8];case 7:return c=l.sent(),dk.error(c),[3,8];case 8:return t(ck.CONFIG,i,o),[2]}}))}))}function gk(t,e,n,r,i){return dt(this,void 0,void 0,(function(){var o,a,s,u,c,l,h,f;return vt(this,(function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),o=[],i&&i.send_to?(a=i.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(n)]):[3,2];case 1:for(s=p.sent(),u=function(t){var n=s.find((function(e){return e.measurementId===t})),r=n&&e[n.appId];if(!r)return o=[],"break";o.push(r)},c=0,l=a;c<l.length&&(h=l[c],"break"!==u(h));c++);p.label=2;case 2:return 0===o.length&&(o=Object.values(e)),[4,Promise.all(o)];case 3:return p.sent(),t(ck.EVENT,r,i||{}),[3,5];case 4:return f=p.sent(),dk.error(f),[3,5];case 5:return[2]}}))}))}function mk(t,e,n,r,i){var o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)};return window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=function(t,e,n,r){return function(i,o,a){return dt(this,void 0,void 0,(function(){var s;return vt(this,(function(u){switch(u.label){case 0:return u.trys.push([0,6,,7]),i!==ck.EVENT?[3,2]:[4,gk(t,e,n,o,a)];case 1:return u.sent(),[3,5];case 2:return i!==ck.CONFIG?[3,4]:[4,vk(t,e,n,r,o,a)];case 3:return u.sent(),[3,5];case 4:t(ck.SET,o),u.label=5;case 5:return[3,7];case 6:return s=u.sent(),dk.error(s),[3,7];case 7:return[2]}}))}))}}(o,t,e,n),{gtagCore:o,wrappedGtag:window[i]}}var yk=((pk={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",pk["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",pk["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",pk["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pk["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",pk["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",pk["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",pk["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',pk["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',pk),_k=new Vt("analytics","Analytics",yk),bk=new(function(){function t(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}return t.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},t.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},t.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},t}());function wk(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}function Ik(t){var e;return dt(this,void 0,void 0,(function(){var n,r,i,o,a,s,u;return vt(this,(function(c){switch(c.label){case 0:return n=t.appId,r=t.apiKey,i={method:"GET",headers:wk(r)},o="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),[4,fetch(o,i)];case 1:if(200===(a=c.sent()).status||304===a.status)return[3,6];s="",c.label=2;case 2:return c.trys.push([2,4,,5]),[4,a.json()];case 3:return u=c.sent(),(null===(e=u.error)||void 0===e?void 0:e.message)&&(s=u.error.message),[3,5];case 4:return c.sent(),[3,5];case 5:throw _k.create("config-fetch-failed",{httpStatus:a.status,responseMessage:s});case 6:return[2,a.json()]}}))}))}function Tk(t,e,n,r){var i=e.throttleEndTimeMillis,o=e.backoffCount;return void 0===r&&(r=bk),dt(this,void 0,void 0,(function(){var e,a,s,u,c,l,h;return vt(this,(function(f){switch(f.label){case 0:e=t.appId,a=t.measurementId,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,Ek(n,i)];case 2:return f.sent(),[3,4];case 3:if(s=f.sent(),a)return dk.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:a}];throw s;case 4:return f.trys.push([4,6,,7]),[4,Ik(t)];case 5:return u=f.sent(),r.deleteThrottleMetadata(e),[2,u];case 6:if(!function(t){if(!(t instanceof qt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(c=f.sent())){if(r.deleteThrottleMetadata(e),a)return dk.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+a+' provided in the "measurementId" field in the local Firebase config. ['+c.message+"]"),[2,{appId:e,measurementId:a}];throw c}return l=503===Number(c.customData.httpStatus)?ae(o,r.intervalMillis,30):ae(o,r.intervalMillis),h={throttleEndTimeMillis:Date.now()+l,backoffCount:o+1},r.setThrottleMetadata(e,h),dk.debug("Calling attemptFetch again in "+l+" millis"),[2,Tk(t,h,n,r)];case 7:return[2]}}))}))}function Ek(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(_k.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Sk=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}();
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ck(t,e,n,r,i,o){return dt(this,void 0,void 0,(function(){var a,s,u,c,l,h,f;return vt(this,(function(p){switch(p.label){case 0:return a=function(t,e,n){return void 0===e&&(e=bk),dt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c=this;return vt(this,(function(l){if(r=t.options,i=r.appId,o=r.apiKey,a=r.measurementId,!i)throw _k.create("no-app-id");if(!o){if(a)return[2,{measurementId:a,appId:i}];throw _k.create("no-api-key")}return s=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},u=new Sk,setTimeout((function(){return dt(c,void 0,void 0,(function(){return vt(this,(function(t){return u.abort(),[2]}))}))}),void 0!==n?n:6e4),[2,Tk({appId:i,apiKey:o,measurementId:a},s,u,e)]}))}))}(t),a.then((function(e){n[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&dk.warn("The measurement ID in the local Firebase config ("+t.options.measurementId+") does not match the measurement ID fetched from the server ("+e.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(t){return dk.error(t)})),e.push(a),s=function(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){switch(e.label){case 0:return Ft()?[3,1]:(dk.warn(_k.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return e.trys.push([1,3,,4]),[4,jt()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),dk.warn(_k.create("indexeddb-unavailable",{errorInfo:t}).message),[2,!1];case 4:return[2,!0]}}))}))}().then((function(t){return t?r.getId():void 0})),[4,Promise.all([a,s])];case 1:return u=p.sent(),c=u[0],l=u[1],function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes("https://www.googletagmanager.com/gtag/js"))return r}return null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()||function(t,e){var n=document.createElement("script");n.src="https://www.googletagmanager.com/gtag/js?l="+t+"&id="+e,n.async=!0,document.head.appendChild(n)}(o,c.measurementId),i("js",new Date),(f={}).origin="firebase",f.update=!0,h=f,null!=l&&(h.firebase_id=l),i(ck.CONFIG,c.measurementId,h),[2,c.measurementId]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kk,Ak,Nk={},Rk=[],xk={},Pk="dataLayer",Dk="gtag",Ok=!1;function Lk(t){if(Ok)throw _k.create("already-initialized");t.dataLayerName&&(Pk=t.dataLayerName),t.gtagName&&(Dk=t.gtagName)}function Mk(t,e){!function(){var t=[];if(Ot()&&t.push("This is a browser extension environment."),Ut()||t.push("Cookies are not available."),t.length>0){var e=t.map((function(t,e){return"("+(e+1)+") "+t})).join(" "),n=_k.create("invalid-analytics-context",{errorInfo:e});dk.warn(n.message)}}();var n,r,i=t.options.appId;if(!i)throw _k.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw _k.create("no-api-key");dk.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=Nk[i])throw _k.create("already-exists",{id:i});if(!Ok){n=Pk,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var o=mk(Nk,Rk,xk,Pk,Dk),a=o.wrappedGtag,s=o.gtagCore;Ak=a,kk=s,Ok=!0}Nk[i]=Ck(t,Rk,xk,e,kk,Pk);var u={app:t,logEvent:function(t,e,n){(
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,r,i){return dt(this,void 0,void 0,(function(){var o,a;return vt(this,(function(s){switch(s.label){case 0:return i&&i.global?(t(ck.EVENT,n,r),[2]):[3,1];case 1:return[4,e];case 2:o=s.sent(),a=pt(pt({},r),{send_to:o}),t(ck.EVENT,n,a),s.label=3;case 3:return[2]}}))}))})(Ak,Nk[i],t,e,n).catch((function(t){return dk.error(t)}))},setCurrentScreen:function(t,e){(function(t,e,n,r){return dt(this,void 0,void 0,(function(){var i;return vt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ck.SET,{screen_name:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ck.CONFIG,i,{update:!0,screen_name:n}),o.label=3;case 3:return[2]}}))}))})(Ak,Nk[i],t,e).catch((function(t){return dk.error(t)}))},setUserId:function(t,e){(function(t,e,n,r){return dt(this,void 0,void 0,(function(){var i;return vt(this,(function(o){switch(o.label){case 0:return r&&r.global?(t(ck.SET,{user_id:n}),[2,Promise.resolve()]):[3,1];case 1:return[4,e];case 2:i=o.sent(),t(ck.CONFIG,i,{update:!0,user_id:n}),o.label=3;case 3:return[2]}}))}))})(Ak,Nk[i],t,e).catch((function(t){return dk.error(t)}))},setUserProperties:function(t,e){(function(t,e,n,r){return dt(this,void 0,void 0,(function(){var i,o,a,s,u;return vt(this,(function(c){switch(c.label){case 0:if(!r||!r.global)return[3,1];for(i={},o=0,a=Object.keys(n);o<a.length;o++)s=a[o],i["user_properties."+s]=n[s];return t(ck.SET,i),[2,Promise.resolve()];case 1:return[4,e];case 2:u=c.sent(),t(ck.CONFIG,u,{update:!0,user_properties:n}),c.label=3;case 3:return[2]}}))}))})(Ak,Nk[i],t,e).catch((function(t){return dk.error(t)}))},setAnalyticsCollectionEnabled:function(t){(function(t,e){return dt(this,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return[4,t];case 1:return n=r.sent(),window["ga-disable-"+n]=!e,[2]}}))}))})(Nk[i],t).catch((function(t){return dk.error(t)}))},INTERNAL:{delete:function(){return delete Nk[i],Promise.resolve()}}};return u}function Fk(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:if(Ot())return[2,!1];if(!Ut())return[2,!1];if(!Ft())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,jt()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}}))}))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */!function(t){t.INTERNAL.registerComponent(new ue("analytics",(function(t){return Mk(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())}),"PUBLIC").setServiceProps({settings:Lk,EventName:hk,isSupported:Fk})),t.INTERNAL.registerComponent(new ue("analytics-internal",(function(t){try{return{logEvent:t.getProvider("analytics").getImmediate().logEvent}}catch(t){throw _k.create("interop-component-reg-failed",{reason:t})}}),"PRIVATE")),t.registerVersion("@firebase/analytics","0.6.14")}(Oe);var jk,Uk=function(){function t(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}return t.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},t.prototype.fetch=function(t){return dt(this,void 0,void 0,(function(){var e,n,r,i,o;return vt(this,(function(a){switch(a.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=a.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(t.cacheMaxAgeMillis,n)?[2,r]:(t.eTag=r&&r.eTag,[4,this.client.fetch(t)]);case 2:return i=a.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return a.sent(),[2,i]}}))}))},t}(),qk=((jk={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",jk["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",jk["registration-api-key"]="Undefined API key. Check Firebase app initialization.",jk["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",jk["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",jk["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",jk["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",jk["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",jk["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",jk["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',jk["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',jk["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",jk["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",jk),Vk=new Vt("remoteconfig","Remote Config",qk);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var Bk=function(){function t(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}return t.prototype.fetch=function(t){return dt(this,void 0,void 0,(function(){var e,n,r,i,o,a,s,u,c,l,h,f,p,d,v,g,m,y,_;return vt(this,(function(b){switch(b.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:e=b.sent(),n=e[0],r=e[1],i=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=i+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":t.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:this.appId,language_code:(void 0===w&&(w=navigator),w.languages&&w.languages[0]||w.language)},u={method:"POST",headers:a,body:JSON.stringify(s)},c=fetch(o,u),l=new Promise((function(e,n){t.signal.addEventListener((function(){var t=new Error("The operation was aborted.");t.name="AbortError",n(t)}))})),b.label=2;case 2:return b.trys.push([2,5,,6]),[4,Promise.race([c,l])];case 3:return b.sent(),[4,c];case 4:return h=b.sent(),[3,6];case 5:throw f=b.sent(),p="fetch-client-network","AbortError"===f.name&&(p="fetch-timeout"),Vk.create(p,{originalErrorMessage:f.message});case 6:if(d=h.status,v=h.headers.get("ETag")||void 0,200!==h.status)return[3,11];y=void 0,b.label=7;case 7:return b.trys.push([7,9,,10]),[4,h.json()];case 8:return y=b.sent(),[3,10];case 9:throw _=b.sent(),Vk.create("fetch-client-parse",{originalErrorMessage:_.message});case 10:g=y.entries,m=y.state,b.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?d=500:"NO_CHANGE"===m?d=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==d&&200!==d)throw Vk.create("fetch-status",{httpStatus:d});return[2,{status:d,eTag:v,config:g}]}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var w}))}))},t}(),Kk=function(){function t(){this.listeners=[]}return t.prototype.addEventListener=function(t){this.listeners.push(t)},t.prototype.abort=function(){this.listeners.forEach((function(t){return t()}))},t}(),Wk=["1","true","t","yes","y","on"],Hk=function(){function t(t,e){void 0===e&&(e=""),this._source=t,this._value=e}return t.prototype.asString=function(){return this._value},t.prototype.asBoolean=function(){return"static"!==this._source&&Wk.indexOf(this._value.toLowerCase())>=0},t.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},t.prototype.getSource=function(){return this._source},t}(),zk=function(){function t(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return t.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=pe.DEBUG;break;case"silent":this._logger.logLevel=pe.SILENT;break;default:this._logger.logLevel=pe.ERROR}},Object.defineProperty(t.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),t.prototype.activate=function(){return dt(this,void 0,void 0,(function(){var t,e,n;return vt(this,(function(r){switch(r.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return t=r.sent(),e=t[0],n=t[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return r.sent(),[2,!0]}}))}))},t.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then((function(){t._isInitializationComplete=!0}))),this._initializePromise},t.prototype.fetch=function(){return dt(this,void 0,void 0,(function(){var t,e,n,r=this;return vt(this,(function(i){switch(i.label){case 0:t=new Kk,setTimeout((function(){return dt(r,void 0,void 0,(function(){return vt(this,(function(e){return t.abort(),[2]}))}))}),this.settings.fetchTimeoutMillis),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:t})];case 2:return i.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return i.sent(),[3,6];case 4:return e=i.sent(),a="fetch-throttle",n=(o=e)instanceof qt&&-1!==o.code.indexOf(a)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(n)];case 5:throw i.sent(),e;case 6:return[2]}var o,a}))}))},t.prototype.fetchAndActivate=function(){return dt(this,void 0,void 0,(function(){return vt(this,(function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}}))}))},t.prototype.getAll=function(){var t=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(pt(pt({},t),e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this._storageCache.getActiveConfig(),this.defaultConfig).reduce((function(e,n){return e[n]=t.getValue(n),e}),{})},t.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},t.prototype.getNumber=function(t){return this.getValue(t).asNumber()},t.prototype.getString=function(t){return this.getValue(t).asString()},t.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new Hk("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new Hk("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new Hk("static"))},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(t,e){var n=t.target.error||void 0;return Vk.create(e,{originalErrorMessage:n&&n.message})}var Qk=function(){function t(t,e,n,r){void 0===r&&(r=new Promise((function(t,e){var n=indexedDB.open("firebase_remote_config",1);n.onerror=function(t){e(Gk(t,"storage-open"))},n.onsuccess=function(e){t(e.target.result)},n.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore("app_namespace_store",{keyPath:"compositeKey"})}}))),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}return t.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},t.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},t.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},t.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},t.prototype.getActiveConfig=function(){return this.get("active_config")},t.prototype.setActiveConfig=function(t){return this.set("active_config",t)},t.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},t.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},t.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},t.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},t.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},t.prototype.get=function(t){return dt(this,void 0,void 0,(function(){var e,n=this;return vt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readonly").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.get(a);s.onerror=function(t){i(Gk(t,"storage-get"))},s.onsuccess=function(t){var e=t.target.result;r(e?e.value:void 0)}}catch(t){i(Vk.create("storage-get",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.set=function(t,e){return dt(this,void 0,void 0,(function(){var n,r=this;return vt(this,(function(i){switch(i.label){case 0:return[4,this.openDbPromise];case 1:return n=i.sent(),[2,new Promise((function(i,o){var a=n.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),s=r.createCompositeKey(t);try{var u=a.put({compositeKey:s,value:e});u.onerror=function(t){o(Gk(t,"storage-set"))},u.onsuccess=function(){i()}}catch(t){o(Vk.create("storage-set",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.delete=function(t){return dt(this,void 0,void 0,(function(){var e,n=this;return vt(this,(function(r){switch(r.label){case 0:return[4,this.openDbPromise];case 1:return e=r.sent(),[2,new Promise((function(r,i){var o=e.transaction(["app_namespace_store"],"readwrite").objectStore("app_namespace_store"),a=n.createCompositeKey(t);try{var s=o.delete(a);s.onerror=function(t){i(Gk(t,"storage-delete"))},s.onsuccess=function(){r()}}catch(t){i(Vk.create("storage-delete",{originalErrorMessage:t&&t.message}))}}))]}}))}))},t.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},t}(),$k=function(){function t(t){this.storage=t}return t.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},t.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},t.prototype.getActiveConfig=function(){return this.activeConfig},t.prototype.loadFromStorage=function(){return dt(this,void 0,void 0,(function(){var t,e,n,r,i,o;return vt(this,(function(a){switch(a.label){case 0:return t=this.storage.getLastFetchStatus(),e=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),[4,t];case 1:return(r=a.sent())&&(this.lastFetchStatus=r),[4,e];case 2:return(i=a.sent())&&(this.lastSuccessfulFetchTimestampMillis=i),[4,n];case 3:return(o=a.sent())&&(this.activeConfig=o),[2]}}))}))},t.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},t.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},t.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},t}();
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Yk(t,e){return new Promise((function(n,r){var i=Math.max(e-Date.now(),0),o=setTimeout(n,i);t.addEventListener((function(){clearTimeout(o),r(Vk.create("fetch-throttle",{throttleEndTimeMillis:e}))}))}))}var Xk,Jk=function(){function t(t,e){this.client=t,this.storage=e}return t.prototype.fetch=function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=n.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(t,e)]}}))}))},t.prototype.attemptFetch=function(t,e){var n=e.throttleEndTimeMillis,r=e.backoffCount;return dt(this,void 0,void 0,(function(){var e,i,o;return vt(this,(function(a){switch(a.label){case 0:return[4,Yk(t.signal,n)];case 1:a.sent(),a.label=2;case 2:return a.trys.push([2,5,,7]),[4,this.client.fetch(t)];case 3:return e=a.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return a.sent(),[2,e];case 5:if(!function(t){if(!(t instanceof qt&&t.customData))return!1;var e=Number(t.customData.httpStatus);return 429===e||500===e||503===e||504===e}(i=a.sent()))throw i;return o={throttleEndTimeMillis:Date.now()+ae(r),backoffCount:r+1},[4,this.storage.setThrottleMetadata(o)];case 6:return a.sent(),[2,this.attemptFetch(t,o)];case 7:return[2]}}))}))},t}();function Zk(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}(Xk=Oe).INTERNAL.registerComponent(new ue("remoteConfig",(function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw Vk.create("registration-window");var o=r.options,a=o.projectId,s=o.apiKey,u=o.appId;if(!a)throw Vk.create("registration-project-id");if(!s)throw Vk.create("registration-api-key");if(!u)throw Vk.create("registration-app-id");n=n||"firebase";var c=new Qk(u,r.name,n),l=new $k(c),h=new be("@firebase/remote-config");h.logLevel=pe.ERROR;var f=new Bk(i,Xk.SDK_VERSION,n,a,s,u),p=new Jk(f,c),d=new Uk(p,c,l,h),v=new zk(r,d,l,c,h);return v.ensureInitialized(),v}),"PUBLIC").setMultipleInstances(!0)),Xk.registerVersion("@firebase/remote-config","0.1.41");var tA,eA=Zk(lt),nA=((tA={})["already-activated"]="You are trying to activate AppCheck for FirebaseApp {$appName}, while it is already activated. AppCheck can only be activated once.",tA["use-before-activation"]="AppCheck is being used before activate() is called for FirebaseApp {$appName}. Please make sure you call activate() before instantiating other Firebase services.",tA["fetch-network-error"]="Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",tA["fetch-parse-error"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",tA["fetch-status-error"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",tA["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",tA["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",tA["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",tA["recaptcha-error"]="ReCAPTCHA error.",tA),rA=new Vt("appCheck","AppCheck",nA),iA=new Map,oA={activated:!1,tokenObservers:[]},aA={enabled:!1};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(t){return iA.get(t)||oA}function uA(t,e){iA.set(t,e)}function cA(){return aA}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lA(){return self.grecaptcha}function hA(t){if(!sA(t).activated)throw rA.create("use-before-activation",{appName:t.name})}function fA(t,e){var n=sA(t),r=new Nt;uA(t,pt(pt({},n),{reCAPTCHAState:{initialized:r}}));var i="fire_app_check_"+t.name,o=document.createElement("div");o.id=i,o.style.display="none",document.body.appendChild(o);var a,s,u=lA();return u?u.ready((function(){dA(t,e,u,i),r.resolve(u)})):(a=function(){var n=lA();if(!n)throw new Error("no recaptcha");n.ready((function(){dA(t,e,n,i),r.resolve(n)}))},(s=document.createElement("script")).src="https://www.google.com/recaptcha/api.js",s.onload=a,document.head.appendChild(s)),r.promise}function pA(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:return hA(t),[4,sA(t).reCAPTCHAState.initialized.promise];case 1:return e=n.sent(),[2,new Promise((function(n,r){var i=sA(t).reCAPTCHAState;e.ready((function(){n(e.execute(i.widgetId,{action:"fire_app_check"}))}))}))]}}))}))}function dA(t,e,n,r){var i=n.render(r,{sitekey:e,size:"invisible"}),o=sA(t);uA(t,pt(pt({},o),{reCAPTCHAState:pt(pt({},o.reCAPTCHAState),{widgetId:i})}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var vA=3e4,gA=96e4,mA=function(){function t(t,e,n,r,i){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}return t.prototype.start=function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch((function(){}))},t.prototype.stop=function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)},t.prototype.isRunning=function(){return!!this.pending},t.prototype.process=function(t){return dt(this,void 0,void 0,(function(){var e;return vt(this,(function(n){switch(n.label){case 0:this.stop(),n.label=1;case 1:return n.trys.push([1,6,,7]),this.pending=new Nt,[4,(r=this.getNextRun(t),new Promise((function(t){setTimeout(t,r)})))];case 2:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 3:return n.sent(),this.pending=new Nt,[4,this.operation()];case 4:return n.sent(),this.pending.resolve(),[4,this.pending.promise];case 5:return n.sent(),this.process(!0).catch((function(){})),[3,7];case 6:return e=n.sent(),this.retryPolicy(e)?this.process(!1).catch((function(){})):this.stop(),[3,7];case 7:return[2]}var r;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}))}))},t.prototype.getNextRun=function(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e},t}();function yA(t,e){var n=t.url,r=t.body;return dt(this,void 0,void 0,(function(){var t,i,o,a,s,u,c,l,h,f;return vt(this,(function(p){switch(p.label){case 0:t={"Content-Type":"application/json"},(i=e.getImmediate({optional:!0}))&&(t["X-Firebase-Client"]=i.getPlatformInfoString()),o={method:"POST",body:JSON.stringify(r),headers:t},p.label=1;case 1:return p.trys.push([1,3,,4]),[4,fetch(n,o)];case 2:return a=p.sent(),[3,4];case 3:throw s=p.sent(),rA.create("fetch-network-error",{originalErrorMessage:s.message});case 4:if(200!==a.status)throw rA.create("fetch-status-error",{httpStatus:a.status});p.label=5;case 5:return p.trys.push([5,7,,8]),[4,a.json()];case 6:return u=p.sent(),[3,8];case 7:throw c=p.sent(),rA.create("fetch-parse-error",{originalErrorMessage:c.message});case 8:if(!(l=u.ttl.match(/^([\d.]+)(s)$/))||!l[2]||isNaN(Number(l[1])))throw rA.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: "+u.ttl});return h=1e3*Number(l[1]),f=Date.now(),[2,{token:u.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f}]}}))}))}function _A(t,e){var n=t.options;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/"+n.projectId+"/apps/"+n.appId+":exchangeRecaptchaToken?key="+n.apiKey,body:{recaptcha_token:e}}}function bA(t,e){var n=t.options;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/"+n.projectId+"/apps/"+n.appId+":exchangeDebugToken?key="+n.apiKey,body:{debug_token:e}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var wA=null;function IA(){return wA||(wA=new Promise((function(t,e){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(e){t(e.target.result)},n.onerror=function(t){var n;e(rA.create("storage-open",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(t){var e=t.target.result;if(0===t.oldVersion)e.createObjectStore("firebase-app-check-store",{keyPath:"compositeKey"})}}catch(t){e(rA.create("storage-open",{originalErrorMessage:t.message}))}})))}function TA(t){return SA(CA(t))}function EA(t,e){return dt(this,void 0,void 0,(function(){var n,r,i,o;return vt(this,(function(a){switch(a.label){case 0:return[4,IA()];case 1:return n=a.sent(),r=n.transaction("firebase-app-check-store","readwrite"),i=r.objectStore("firebase-app-check-store"),o=i.put({compositeKey:t,value:e}),[2,new Promise((function(t,e){o.onsuccess=function(e){t()},r.onerror=function(t){var n;e(rA.create("storage-set",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function SA(t){return dt(this,void 0,void 0,(function(){var e,n,r,i;return vt(this,(function(o){switch(o.label){case 0:return[4,IA()];case 1:return e=o.sent(),n=e.transaction("firebase-app-check-store","readonly"),r=n.objectStore("firebase-app-check-store"),i=r.get(t),[2,new Promise((function(t,e){i.onsuccess=function(e){var n=e.target.result;t(n?n.value:void 0)},n.onerror=function(t){var n;e(rA.create("storage-get",{originalErrorMessage:null===(n=t.target.error)||void 0===n?void 0:n.message}))}}))]}}))}))}function CA(t){return t.options.appId+"-"+t.name}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kA=new be("@firebase/app-check");
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){return dt(this,void 0,void 0,(function(){var e,n;return vt(this,(function(r){switch(r.label){case 0:if(!Ft())return[3,5];e=void 0,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,TA(t)];case 2:return e=r.sent(),[3,4];case 3:return n=r.sent(),kA.warn("Failed to read token from indexeddb. Error: "+n),[3,4];case 4:return[2,e];case 5:return[2,void 0]}}))}))}function NA(t,e){return Ft()?function(t,e){return EA(CA(t),e)}(t,e).catch((function(t){kA.warn("Failed to write token to indexeddb. Error: "+t)})):Promise.resolve()}function RA(){return dt(this,void 0,void 0,(function(){var t,e;return vt(this,(function(n){switch(n.label){case 0:t=void 0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,SA("debug-token")];case 2:return t=n.sent(),[3,4];case 3:return n.sent(),[3,4];case 4:return t?[2,t]:(e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})),(r=e,EA("debug-token",r)).catch((function(t){return kA.warn("Failed to persist debug token to indexeddb. Error: "+t)})),console.log("AppCheck debug token: "+e+". You will need to whitelist it in the Firebase console for it to work"),[2,e])}var r}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return dt(this,void 0,void 0,(function(){var t;return vt(this,(function(e){if((t=cA()).enabled&&t.token)return[2,t.token.promise];throw Error("\n            Can't get debug token in production mode.\n        ")}))}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var PA={error:"UNKNOWN_ERROR"};function DA(t){return St.encodeString(JSON.stringify(t),!1)}function OA(t,e,n){return void 0===n&&(n=!1),dt(this,void 0,void 0,(function(){var r,i,o,a,s,u,c,l,h,f,p,d,v,g;return vt(this,(function(m){switch(m.label){case 0:return hA(t),r=sA(t),i=r.token,o=void 0,i?[3,2]:[4,AA(t)];case 1:(a=m.sent())&&jA(a)&&(i=a,uA(t,pt(pt({},r),{token:i})),FA(t,{token:i.token})),m.label=2;case 2:return!n&&i&&jA(i)?[2,{token:i.token}]:cA().enabled?(u=yA,c=bA,l=[t],[4,xA()]):[3,6];case 3:return[4,u.apply(void 0,[c.apply(void 0,l.concat([m.sent()])),e])];case 4:return s=m.sent(),[4,NA(t,s)];case 5:return m.sent(),uA(t,pt(pt({},r),{token:s})),[2,{token:s.token}];case 6:return m.trys.push([6,12,,13]),r.customProvider?[4,r.customProvider.getToken()]:[3,8];case 7:return h=m.sent(),f=function(t){var e=zt(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null}(h.token),p=null!==f&&f<Date.now()&&f>0?1e3*f:Date.now(),i=pt(pt({},h),{issuedAtTimeMillis:p}),[3,11];case 8:return[4,pA(t).catch((function(t){throw rA.create("recaptcha-error")}))];case 9:return d=m.sent(),[4,yA(_A(t,d),e)];case 10:i=m.sent(),m.label=11;case 11:return[3,13];case 12:return v=m.sent(),kA.error(v),o=v,[3,13];case 13:return i?[3,14]:(g=function(t){return{token:DA(PA),error:t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(o),[3,16]);case 14:return g={token:i.token},uA(t,pt(pt({},r),{token:i})),[4,NA(t,i)];case 15:m.sent(),m.label=16;case 16:return FA(t,g),[2,g]}}))}))}function LA(t,e,n,r,i){var o=sA(t),a={next:r,error:i,type:n},s=pt(pt({},o),{tokenObservers:yt(yt([],o.tokenObservers),[a])});if(!s.tokenRefresher){var u=function(t,e){var n=this;return new mA((function(){return dt(n,void 0,void 0,(function(){var n;return vt(this,(function(r){switch(r.label){case 0:return sA(t).token?[3,2]:[4,OA(t,e)];case 1:return n=r.sent(),[3,4];case 2:return[4,OA(t,e,!0)];case 3:n=r.sent(),r.label=4;case 4:if(n.error)throw n.error;return[2]}}))}))}),(function(){return!0}),(function(){var e=sA(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5,r=e.token.expireTimeMillis-3e5;return n=Math.min(n,r),Math.max(0,n-Date.now())}return 0}),vA,gA)}(t,e);s.tokenRefresher=u}if(s.tokenRefresher.isRunning()||!0!==o.isTokenAutoRefreshEnabled||s.tokenRefresher.start(),o.token&&jA(o.token)){var c=o.token;Promise.resolve().then((function(){return r({token:c.token})})).catch((function(){}))}uA(t,s)}function MA(t,e){var n=sA(t),r=n.tokenObservers.filter((function(t){return t.next!==e}));0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),uA(t,pt(pt({},n),{tokenObservers:r}))}function FA(t,e){for(var n=0,r=sA(t).tokenObservers;n<r.length;n++){var i=r[n];try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch(t){}}}function jA(t){return t.expireTimeMillis-Date.now()>0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function UA(t,e){return{app:t,activate:function(e,n){return function(t,e,n){var r=sA(t);if(r.activated)throw rA.create("already-activated",{appName:t.name});var i=pt(pt({},r),{activated:!0});"string"==typeof e?i.siteKey=e:i.customProvider=e,i.isTokenAutoRefreshEnabled=void 0===n?t.automaticDataCollectionEnabled:n,uA(t,i),i.siteKey&&fA(t,i.siteKey).catch((function(){}))}(t,e,n)},setTokenAutoRefreshEnabled:function(e){return function(t,e){var n=sA(t);n.tokenRefresher&&(!0===e?n.tokenRefresher.start():n.tokenRefresher.stop()),uA(t,pt(pt({},n),{isTokenAutoRefreshEnabled:e}))}(t,e)},getToken:function(n){return function(t,e,n){return dt(this,void 0,void 0,(function(){var r;return vt(this,(function(i){switch(i.label){case 0:return[4,OA(t,e,n)];case 1:if((r=i.sent()).error)throw r.error;return[2,{token:r.token}]}}))}))}(t,e,n)},onTokenChanged:function(n,r,i){return function(t,e,n,r,i){var o=function(){},a=function(){};return o=null!=n.next?n.next.bind(n):n,null!=n.error?a=n.error.bind(n):r&&(a=r),LA(t,e,"EXTERNAL",o,a),function(){return MA(t,o)}}(t,e,n,r)},INTERNAL:{delete:function(){for(var e=0,n=sA(t).tokenObservers;e<n.length;e++){var r=n[e];MA(t,r.next)}return Promise.resolve()}}}}var qA;(qA=eA.default).INTERNAL.registerComponent(new ue("appCheck",(function(t){return UA(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(t,e,n){t.getProvider("app-check-internal").initialize()}))),qA.INTERNAL.registerComponent(new ue("app-check-internal",(function(t){return function(t,e){return{getToken:function(n){return OA(t,e,n)},addTokenListener:function(n){return LA(t,e,"INTERNAL",n)},removeTokenListener:function(e){return MA(t,e)}}}(t.getProvider("app").getImmediate(),t.getProvider("platform-logger"))}),"PUBLIC").setInstantiationMode("EXPLICIT")),qA.registerVersion("@firebase/app-check","0.2.0"),function(){var e=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("Unable to locate global object.")}();if("string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN||!0===e.FIREBASE_APPCHECK_DEBUG_TOKEN){var n=cA();n.enabled=!0;var r=new Nt;n.token=r,"string"==typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN?r.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):r.resolve(RA())}}();
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Oe.registerVersion("firebase","8.7.1","app"),Oe.SDK_VERSION="8.7.1";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),Oe.registerVersion("firebase","8.7.1");Oe.initializeApp({apiKey:"0lvv3QfJYRAX4H5TcjQmeU5KAJSDyY9M4MS1yiKY",authDomain:"apx-dwf-m6-c3fa7.firebaseapp.com",databaseURL:"https://dwf-m6-6b33e-default-rtdb.firebaseio.com/"});const VA=Oe.database();var BA=i("f1q41");const KA={data:{name:null,email:null,userId:null,roomId:null,rtdbRoomId:null,messages:[]},listeners:[],getState(){return this.data},setEmailAndName(t,e){const n=this.getState();n.email=t,n.name=e,this.setState(n)},setUserId(t){const e=this.getState();e.userId=t,this.setState(e)},setRoomId(t){const e=this.getState();void 0!==t&&(e.roomId=t,this.setState(e))},setLongRoomId(t){const e=this.getState();e.rtdbRoomId=t,this.setState(e)},createUser(t,e){const n=this.getState();n.email?fetch("https://chatapp-realtime-dwfm6.herokuapp.com/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n.name,email:n.email})}).then((t=>t.json())).then((r=>{n.userId=r.id,this.setState(n),e?this.authRoomId(e).then((e=>{e.id?(this.connectToRoom(),t()):alert(e)})):this.createRoom(t)})):alert("Debes colocar un mail.")},createRoom(t){const e=this.getState();e.userId&&fetch("https://chatapp-realtime-dwfm6.herokuapp.com/rooms",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:e.userId})}).then((t=>t.json())).then((n=>{null==e.roomId&&(e.roomId=n.id.toString(),this.setState(e)),this.connectToRoom(),t()}))},authRoomId(t){const e=this.getState();return fetch("https://chatapp-realtime-dwfm6.herokuapp.com/auth/rooms",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t})}).then((t=>t.json())).then((t=>t.id?(e.roomId=t.id,t):t.message))},getAuth:t=>fetch("https://chatapp-realtime-dwfm6.herokuapp.com/auth",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}).then((t=>t.json())).then((t=>t)),connectToRoom(){const t=this.getState();t.roomId&&t.userId&&fetch(`https://chatapp-realtime-dwfm6.herokuapp.com/rooms/${t.roomId}?userId=${t.userId}`).then((t=>t.json())).then((e=>{t.rtdbRoomId=e.rtdbId,this.setState(t),this.listenRoom()}))},listenRoom(){const t=this.getState();VA.ref(`/rooms/${t.rtdbRoomId}`).on("value",(e=>{const n=this.getState(),r=e.val(),i=BA.map(r.messages);n.messages=i,this.setState(t)}))},pushMessages(t){const e=this.getState();fetch(`https://chatapp-realtime-dwfm6.herokuapp.com/rooms/${e.rtdbRoomId}`,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:e.name,message:t})}).then((t=>t.json())).then((t=>t))},setState(t){this.data=t;for(const t of this.listeners)t();localStorage.setItem("state",JSON.stringify(t))},suscribe(t){this.listeners.push(t)}};class WA extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}addListeners(){const t=this.shadow.querySelector("form"),e=this.shadow.querySelector("select"),n=this.shadow.querySelector(".id__container");e.addEventListener("change",(t=>{const e=t.target.value;"newRoom"==e&&(n.innerHTML=""),"actualRoom"==e&&(n.innerHTML='\n          <label class="label" type="text" name="id">\n            <text-custom weight="500" size="20px">Ingrese el ID de la sala:</text-custom>\n            <input class="input" type="text" name="id" placeholder="1400">\n          </label>\n        ')})),t.addEventListener("submit",(t=>{t.preventDefault();const e=t.target,n=e.name.value,r=e.email.value,i=e.select.value,o=e.id.value;if(""!==r&&""!==n){if("newRoom"==i){KA.setEmailAndName(r,n);const t=KA.getState();t.rtdbRoomId&&t.userId?rt.go("/chat"):KA.createUser((()=>{rt.go("/chat")}))}if("actualRoom"==i){const t=KA.getState();""!==o&&(KA.setEmailAndName(r,n),t.rtdbRoomId&&t.userId?rt.go("/chat"):KA.createUser((()=>{rt.go("/chat")}),o))}}else alert("Debes completar todos los campos")}))}connectedCallback(){this.render()}render(){const t=document.createElement("style");t.innerHTML="\n      .form {\n        display: flex;\n        flex-direction: column;\n      }\n\n      .label {\n        display: flex;\n        flex-direction: column;\n      }\n      .label:first-child{\n        margin-top: 15px;\n      }\n      \n      .input {\n        height: 30px;\n        margin-bottom: 15px;\n      }\n\n      .select {\n        height: 30px;\n      }\n\n      .btn {\n        background-color: #465c88;\n        border-style: none;\n        border-radius: 4px;\n        height: 40px;\n        margin-top: 20px;\n      }\n      .btn:hover {\n        cursor: pointer;\n      }\n    ",this.shadow.innerHTML='\n      <form class="form">\n        <label name="name" type="text" class="label">\n          <text-custom weight="500" size="20px">Tu nombre:</text-custom>\n          <input class="input" type="text" name="name" placeholder="Tu nombre" require>\n        </label>\n\n        <label name="email" type="email" class="label">\n          <text-custom weight="500" size="20px">Tu email:</text-custom>\n          <input class="input" type="email" name="email" placeholder="pepite@gmail.com" require>\n        </label>\n\n        <text-custom weight="500" size="20px">Deseo:</text-custom>\n        <select class="select" type="text" name="select">\n          <option value="newRoom">Crear una sala</option>\n          <option value="actualRoom">Ingresar a una sala</option>\n        </select>\n\n        <div class="id__container"></div>\n\n        <button class="btn">\n          <text-custom weight="bold" size="20px">Comenzar</text-custom>\n        </button>\n      </form>\n    ',this.shadow.appendChild(t),this.addListeners()}}customElements.define("login-form",WA);class HA extends HTMLElement{messages=[];constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}addListeners(){this.shadow.querySelector(".form").addEventListener("submit",(t=>{t.preventDefault();const e=t.target;KA.pushMessages(e.msg.value)}))}connectedCallback(){this.render()}render(){const t=document.createElement("style");t.innerHTML="\n      .form {\n        display: flex;\n        flex-direction: column;\n      }\n\n      .input {\n        height: 30px;\n      }\n\n      .btn {\n        background-color: #575da9;\n        border-style: none;\n        border-radius: 4px;\n        height: 40px;\n        margin-top: 5px;\n      }\n      .btn:hover {\n        cursor: pointer;\n      }\n    ",this.shadow.innerHTML='\n      <form class="form">\n        <input class="input" type="text" name="msg" placeholder="Hey There! Im ussing WhatsGram" require>\n        <button class="btn">\n          <text-custom weight="bold" size="20px">Enviar</text-custom>\n        </button>\n      </form>\n    ',this.shadow.appendChild(t),this.addListeners()}}customElements.define("chat-form",HA);class zA extends HTMLElement{constructor(){super(),this.render()}render(){const t=this.attachShadow({mode:"open"}),e=this.getAttribute("text"),n=this.getAttribute("username"),r=this.getAttribute("color"),i=this.getAttribute("textalign")||"left",o=document.createElement("style");o.textContent=`\n    .bubble{\n      width: max-content;\n      max-width: 200px;\n      border-radius: 5px;\n      background-color: ${r};\n      padding: 5px;\n    }\n    .message-text{\n      text-align: ${i};\n    }\n    \n    .username{\n      display: block;\n      text-align: ${i};\n      }\n    `;const a=document.createElement("div");a.classList.add("bubble"),a.innerHTML=`\n      <text-custom class="username" weight="bold" size="16px">${n}</text-custom>\n      <div>\n        <text-custom class="message-text" weight="400" size="16px">${e}</text-custom>\n      </div>\n    `,t.appendChild(o),t.appendChild(a)}}customElements.define("user-bubble",zA);class GA extends HTMLElement{constructor(){super(),this.shadow=this.attachShadow({mode:"open"});const t=document.createElement("style");t.innerHTML="\n      .container {\n        width: 100%;\n      }\n      h1 {\n        margin: 0 auto;\n      }\n    ",this.shadow.appendChild(t)}addListeners(){}connectedCallback(){this.render()}render(){const t=document.createElement("div");t.classList.add("container"),t.innerHTML='\n      <text-custom weight="bold" size="30px">WhatsGram</text-custom>\n\n      <login-form></login-form>\n    ',this.shadow.appendChild(t),this.addListeners()}}customElements.define("home-page",GA);class QA extends HTMLElement{messages=[];constructor(){super(),this.shadow=this.attachShadow({mode:"open"});const t=document.createElement("style");t.innerHTML="\n      .container {\n        width: 100%;\n      }\n      h1 {\n        margin: 0 auto;\n      }\n      .chat {\n        width: 100%;\n        height: 280px;\n        display: flex;\n        flex-direction: column;\n        overflow: auto;\n      }\n      .bubble__owner {\n        margin: 0 0 2px auto;\n      }\n      .bubble__guest {\n        margin-bottom: 2px;\n      }\n    ",this.shadow.appendChild(t)}connectedCallback(){KA.suscribe((()=>{const t=KA.getState();""!==t.roomId&&0!=t.messages.length&&this.messages.length<t.messages.length&&(this.messages=t.messages,this.messages.shift(),this.shadow.lastChild.remove(),this.render())}));const t=KA.getState();this.messages=t.messages,this.render()}render(){const t=document.createElement("div");t.classList.add("container");const e=KA.getState();t.innerHTML=`\n      <text-custom weight="bold" size="30px">Chat: ${e.roomId}</text-custom>\n\n      <div class="chat"></div>\n\n      <chat-form></chat-form>\n    `;const n=t.querySelector(".chat");!function(t){for(const e of t){console.log(e);const t=KA.getState(),r=document.createElement("div");e.from===t.name&&(r.innerHTML=`\n            <user-bubble username="${e.from}" text="${e.message}" color="#7a9d96" textalign="right"></user-bubble>\n          `,r.className="bubble__owner",n.appendChild(r)),e.from!==t.name&&(r.innerHTML=`\n            <user-bubble username="${e.from}" text="${e.message}" color="#cae4db" textalign="left"></user-bubble>\n          `,r.className="bubble__guest",n.appendChild(r))}}(this.messages),n.scrollTo({top:1e3,left:0,behavior:"auto"}),this.shadow.appendChild(t)}}customElements.define("chat-page",QA);new rt(document.querySelector(".root")).setRoutes([{path:"/",component:"home-page"},{path:"/chat",component:"chat-page"}]);
//# sourceMappingURL=index.db26ba4f.js.map
